

<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo/router &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="The Dojo Toolkit - Reference Guide" href="../index.html" />
    <link rel="up" title="Dojo" href="contents.html" />
    <link rel="next" title="dojo/rpc" href="rpc.html" />
    <link rel="prev" title="dojo/robotx" href="robotx.html" />

    <link rel="stylesheet" href="../_static/css/site.css">
    <link rel="stylesheet" href="../_static/js/docs/resources/guide.css">
	<script type="text/javascript">
		dojoConfig = {
			async: true
		};
	</script>
    <script type="text/javascript" src="../_static/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="../_static/js/docs/guide.js"></script>

  </head>
  <body>  

    <div class="document">
    <div id="accessibilityNode">
        <a href="#intro">Skip to Content</a> | <a href="#nav">Skip to Navigation</a>
    </div>
    <hr class="hide">
    <div id="page" class="docPage">
        <div id="header">
            <div class="container">
                <span id="logo"><a title="Home" href="http://dojotoolkit.org">
                    <img alt="Dojo Toolkit" src="../_static/images/logo.png"></a>
                </span>
                <ul id="navigation">
                    <li class="home"><a href="/"><span class="homeIcon"></span></a></li>
                    <li class="download"><a href="/download/">Download</a></li>
                    <li class="features"><a href="/features/">Features</a></li>
                    <li class="docs active"><a href="/documentation/">Documentation</a></li>
                    <li class="community"><a href="/community/">Community</a></li>
                    <li class="about"><a href="/blog/">Blog</a></li>
                </ul>
            </div>
        </div>
    
        <hr class="hide" />
    
        <div id="main">
            <div id="content" class="innerBox">
                <div class="pageTitleContainer">
                    <h1>Documentation</h1>
                    <ul class="subnav">
                        <li><a href="/documentation/"><span>Tutorials</span></a></li>
                        <li class="active"><a href="/reference-guide/"><span>Reference Guide</span></a></li>
                        <li><a href="/api/"><span>API Documentation</span></a></li>
                    </ul>
                </div>
                <div class="line">
                    <div class="unit size3of4 firstUnit">
                        <div class="spacer">
                            
  <div class="section" id="dojo-router">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojo/router</a><a class="headerlink" href="#dojo-router" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-router" id="id2">dojo/router</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#examples" id="id5">Examples</a></li>
<li><a class="reference internal" href="#see-also" id="id6">See Also</a></li>
</ul>
</li>
</ul>
</div>
<p><strong>dojo/router</strong> is a package that provides the ability to map hash based structures to callbacks.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">dojo/router</span></tt> is designed to allow the mapping of the browser hash to a callback, so that when the hash is updated, it can be used to direct to a callback.  It also allows for parameterization of the hash, so that parts of the hash string can be parsed out and used as variables within the callback.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Usage is requiring in the module, registering any callbacks and then starting the router:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/something/:id&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// Will fire when the hash matches</span>
    <span class="c1">// evt.params.id will contain what is passed in :id</span>
  <span class="p">});</span>

  <span class="c1">// Startup must be called in order to &quot;activate&quot; the router</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;], function(router){
  router.register(&quot;/something/:id&quot;, function(evt){
    // Will fire when the hash matches
    // evt.params.id will contain what is passed in :id
  });

  // Startup must be called in order to &quot;activate&quot; the router
  router.startup();
});</textarea></div><div class="section" id="register">
<h3>register()<a class="headerlink" href="#register" title="Permalink to this headline">¶</a></h3>
<p>Allows the registration of a hash pattern and its associated callback.  <tt class="docutils literal"><span class="pre">register()</span></tt> takes two arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="12%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>route</td>
<td>String|RegExp</td>
<td>A string or regular expression that should be used for matching hash changes.</td>
</tr>
<tr class="row-odd"><td>callback</td>
<td>Function</td>
<td>When the hash matches a pattern as described in the route, this callback will be executed.</td>
</tr>
</tbody>
</table>
<p>When provided a RegExp for the <tt class="docutils literal"><span class="pre">route</span></tt>:</p>
<ul class="simple">
<li>Matching is performed, and the resulting capture groups are passed through to the callback as an array.</li>
</ul>
<p>When provided a string for the route:</p>
<ul class="simple">
<li>The string is parsed as a URL-like structure, like <tt class="docutils literal"><span class="pre">/foo/bar</span></tt></li>
<li>If any portions of that URL are prefixed with a colon (<tt class="docutils literal"><span class="pre">:</span></tt>), they will be parsed out and provided to the callback
as in the argument object in the <tt class="docutils literal"><span class="pre">params</span></tt> property.</li>
<li>If the last piece of the URL-like structure is prefixed with a star (<tt class="docutils literal"><span class="pre">*</span></tt>) instead of a colon, it will be replaced
in the resulting RegExp generated by the router with a greedy (<tt class="docutils literal"><span class="pre">.+</span></tt>) match and anything remaining on the hash will
be provided as a property on the object passed into the callback. Think of it like a basic means of globbing the end
of a route.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">callback</span></tt> function will be called with an event argument that has several properties:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">params</span></tt>: Either an array or object of properties pulled from the new hash</li>
<li><tt class="docutils literal"><span class="pre">oldPath</span></tt>: The hash in its state before the change</li>
<li><tt class="docutils literal"><span class="pre">newPath</span></tt>: The new hash being shifted to</li>
<li><tt class="docutils literal"><span class="pre">preventDefault</span></tt>: A method that will stop hash changes from being actually applied to the active hash. This only works if the hash change was initiated using <tt class="docutils literal"><span class="pre">dojo/router::go()</span></tt>, as changes initiated more directly to the <tt class="docutils literal"><span class="pre">location.hash</span></tt> property will already be in place.</li>
<li><tt class="docutils literal"><span class="pre">stopImmediatePropagation</span></tt>: When called, will stop any further bound callbacks on this particular route from being executed. If two distinct routes are bound that are different, but both happen to match the current hash in some way, this will <em>not</em> keep other routes from receiving notice of the change.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">register()</span></tt> returns a handle object that can be used to unregister the callback or add additional callbacks to the same route:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/some/path&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">handle</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>

  <span class="nx">handle</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;], function(router){
  var handle = router.register(&quot;/some/path&quot;, function(evt){
    // ...
  });

  handle.register(function(evt){
    // ...
  }, true);

  handle.remove();
});</textarea></div><p>The handle&#8217;s <tt class="docutils literal"><span class="pre">register()</span></tt> function takes an optional second argument of <tt class="docutils literal"><span class="pre">isBefore</span></tt> which if <tt class="docutils literal"><span class="pre">true</span></tt> will insert the callback before the current handle&#8217;s callback.  It defaults to <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
</div>
<div class="section" id="registerbefore">
<h3>registerBefore()<a class="headerlink" href="#registerbefore" title="Permalink to this headline">¶</a></h3>
<p>This function works just like <tt class="docutils literal"><span class="pre">register()</span></tt> but will insert the callback before any other callbacks registered for the same hash pattern.</p>
</div>
<div class="section" id="startup">
<h3>startup()<a class="headerlink" href="#startup" title="Permalink to this headline">¶</a></h3>
<p>Starts up the router and registers for notification of hash changes.</p>
</div>
<div class="section" id="go">
<h3>go()<a class="headerlink" href="#go" title="Permalink to this headline">¶</a></h3>
<p>A convenience function for changing the hash.  It means you do not need to require <tt class="docutils literal"><span class="pre">dojo/hash</span></tt> directly. It also synchronously fires off any routes that match:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">});</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;], function(router){
  router.register(&quot;/foo/bar&quot;, function(evt){
    // ...
  });

  router.startup();

  router.go(&quot;/foo/bar&quot;);
});</textarea></div></div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id5">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" data-dojo-props="type: 'dialog', pluginArgs:{ dojoConfig: 'async: true', version:'' }, width:'700', height:'400', toolbar:'', themename:'claro'"><div class="CodeGlassMiniInner"><p>This example demonstrates the basic usage of <tt class="docutils literal"><span class="pre">dojo/router</span></tt> by fetching some content on a hash change.</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/router&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/request&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/json&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">,</span> <span class="nx">dom</span><span class="p">,</span> <span class="nx">on</span><span class="p">,</span> <span class="nx">request</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">){</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;request/helloworld.json&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">handleAs</span><span class="o">:</span> <span class="s2">&quot;json&quot;</span>
    <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">){</span>
      <span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;output&quot;</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="nx">router</span><span class="p">.</span><span class="nx">startup</span><span class="p">();</span>

  <span class="nx">on</span><span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;changeHash&quot;</span><span class="p">),</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">router</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="s2">&quot;/foo/bar&quot;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/router&quot;, &quot;dojo/dom&quot;, &quot;dojo/on&quot;, &quot;dojo/request&quot;, &quot;dojo/json&quot;, &quot;dojo/domReady!&quot;],
function(router, dom, on, request, JSON){
  router.register(&quot;/foo/bar&quot;, function(evt){
    evt.preventDefault();
    request.get(&quot;request/helloworld.json&quot;, {
      handleAs: &quot;json&quot;
    }).then(function(response){
      dom.byId(&quot;output&quot;).innerHTML = JSON.stringify(response);
    });
  });

  router.startup();

  on(dom.byId(&quot;changeHash&quot;), &quot;click&quot;, function(){
    router.go(&quot;/foo/bar&quot;);
  });
});</textarea></div><div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">id=</span><span class="s">&quot;changeHash&quot;</span><span class="nt">&gt;</span>Change Hash<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;output&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button type=&quot;button&quot; id=&quot;changeHash&quot;&gt;Change Hash&lt;/button&gt;
&lt;div id=&quot;output&quot;&gt;&lt;/div&gt;</textarea></div></div></div></div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id6">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="hash.html#dojo-hash"><em>dojo/hash</em></a> - Module for managing the browsers hash.</li>
</ul>
</div>
</div>


                        </div>
                    </div>
                    <div class="sidebar unit size1of4 lastUnit">
                        <h4>Reference Guide</h4>
						<div id="dtkVersion">
							<label for="refver">Dojo Version</label>
							<select id="refver" name="refver">
								<option value="1.6">1.6</option>
								<option value="1.7">1.7</option>
								<option value="1.8" selected="selected">1.8</option>
                                <option value="1.9">1.9</option>
							</select>
						</div>
                        <ul>
                            <li><a href="../index.html">Startpage</a></li>
                            <li><a href="index.html">Dojo</a></li>
                            <li><a href="../dijit/index.html">Dijit</a></li>
                            <li><a href="../dojox/index.html">DojoX</a></li>
                        </ul>
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">dojo/router</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#register">register()</a></li>
<li><a class="reference internal" href="#registerbefore">registerBefore()</a></li>
<li><a class="reference internal" href="#startup">startup()</a></li>
<li><a class="reference internal" href="#go">go()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="robotx.html"
                        title="previous chapter">dojo/robotx</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="rpc.html"
                        title="next chapter">dojo/rpc</a></p>
    <div id="searchbox" style="display: none">
        <h3>Quick search</h3>
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
         </form>
         <p class="searchtip" style="font-size: 90%">
             Enter search terms or a module, class or function name.
         </p>
    </div>
        </div>
      </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hide" />
        <div id="foot">
            <div class="innerBox">
                <script type="text/javascript">document.write('<a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&amp;formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&amp;entry_0=' + encodeURIComponent(window.location.href) + '">Error in the documentation? Can’t find what you are looking for? Let us know!</a>');</script>
                <div class="footer">
                      &copy; Copyright 2005-2012, Dojo Foundation.
                      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
                </div>
            </div>  
        </div>
        <script src="http://www.google.com/jsapi?key=ABQIAAAAbTW5DVaTIHKHQe5Q75sB0BSaOaO_TgJ5c3mtQFnk5JO2zD5dZBSGHlRJ8HAPlCQCEO_FxSmyNAHSLw" type="text/javascript"></script>
    </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>