

<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dojo 1.x to 2.0 migration guide &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="The Dojo Toolkit - Reference Guide" href="../index.html" />
    <link rel="next" title="A11y Requirements" href="../developer/a11y-requirements.html" />
    <link rel="prev" title="Hints about Migrating from 1.x to 1.7" href="migration-17.html" />

    <link rel="stylesheet" href="../_static/css/site.css">
    <link rel="stylesheet" href="../_static/js/docs/resources/guide.css">
	<script type="text/javascript">
		dojoConfig = {
			async: true
		};
	</script>
    <script type="text/javascript" src="../_static/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="../_static/js/docs/guide.js"></script>

  </head>
  <body>  

    <div class="document">
    <div id="accessibilityNode">
        <a href="#intro">Skip to Content</a> | <a href="#nav">Skip to Navigation</a>
    </div>
    <hr class="hide">
    <div id="page" class="docPage">
        <div id="header">
            <div class="container">
                <span id="logo"><a title="Home" href="http://dojotoolkit.org">
                    <img alt="Dojo Toolkit" src="../_static/images/logo.png"></a>
                </span>
                <ul id="navigation">
                    <li class="home"><a href="/"><span class="homeIcon"></span></a></li>
                    <li class="download"><a href="/download/">Download</a></li>
                    <li class="features"><a href="/features/">Features</a></li>
                    <li class="docs active"><a href="/documentation/">Documentation</a></li>
                    <li class="community"><a href="/community/">Community</a></li>
                    <li class="about"><a href="/blog/">Blog</a></li>
                </ul>
            </div>
        </div>
    
        <hr class="hide" />
    
        <div id="main">
            <div id="content" class="innerBox">
                <div class="pageTitleContainer">
                    <h1>Documentation</h1>
                    <ul class="subnav">
                        <li><a href="/documentation/"><span>Tutorials</span></a></li>
                        <li class="active"><a href="/reference-guide/"><span>Reference Guide</span></a></li>
                        <li><a href="/api/"><span>API Documentation</span></a></li>
                    </ul>
                </div>
                <div class="line">
                    <div class="unit size3of4 firstUnit">
                        <div class="spacer">
                            
  <div class="section" id="dojo-1-x-to-2-0-migration-guide">
<span id="releasenotes-migration-2-0"></span><h1><a class="toc-backref" href="#id5">Dojo 1.x to 2.0 migration guide</a><a class="headerlink" href="#dojo-1-x-to-2-0-migration-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojo-1-x-to-2-0-migration-guide" id="id5">Dojo 1.x to 2.0 migration guide</a><ul>
<li><a class="reference internal" href="#amd" id="id6">AMD</a><ul>
<li><a class="reference internal" href="#loading-dojo-js" id="id7">Loading dojo.js</a></li>
<li><a class="reference internal" href="#loading-modules" id="id8">Loading Modules</a></li>
<li><a class="reference internal" href="#accessing-modules" id="id9">Accessing Modules</a></li>
<li><a class="reference internal" href="#defining-modules" id="id10">Defining Modules</a></li>
<li><a class="reference internal" href="#i18n" id="id11">I18N</a></li>
<li><a class="reference internal" href="#loading-text-resources-and-widget-templates" id="id12">Loading Text Resources and Widget Templates</a></li>
<li><a class="reference internal" href="#urls" id="id13">URLs</a></li>
<li><a class="reference internal" href="#quick-reference" id="id14">Quick Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dojo-core" id="id15">Dojo Core</a><ul>
<li><a class="reference internal" href="#basic-functions" id="id16">Basic functions</a></li>
<li><a class="reference internal" href="#events" id="id17">Events</a></li>
<li><a class="reference internal" href="#advice" id="id18">Advice</a></li>
<li><a class="reference internal" href="#publish-and-subscribe" id="id19">Publish and subscribe</a></li>
<li><a class="reference internal" href="#dom-manipulation" id="id20">DOM Manipulation</a></li>
<li><a class="reference internal" href="#json" id="id21">JSON</a></li>
<li><a class="reference internal" href="#parser" id="id22">Parser</a></li>
<li><a class="reference internal" href="#jsid" id="id23">jsId</a></li>
<li><a class="reference internal" href="#query" id="id24">Query</a></li>
<li><a class="reference internal" href="#stores" id="id25">Stores</a></li>
<li><a class="reference internal" href="#declaring-classes" id="id26">Declaring Classes</a></li>
<li><a class="reference internal" href="#fx" id="id27">FX</a></li>
<li><a class="reference internal" href="#promises-and-deferreds" id="id28">Promises and Deferreds</a></li>
<li><a class="reference internal" href="#xhr-and-io-requests" id="id29">XHR and IO Requests</a></li>
<li><a class="reference internal" href="#miscellaneous" id="id30">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dijit" id="id31">Dijit</a><ul>
<li><a class="reference internal" href="#mapping-table-for-dijit" id="id32">Mapping table for dijit</a></li>
<li><a class="reference internal" href="#set-get" id="id33">set(), get()</a></li>
<li><a class="reference internal" href="#watch-on" id="id34">watch(), on()</a></li>
<li><a class="reference internal" href="#templated-widgets" id="id35">Templated Widgets</a></li>
<li><a class="reference internal" href="#custom-setters" id="id36">custom setters</a></li>
<li><a class="reference internal" href="#attributemap" id="id37">attributeMap</a></li>
<li><a class="reference internal" href="#this-connect-this-subscribe-this-supportingwidgets" id="id38">this.connect(), this.subscribe(), this._supportingWidgets</a></li>
<li><a class="reference internal" href="#base-functionality" id="id39">Base Functionality</a></li>
<li><a class="reference internal" href="#editor" id="id40">Editor</a></li>
<li><a class="reference internal" href="#splitcontainer-layoutcontainer" id="id41">SplitContainer, LayoutContainer</a></li>
<li><a class="reference internal" href="#miscellaneous-changes" id="id42">Miscellaneous changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dojox" id="id43">DojoX</a></li>
</ul>
</li>
</ul>
</div>
<p>Currently, many parts of Dojo 2.0 are under development.  As with any major software that is under-development, it is
hard to predict that the final solution will look like.  These notes provide guidance though on how to try to &#8220;future
proof&#8221; your application to make it easier to transition to Dojo 2.0 when it release.</p>
<p>Since Dojo 1.X is backwards compatible with previous Dojo 1.x releases, none of these changes are necessary until Dojo
2.0, but refactoring your code earlier will not only make future porting easier, but also can deliver performance and
code maintenance benefits early.</p>
<div class="section" id="amd">
<h2><a class="toc-backref" href="#id6">AMD</a><a class="headerlink" href="#amd" title="Permalink to this headline">¶</a></h2>
<p>Dojo has been upgraded to use the Asynchronous Module Definition (AMD) standard for all of its modules.  This changes
the way you load, access, and define modules.</p>
<div class="section" id="loading-dojo-js">
<h3><a class="toc-backref" href="#id7">Loading dojo.js</a><a class="headerlink" href="#loading-dojo-js" title="Permalink to this headline">¶</a></h3>
<p>Dojo is loaded basically in the same way as before, except that in the <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> tag the <tt class="docutils literal"><span class="pre">djConfig</span></tt> attribute has
been renamed to <tt class="docutils literal"><span class="pre">data-dojo-config</span></tt>.</p>
<p>To get the 2.0-like behavior in 1.7, you should set <tt class="docutils literal"><span class="pre">async:</span> <span class="pre">true</span></tt>.</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;dojo/dojo.js&quot;</span> <span class="na">data-dojo-config=</span><span class="s">&quot;async: true&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script src=&quot;dojo/dojo.js&quot; data-dojo-config=&quot;async: true&quot;&gt;&lt;/script&gt;</textarea></div><p>If configuration options are specified outside of the <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> tag (rather than as a <tt class="docutils literal"><span class="pre">data-dojo-config</span></tt>
attribute), instead of <tt class="docutils literal"><span class="pre">djConfig</span></tt> you should set <tt class="docutils literal"><span class="pre">dojoConfig</span></tt>:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">dojoConfig</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">async</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var dojoConfig = { async: true }</textarea></div></div>
<div class="section" id="loading-modules">
<h3><a class="toc-backref" href="#id8">Loading Modules</a><a class="headerlink" href="#loading-modules" title="Permalink to this headline">¶</a></h3>
<p>The syntax for loading modules has been changed from a series of <tt class="docutils literal"><span class="pre">dojo.require()</span></tt> calls like:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.form.Button&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.layout.ContentPane&quot;</span><span class="p">);</span>
<span class="p">...</span>
<span class="c1">// CODE HERE</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.require(&quot;dijit.form.Button&quot;);
dojo.require(&quot;dojox.layout.ContentPane&quot;);
...
// CODE HERE</textarea></div><p>into a single require statement:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dijit/form/Button&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/layout/ContentPane&quot;</span><span class="p">,</span> <span class="p">...],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Button</span><span class="p">,</span> <span class="nx">ContentPane</span><span class="p">,</span> <span class="p">...){</span>
  <span class="c1">// CODE HERE</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dijit/form/Button&quot;, &quot;dojox/layout/ContentPane&quot;, ...], function(Button, ContentPane, ...){
  // CODE HERE
});</textarea></div><p>Notice how the dots (e.g. <tt class="docutils literal"><span class="pre">dijit.form.Button</span></tt>) have been changed to slashes (e.g. <tt class="docutils literal"><span class="pre">dijit/form/Button</span></tt>).  This is
dot notation represented a global scope object where as the slash notation represent a Module ID (MID).  While these
are similar in naming, there are actually wholly different concepts.</p>
<p>Also, be careful to never load a module using a <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> tag.  This will not work; it causes &#8220;multiply defined&#8221;
errors from the loader.</p>
</div>
<div class="section" id="accessing-modules">
<h3><a class="toc-backref" href="#id9">Accessing Modules</a><a class="headerlink" href="#accessing-modules" title="Permalink to this headline">¶</a></h3>
<p>Each module you load is mapped to a function parameter:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dijit/_base/Color&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/layout/ContentPane&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Color</span><span class="p">,</span> <span class="nx">ContentPane</span><span class="p">){</span>
    <span class="nx">Color</span><span class="p">.</span><span class="nx">fromRgb</span><span class="p">(...)</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dijit/_base/Color&quot;, &quot;dojox/layout/ContentPane&quot;], function(Color, ContentPane){
    Color.fromRgb(...)
});</textarea></div><p>That function parameter is the way that you access methods or the class defined in that module. You should no longer
access any functionality through global variables like <tt class="docutils literal"><span class="pre">dojo</span></tt>, <tt class="docutils literal"><span class="pre">dijit</span></tt>, or <tt class="docutils literal"><span class="pre">dojox</span></tt>.</p>
<p>One implication of this change is that every module you are (directly) using must be put into your dependency list.
That includes any functionality previously loaded by <tt class="docutils literal"><span class="pre">dojo.js</span></tt>.  The modules that formerly composed <tt class="docutils literal"><span class="pre">dojo.js</span></tt>
(modules in <tt class="docutils literal"><span class="pre">dojo/_base</span></tt>) have been replaced with smaller, more specific modules in the top level <tt class="docutils literal"><span class="pre">dojo</span></tt> directory.
<em>Note:</em> as of 1.8, some modules in <tt class="docutils literal"><span class="pre">dojo/_base</span></tt> are still being used.</p>
<p>Also, note that some method names have been shortened to avoid redundancy. For example, the previous
<tt class="docutils literal"><span class="pre">dojo.colorFromRgb()</span></tt> is now accessed as <tt class="docutils literal"><span class="pre">Color.fromRgb()</span></tt>, rather than <tt class="docutils literal"><span class="pre">Color.colorFromRgb()</span></tt>.</p>
</div>
<div class="section" id="defining-modules">
<h3><a class="toc-backref" href="#id10">Defining Modules</a><a class="headerlink" href="#defining-modules" title="Permalink to this headline">¶</a></h3>
<p>The syntax for defining a module is similar to <tt class="docutils literal"><span class="pre">require()</span></tt>.   In other words, it has been changed from:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;acme.Dialog&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit._Widget&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo.date&quot;</span><span class="p">);</span>
<span class="c1">//CODE HERE</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.provide(&quot;acme.Dialog&quot;);
dojo.require(&quot;dijit._Widget&quot;);
dojo.require(&quot;dojo.date&quot;);
//CODE HERE</textarea></div><p>into:</p>
<div class="highlight"><pre><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;dijit/_Widget&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/date&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_Widget</span><span class="p">,</span> <span class="nx">date</span><span class="p">){</span>   <span class="p">....</span>
  <span class="c1">// CODE HERE</span>
  <span class="k">return</span> <span class="nx">MyWidget</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">define([&quot;dijit/_Widget&quot;, &quot;dojo/date&quot;], function(_Widget, date){   ....
  // CODE HERE
  return MyWidget;
});</textarea></div><p>Notice that the module (a.k.a. file) itself is <em>returning</em> a value.   That is the way other modules access your
module, as explained in the section above.</p>
<p>Also, notice how the module name previously listed in the <tt class="docutils literal"><span class="pre">dojo.provide()</span></tt> call (<tt class="docutils literal"><span class="pre">acme.Dialog</span></tt> in the example
above) is not listed anymore.   The file name itself suffices.</p>
</div>
<div class="section" id="i18n">
<h3><a class="toc-backref" href="#id11">I18N</a><a class="headerlink" href="#i18n" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.requireLocalization()</span></tt> has been replaced by the <a class="reference internal" href="../dojo/i18n.html#dojo-i18n"><em>dojo/i18n!</em></a> loader plugin:</p>
<p>Old syntax:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo.i18n&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">requireLocalization</span><span class="p">(</span><span class="s2">&quot;dijit.form&quot;</span><span class="p">,</span> <span class="s2">&quot;validate&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">validate</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">i18n</span><span class="p">.</span><span class="nx">getLocalization</span><span class="p">(</span><span class="s2">&quot;dijit.form&quot;</span><span class="p">,</span> <span class="s2">&quot;validate&quot;</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">validate</span><span class="p">.</span><span class="nx">invalidMessage</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.require(&quot;dojo.i18n&quot;);
dojo.requireLocalization(&quot;dijit.form&quot;, &quot;validate&quot;);
var validate = dojo.i18n.getLocalization(&quot;dijit.form&quot;, &quot;validate&quot;);
console.log(validate.invalidMessage);</textarea></div><p>New syntax:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/i18n!dijit/form/nls/validate&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i18n</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i18n</span><span class="p">.</span><span class="nx">invalidMessage</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/i18n!dijit/form/nls/validate&quot;], function(i18n){
  console.log(i18n.invalidMessage);
});</textarea></div></div>
<div class="section" id="loading-text-resources-and-widget-templates">
<h3><a class="toc-backref" href="#id12">Loading Text Resources and Widget Templates</a><a class="headerlink" href="#loading-text-resources-and-widget-templates" title="Permalink to this headline">¶</a></h3>
<p>Use the <a class="reference internal" href="../dojo/text.html#dojo-text"><em>dojo/text!</em></a> plugin instead.</p>
<p>Old syntax:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="s2">&quot;my.module&quot;</span><span class="p">,</span> <span class="s2">&quot;template.html&quot;</span><span class="p">);</span>
<span class="c1">// ...</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var text = dojo.cache(&quot;my.module&quot;, &quot;template.html&quot;);
// ...</textarea></div><p>New syntax:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo/text!my/module/template.html&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">){</span>
  <span class="c1">//...</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require(&quot;dojo/text!my/module/template.html&quot;, function(text){
  //...
});</textarea></div></div>
<div class="section" id="urls">
<h3><a class="toc-backref" href="#id13">URLs</a><a class="headerlink" href="#urls" title="Permalink to this headline">¶</a></h3>
<p>Most of the time you use the <tt class="docutils literal"><span class="pre">dojo/text!</span></tt> plugin to load text from a specific URL, but if you need an actual URL in
your classes you should use <tt class="docutils literal"><span class="pre">require.toUrl()</span></tt>.</p>
<p>See <a class="reference internal" href="../loader/amd.html#loader-amd-utility-functions"><em>require.toUrl()</em></a> and
<em class="xref std std-ref">context sensitive require</em> for details.</p>
</div>
<div class="section" id="quick-reference">
<h3><a class="toc-backref" href="#id14">Quick Reference</a><a class="headerlink" href="#quick-reference" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="15%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.provide(&#8220;foo/bar&#8221;); dojo.require(&#8220;a/b&#8221;); ...</td>
<td>&nbsp;</td>
<td>define([&#8220;a/b&#8221;], function(b){ ... });</td>
</tr>
<tr class="row-odd"><td>dojo.require(a.b); a.b.foo();</td>
<td>&nbsp;</td>
<td>require([&#8220;a/b&#8221;], function(b){ b.foo(); }</td>
</tr>
<tr class="row-even"><td>djConfig</td>
<td>&nbsp;</td>
<td>data-dojo-config</td>
</tr>
<tr class="row-odd"><td>dojo._Url</td>
<td>&nbsp;</td>
<td>require.toUrl()</td>
</tr>
<tr class="row-even"><td>dojo.moduleUrl(&#8220;dijit&#8221;, &#8220;foo.template.html&#8221;)</td>
<td>require</td>
<td>require.toUrl(&#8220;dijit/foo/template.html&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.requireLocalization()</td>
<td>dojo/i18n!</td>
<td>see I18N section above</td>
</tr>
<tr class="row-even"><td>dojo.getLocalization()</td>
<td>dojo/i18n!</td>
<td>see I18N section above</td>
</tr>
<tr class="row-odd"><td>dojo.cache(&#8220;my.module&#8221;, &#8220;template.html&#8221;)</td>
<td>dojo/text!</td>
<td>require(&#8220;dojo/text!my/module/template.html&#8221;, function(text){ ...</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="dojo-core">
<h2><a class="toc-backref" href="#id15">Dojo Core</a><a class="headerlink" href="#dojo-core" title="Permalink to this headline">¶</a></h2>
<div class="section" id="basic-functions">
<h3><a class="toc-backref" href="#id16">Basic functions</a><a class="headerlink" href="#basic-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="testing-object-types">
<span id="releasenotes-migration-2-0-testing-object-types"></span><h4>Testing object types<a class="headerlink" href="#testing-object-types" title="Permalink to this headline">¶</a></h4>
<p>2.0 will remove the <tt class="docutils literal"><span class="pre">isXXX()</span></tt> functions defined in <tt class="docutils literal"><span class="pre">dojo/_base/lang</span></tt>.  In most cases they can be easily replaced
with simple native tests:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x</th>
<th class="head">2.0</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dojo.isString(v)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">typeof</span> <span class="pre">v</span> <span class="pre">==</span> <span class="pre">&quot;string&quot;</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dojo.isArray(v)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">v</span> <span class="pre">instanceof</span> <span class="pre">Array</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dojo.isFunction(v)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">typeof</span> <span class="pre">v</span> <span class="pre">==</span> <span class="pre">&quot;function&quot;</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">dojo.isArrayLike(v)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">&quot;length&quot;</span> <span class="pre">in</span> <span class="pre">v</span></tt>, etc. (but see note below)</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ul class="simple">
<li>On some browsers <tt class="docutils literal"><span class="pre">&quot;length&quot;</span> <span class="pre">in</span> <span class="pre">v</span></tt> will return true for strings and functions, so if you are trying to differentiate
between strings and arrays of strings, use the <tt class="docutils literal"><span class="pre">typeof</span> <span class="pre">v</span> <span class="pre">==</span> <span class="pre">&quot;string&quot;</span></tt> test instead, and if you are trying to
differentiate between functions and arrays of functions, use the <tt class="docutils literal"><span class="pre">typeof</span> <span class="pre">v</span> <span class="pre">==</span> <span class="pre">&quot;function&quot;</span></tt> test instead. It will
also return <tt class="docutils literal"><span class="pre">true</span></tt> for built-in constructors (<tt class="docutils literal"><span class="pre">Number</span></tt>, <tt class="docutils literal"><span class="pre">String</span></tt>, etc.) which have <tt class="docutils literal"><span class="pre">length</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">typeof</span> <span class="pre">value</span> <span class="pre">==</span> <span class="pre">&quot;function&quot;</span></tt> won&#8217;t match IE&#8217;s hosted functions (like <tt class="docutils literal"><span class="pre">alert</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">v</span> <span class="pre">instanceof</span> <span class="pre">Array</span></tt> won&#8217;t work if <tt class="docutils literal"><span class="pre">v</span></tt> was created in a different frame.</li>
</ul>
</div>
<div class="section" id="dojo-base-lang">
<h4>dojo/_base/lang<a class="headerlink" href="#dojo-base-lang" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.extend</td>
<td>dojo/_base/lang</td>
<td>lang.extend</td>
</tr>
<tr class="row-odd"><td>dojo._hitchArgs</td>
<td>dojo/_base/lang</td>
<td>lang._hitchArgs</td>
</tr>
<tr class="row-even"><td>dojo.hitch</td>
<td>dojo/_base/lang</td>
<td>lang.hitch</td>
</tr>
<tr class="row-odd"><td>dojo.delegate</td>
<td>dojo/_base/lang</td>
<td>lang.delegate</td>
</tr>
<tr class="row-even"><td>dojo._toArray</td>
<td>dojo/_base/lang</td>
<td>lang._toArray</td>
</tr>
<tr class="row-odd"><td>dojo.partial</td>
<td>dojo/_base/lang</td>
<td>lang.partial</td>
</tr>
<tr class="row-even"><td>dojo.clone</td>
<td>dojo/_base/lang</td>
<td>lang.clone</td>
</tr>
<tr class="row-odd"><td>dojo.trim</td>
<td>dojo/_base/lang</td>
<td>lang.trim</td>
</tr>
<tr class="row-even"><td>dojo.replace</td>
<td>dojo/_base/lang</td>
<td>lang.replace</td>
</tr>
<tr class="row-odd"><td>dojo.mixin</td>
<td>dojo/_base/lang</td>
<td>lang.mixin</td>
</tr>
<tr class="row-even"><td>dojo._mixin</td>
<td>dojo/_base/lang</td>
<td>lang._mixin</td>
</tr>
<tr class="row-odd"><td>dojo.exists</td>
<td>dojo/_base/lang</td>
<td>lang.exists</td>
</tr>
<tr class="row-even"><td>dojo.getObject</td>
<td>dojo/_base/lang</td>
<td>lang.getObject</td>
</tr>
<tr class="row-odd"><td>dojo.setObject</td>
<td>dojo/_base/lang</td>
<td>lang.setObject</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dojo-base-kernel">
<h4>dojo/_base/kernel<a class="headerlink" href="#dojo-base-kernel" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="24%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.deprecated</td>
<td>dojo/_base/kernel</td>
<td>kernel.deprecated</td>
</tr>
<tr class="row-odd"><td>dojo.experimental</td>
<td>dojo/_base/kernel</td>
<td>kernel.experimental</td>
</tr>
<tr class="row-even"><td>dojo.version</td>
<td>dojo/_base/kernel</td>
<td>kernel.version</td>
</tr>
<tr class="row-odd"><td>dojo.eval</td>
<td>dojo/json</td>
<td>native eval() or json.parse() for json</td>
</tr>
<tr class="row-even"><td>dojo.global</td>
<td>dojo/_base/kernel</td>
<td>kernel.global</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">global</span></tt> is an alias for the global scope that was designed to work both in a browser environment
(where it points to <tt class="docutils literal"><span class="pre">window</span></tt>), and a server environment.</p>
<p>With modern AMD code, hopefully globals are completely unnecessary.
If you do need to create/read a global, then the following pattern is preferred:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([...],</span> <span class="kd">function</span><span class="p">(...){</span>
     <span class="kd">var</span> <span class="nx">global</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
     <span class="p">...</span>
     <span class="nx">global</span><span class="p">.</span><span class="nx">myVariable</span> <span class="o">=</span> <span class="s2">&quot;hello world&quot;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([...], function(...){
     var global = this;
     ...
     global.myVariable = &quot;hello world&quot;;
});</textarea></div><p>For strict modules, there&#8217;s a slightly more complicated syntax:</p>
<div class="highlight"><pre><span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
<span class="nx">require</span><span class="p">([...],</span> <span class="kd">function</span><span class="p">(...){</span>
     <span class="kd">var</span> <span class="nx">global</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&quot;return this&quot;</span><span class="p">)();</span>
     <span class="p">...</span>
     <span class="nx">global</span><span class="p">.</span><span class="nx">myVariable</span> <span class="o">=</span> <span class="s2">&quot;hello world&quot;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">&quot;use strict&quot;;
require([...], function(...){
     var global = Function(&quot;return this&quot;)();
     ...
     global.myVariable = &quot;hello world&quot;;
});</textarea></div></div>
<div class="section" id="dojo-base-array">
<h4>dojo/_base/array<a class="headerlink" href="#dojo-base-array" title="Permalink to this headline">¶</a></h4>
<p><em>To be determined</em> - Dojo 2.0 may have <tt class="docutils literal"><span class="pre">dojo/array</span></tt>, or <tt class="docutils literal"><span class="pre">dojo/each</span></tt>, or just shim <tt class="docutils literal"><span class="pre">Array</span></tt> prototype on IE to
match behavior of modern browsers.</p>
<p>In 1.7 and later, use &#8220;dojo/_base/array&#8221; module to get <tt class="docutils literal"><span class="pre">forEach()</span></tt>, <tt class="docutils literal"><span class="pre">map()</span></tt>, etc:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.forEach</td>
<td>dojo/_base/array</td>
<td>array.forEach</td>
</tr>
<tr class="row-odd"><td>dojo.map</td>
<td>dojo/_base/array</td>
<td>array.map</td>
</tr>
<tr class="row-even"><td>dojo.filter</td>
<td>dojo/_base/array</td>
<td>array.filter</td>
</tr>
<tr class="row-odd"><td>dojo.every</td>
<td>dojo/_base/array</td>
<td>array.every</td>
</tr>
<tr class="row-even"><td>dojo.some</td>
<td>dojo/_base/array</td>
<td>array.some</td>
</tr>
<tr class="row-odd"><td>dojo.indexOf</td>
<td>dojo/_base/array</td>
<td>array.indexOf</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="browser-device-sniffing">
<h4>Browser/Device Sniffing<a class="headerlink" href="#browser-device-sniffing" title="Permalink to this headline">¶</a></h4>
<p>If your code uses browser sniffing, you should load <a class="reference internal" href="../dojo/sniff.html#dojo-sniff"><em>dojo/sniff</em></a> or
<a class="reference internal" href="../dojox/mobile/sniff.html#dojox-mobile-sniff"><em>dojox/mobile/sniff</em></a>.  Both these modules leverage the <a class="reference internal" href="../dojo/has.html#dojo-has"><em>dojo/has</em></a> API for
feature detection.</p>
<p>For example, old code like:</p>
<div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="nx">dojo</span><span class="p">.</span><span class="nx">isIE</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">){</span>
  <span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">if(dojo.isIE &lt; 6){
  // ...
}</textarea></div><p>should be changed to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/has&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/sniff&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">has</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">has</span><span class="p">(</span><span class="s2">&quot;ie&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">){</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/has&quot;, &quot;dojo/sniff&quot;], function(has){
  if(has(&quot;ie&quot;) &lt; 6){
    // ...
  }
});</textarea></div><p>Overview of where functionality has moved:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.isOpera</td>
<td>dojo/sniff</td>
<td>has(&#8220;opera&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isAIR</td>
<td>dojo/sniff</td>
<td>has(&#8220;air&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isKhtml</td>
<td>dojo/sniff</td>
<td>has(&#8220;khtml&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isWebKit</td>
<td>dojo/sniff</td>
<td>has(&#8220;webkit&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isChrome</td>
<td>dojo/sniff</td>
<td>has(&#8220;chrome&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isMac</td>
<td>dojo/sniff</td>
<td>has(&#8220;mac&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isSafari</td>
<td>dojo/sniff</td>
<td>has(&#8220;safari&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isMozilla</td>
<td>dojo/sniff</td>
<td>has(&#8220;mozilla&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isMoz</td>
<td>dojo/sniff</td>
<td>has(&#8220;mozilla&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isIE</td>
<td>dojo/sniff</td>
<td>has(&#8220;ie&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isFF</td>
<td>dojo/sniff</td>
<td>has(&#8220;ff&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isAndroid</td>
<td>dojo/sniff</td>
<td>has(&#8220;android&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isBB</td>
<td>dojox/mobile/sniff</td>
<td>has(&#8220;bb&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isIpad</td>
<td>dojox/mobile/sniff</td>
<td>has(&#8220;ipad&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isIphone</td>
<td>dojox/mobile/sniff</td>
<td>has(&#8220;iphone&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isIpod</td>
<td>dojox/mobile/sniff</td>
<td>has(&#8220;ipod&#8221;)</td>
</tr>
<tr class="row-even"><td>dojo.isQuirks</td>
<td>dojo/sniff</td>
<td>has(&#8220;quirks&#8221;)</td>
</tr>
<tr class="row-odd"><td>dojo.isIos</td>
<td>dojo/sniff</td>
<td>has(&#8220;ios&#8221;)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="load-and-unload-handlers">
<h4>Load and Unload Handlers<a class="headerlink" href="#load-and-unload-handlers" title="Permalink to this headline">¶</a></h4>
<p>Loading and unloading have been moved to <tt class="docutils literal"><span class="pre">dojo/ready</span></tt> and <tt class="docutils literal"><span class="pre">dojo/_base/unload</span></tt>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.addOnLoad(f)</td>
<td>dojo/ready</td>
<td>ready(f)</td>
</tr>
<tr class="row-odd"><td>dojo.ready(f)</td>
<td>dojo/ready</td>
<td>ready(f)</td>
</tr>
<tr class="row-even"><td>dojo.addOnUnload</td>
<td>dojo/_base/unload</td>
<td>unload.addOnUnload</td>
</tr>
<tr class="row-odd"><td>dojo.addOnWindowUnload</td>
<td>dojo/_base/unload</td>
<td>unload.addOnWindowUnload</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="events">
<h3><a class="toc-backref" href="#id17">Events</a><a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.connect()</span></tt> / <tt class="docutils literal"><span class="pre">dojo.disconnect()</span></tt> for monitoring DOMNode events have been replaced by the <tt class="docutils literal"><span class="pre">on()</span></tt> method
returned from the <a class="reference internal" href="../dojo/on.html#dojo-on"><em>dojo/on</em></a> module.  (For <tt class="docutils literal"><span class="pre">dojo.connect()</span></tt> usage as advice on plain JavaScript
functions/methods, see the <a class="reference internal" href="#advice">Advice</a> section below)</p>
<p>Old code like:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var handle = dojo.connect(node, &quot;onclick&quot;, callback);
// ...
dojo.disconnect(handle);</textarea></div><p>should be converted to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/on&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">on</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">on</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
  <span class="c1">// ...</span>
  <span class="nx">handle</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/on&quot;], function(on){
  var handle = on(node, &quot;click&quot;, callback);
  // ...
  handle.remove();
});</textarea></div><p>Note that:</p>
<ul class="simple">
<li>the <tt class="docutils literal"><span class="pre">on</span></tt> prefix was dropped, and <tt class="docutils literal"><span class="pre">onclick</span></tt> became <tt class="docutils literal"><span class="pre">click</span></tt></li>
<li>the &#8220;handle&#8221; has a remove() method, rather than there being a function like dojo.disconnect()</li>
</ul>
<p>The NodeList objects returned from <tt class="docutils literal"><span class="pre">dojo/query</span></tt> also works with an <tt class="docutils literal"><span class="pre">.on()</span></tt> method rather than a <tt class="docutils literal"><span class="pre">.connect()</span></tt>
method.</p>
<p>Old code like:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.query(&quot;li&quot;).connect(&quot;onclick&quot;, callback);</textarea></div><p>should be converted to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/query&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">){</span>
  <span class="nx">query</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/query&quot;], function(query){
  query(&quot;li&quot;).on(&quot;click&quot;, callback);
});</textarea></div><div class="section" id="mouseenter-mouseleave">
<h4>mouseenter/mouseleave<a class="headerlink" href="#mouseenter-mouseleave" title="Permalink to this headline">¶</a></h4>
<p>Dojo supports <tt class="docutils literal"><span class="pre">onmouseenter</span></tt>/<tt class="docutils literal"><span class="pre">onmouseleave</span></tt> synthetically for browsers that do not support those events natively.
In 1.x these events were specified as strings, just like native events:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;onmouseenter&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.connect(node, &quot;onmouseenter&quot;, callback);</textarea></div><p>Now they are specified by event objects defined in <tt class="docutils literal"><span class="pre">dojo/mouse</span></tt>, which must be explicitly loaded, and used like this:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/mouse&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">on</span><span class="p">,</span> <span class="nx">mouse</span><span class="p">){</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">mouse</span><span class="p">.</span><span class="nx">enter</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/on&quot;, &quot;dojo/mouse&quot;], function(on, mouse){
  on(node, mouse.enter, callback);
});</textarea></div><p>Similarly, <tt class="docutils literal"><span class="pre">&quot;onmouseleave&quot;</span></tt> has become <tt class="docutils literal"><span class="pre">mouse.leave</span></tt>.</p>
</div>
<div class="section" id="mouse-buttons">
<h4>Mouse Buttons<a class="headerlink" href="#mouse-buttons" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">dojo.mouseButtons</span></tt> has been replaced by the <tt class="docutils literal"><span class="pre">dojo/mouse</span></tt> module, which must be explicitly loaded.</p>
<p>Code like:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;onmousedown&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">dojo</span><span class="p">.</span><span class="nx">mouseButtons</span><span class="p">.</span><span class="nx">isLeft</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.connect(node, &quot;onmousedown&quot;, function(evt){
  if(dojo.mouseButtons.isLeft(evt){ ... }
});</textarea></div><p>should be converted to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/mouse&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">on</span><span class="p">,</span> <span class="nx">mouse</span><span class="p">){</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;mousedown&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">mouse</span><span class="p">.</span><span class="nx">isLeft</span><span class="p">(</span><span class="nx">evt</span><span class="p">)){</span> <span class="p">...</span> <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/on&quot;, &quot;dojo/mouse&quot;], function(on, mouse){
  on(node, &quot;mousedown&quot;, function(evt){
    if(mouse.isLeft(evt)){ ... }
  });
});</textarea></div></div>
<div class="section" id="keys">
<h4>Keys<a class="headerlink" href="#keys" title="Permalink to this headline">¶</a></h4>
<p>The symbolic names for keys have been put into the <a class="reference internal" href="../dojo/keys.html#dojo-keys"><em>dojo/keys</em></a> module, which must be explicitly
loaded and can be accessed like this:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/keys&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">on</span><span class="p">,</span> <span class="nx">keys</span><span class="p">){</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">F10</span><span class="p">){</span> <span class="p">...</span> <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/on&quot;, &quot;dojo/keys&quot;], function(on, keys){
  on(node, &quot;keydown&quot;, function(evt){
    if(evt.keyCode == keys.F10){ ... }
  });
});</textarea></div></div>
<div class="section" id="onkeypress">
<h4>onkeypress<a class="headerlink" href="#onkeypress" title="Permalink to this headline">¶</a></h4>
<p>The Dojo <tt class="docutils literal"><span class="pre">onkeypress</span></tt> normalization to Firefox behavior has been desupported.  For portable applications, you must
use <tt class="docutils literal"><span class="pre">keypress</span></tt> for monitoring printable characters (e.g. A-Z, 1-9):</p>
<div class="highlight"><pre><span class="nx">on</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;keypress&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">&lt;=</span> <span class="mi">32</span><span class="p">){</span>
    <span class="c1">// Avoid duplicate events on firefox (this is an arrow key etc. that will be handled by keydown handler)</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="kr">char</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">charCode</span><span class="p">);</span>
  <span class="c1">// ...</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">on(node, &quot;keypress&quot;, function(evt){
  if(evt.charCode &lt;= 32){
    // Avoid duplicate events on firefox (this is an arrow key etc. that will be handled by keydown handler)
    return;
  }
  var char = String.fromCharCode(evt.charCode);
  // ...
});</textarea></div><p>and keydown for non-printable characters (e.g. arrow keys):</p>
<div class="highlight"><pre><span class="nx">on</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">evt</span><span class="p">){</span>
  <span class="k">switch</span><span class="p">(</span><span class="nx">evt</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">){</span>
   <span class="k">case</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">UP_ARROW</span><span class="o">:</span>
      <span class="c1">// ...</span>
      <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">on(node, &quot;keydown&quot;, function(evt){
  switch(evt.keyCode){
   case keys.UP_ARROW:
      // ...
      break;
  }
});</textarea></div><p>Note that the normalization of <tt class="docutils literal"><span class="pre">evt.charOrCode</span></tt> is also gone, so use <tt class="docutils literal"><span class="pre">evt.charCode</span></tt> for keypress events, or
<tt class="docutils literal"><span class="pre">evt.keyCode</span></tt> for keydown events.</p>
</div>
<div class="section" id="event-delegation">
<h4>Event Delegation<a class="headerlink" href="#event-delegation" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">dojo.behavior</span></tt> and <tt class="docutils literal"><span class="pre">dojox.NodeList.delegate</span></tt> modules have been replaced by functionality built-in to
<tt class="docutils literal"><span class="pre">dojo/on</span></tt>.</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">myBehavior</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">&quot;#mylist li:click&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">onclick</span><span class="o">:</span> <span class="nx">onListItemClickHandler</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">behavior</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">myBehavior</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">behavior</span><span class="p">.</span><span class="nx">apply</span><span class="p">();</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var myBehavior = {
  &quot;#mylist li:click&quot; : {
    onclick: onListItemClickHandler
  }
};
dojo.behavior.add(myBehavior);
dojo.behavior.apply();</textarea></div><p>New code:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/query&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/_base/window&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">on</span><span class="p">,</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">win</span><span class="p">){</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nx">doc</span><span class="p">(),</span> <span class="s2">&quot;#mylist li:click&quot;</span><span class="p">,</span> <span class="nx">onListItemClickHandler</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/on&quot;, &quot;dojo/query&quot;, &quot;dojo/_base/window&quot;], function(on, query, win){
  on(win.doc(), &quot;#mylist li:click&quot;, onListItemClickHandler);
});</textarea></div></div>
<div class="section" id="connectpublisher">
<h4>connectPublisher()<a class="headerlink" href="#connectpublisher" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">dojo.connectPublisher()</span></tt> was an automation of this common form:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">myObject</span><span class="p">,</span> <span class="s2">&quot;myEvent&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">dojo</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s2">&quot;/some/topic/name&quot;</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.connect(myObject, &quot;myEvent&quot;, function(){
  dojo.publish(&quot;/some/topic/name&quot;, arguments);
});</textarea></div><p>Which became:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">connectPublisher</span><span class="p">(</span><span class="s2">&quot;/some/topic/name&quot;</span><span class="p">,</span> <span class="nx">myObject</span><span class="p">,</span> <span class="s2">&quot;myEvent&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.connectPublisher(&quot;/some/topic/name&quot;, myObject, &quot;myEvent&quot;);</textarea></div><p>But in 2.0 users should use the following for connecting to DOM events:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/on&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/topic&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">on</span><span class="p">,</span> <span class="nx">topic</span><span class="p">){</span>
  <span class="nx">on</span><span class="p">(</span><span class="nx">myNode</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">topic</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s2">&quot;/some/topic/name&quot;</span><span class="p">,</span> <span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">arg3</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/on&quot;, &quot;dojo/topic&quot;], function(on, topic){
  on(myNode, &quot;click&quot;, function(){
    topic.publish(&quot;/some/topic/name&quot;, arg1, arg2, arg3);
  });
});</textarea></div><p>Or this for after-advice on arbitrary methods of arbitrary objects:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/aspect&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/topic&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">aspect</span><span class="p">,</span> <span class="nx">topic</span><span class="p">){</span>
  <span class="nx">aspect</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">myObj</span><span class="p">,</span> <span class="s2">&quot;myFunc&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">topic</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s2">&quot;/some/topic/name&quot;</span><span class="p">,</span> <span class="nx">arg1</span><span class="p">,</span> <span class="nx">arg2</span><span class="p">,</span> <span class="nx">arg3</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/aspect&quot;, &quot;dojo/topic&quot;], function(aspect, topic){
  aspect.after(myObj, &quot;myFunc&quot;, function(){
    topic.publish(&quot;/some/topic/name&quot;, arg1, arg2, arg3);
  });
});</textarea></div></div>
<div class="section" id="id1">
<h4>Quick Reference<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="16%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.connect(node,&#8221;onclick&#8221;,cb)</td>
<td>dojo/on</td>
<td>on(node,&#8221;click&#8221;,cb)   (note that &#8220;on&#8221; prefix removed)</td>
</tr>
<tr class="row-odd"><td>dojo.connect(node,&#8221;onmouseenter&#8221;,cb)</td>
<td>dojo/on,dojo/mouse</td>
<td>on(node,mouse.enter,cb)</td>
</tr>
<tr class="row-even"><td>dojo.connect(node,&#8221;onmouseleave&#8221;,cb)</td>
<td>dojo/on,dojo/mouse</td>
<td>on(node,mouse.leave,cb)</td>
</tr>
<tr class="row-odd"><td>dojo.connect(node,&#8221;onkeypress&#8221;,cb)</td>
<td>dojo/on</td>
<td>on(node,&#8221;keypress&#8221;,cb) for printable or on(node,&#8221;keydown&#8221;,cb) for arrows etc.</td>
</tr>
<tr class="row-even"><td>dojo.disconnect(handle)</td>
<td>&nbsp;</td>
<td>handle.remove()</td>
</tr>
<tr class="row-odd"><td>dojo.connectPublisher</td>
<td>&nbsp;</td>
<td>see above</td>
</tr>
<tr class="row-even"><td>dojo.fixEvent</td>
<td>dojo/_base/event</td>
<td>event.fix</td>
</tr>
<tr class="row-odd"><td>dojo.stopEvent</td>
<td>dojo/_base/event</td>
<td>event.stop</td>
</tr>
<tr class="row-even"><td>dojo.mouseButtons.is***()</td>
<td>dojo/mouse</td>
<td>mouse.is***()</td>
</tr>
<tr class="row-odd"><td>dojo.isCopyKey</td>
<td>?</td>
<td>?</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="advice">
<h3><a class="toc-backref" href="#id18">Advice</a><a class="headerlink" href="#advice" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.connect()</span></tt> could be used to perform after advice (based on the concepts of Aspect Oriented Programming) on a
method.  In 2.0 that has been replaced by the <tt class="docutils literal"><span class="pre">dojo/aspect</span></tt> package.</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">myInstance</span><span class="p">,</span> <span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var handle = dojo.connect(myInstance, &quot;execute&quot;, callback);
// ...
dojo.disconnect(handle);</textarea></div><p>is changed to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/aspect&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">aspect</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">aspect</span><span class="p">.</span><span class="nx">after</span><span class="p">(</span><span class="nx">myInstance</span><span class="p">,</span> <span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="err">/  ...</span>
  <span class="nx">handle</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/aspect&quot;], function(aspect){
  var handle = aspect.after(myInstance, &quot;execute&quot;, callback, true);
  /  ...
  handle.remove();
});</textarea></div><p>Note that <tt class="docutils literal"><span class="pre">callback()</span></tt> should not return a value, because if it did the returned value would be reported as the
value that <tt class="docutils literal"><span class="pre">myInstance.execute()</span></tt> appeared to return, which is not what <tt class="docutils literal"><span class="pre">dojo.connect()</span></tt> did.</p>
<div class="section" id="id2">
<h4>Quick Reference<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.connect(obj,method,cb)</td>
<td>dojo/aspect</td>
<td>aspect.after(obj,method,cb,true)</td>
</tr>
<tr class="row-odd"><td>dojo.disconnect(handle)</td>
<td>&nbsp;</td>
<td>handle.remove();</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="publish-and-subscribe">
<h3><a class="toc-backref" href="#id19">Publish and subscribe</a><a class="headerlink" href="#publish-and-subscribe" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.publish()</span></tt>/<tt class="docutils literal"><span class="pre">dojo.subscribe()</span></tt>/<tt class="docutils literal"><span class="pre">dojo.unsubscribe()</span></tt> have been replaced by the <tt class="docutils literal"><span class="pre">dojo/topic</span></tt> module.</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s2">&quot;some/topic&quot;</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var handle = dojo.subscribe(&quot;some/topic&quot;, context, callback);
// ...
dojo.unsubscribe(handle);</textarea></div><p>is changed to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/topic&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">topic</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">topic</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s2">&quot;some/topic&quot;</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span>
  <span class="c1">// ...</span>
  <span class="nx">handle</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/topic&quot;], function(topic){
  var handle = topic.subscribe(&quot;some/topic&quot;, listener)
  // ...
  handle.remove();
});</textarea></div><p>And publishing code is changed from:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s2">&quot;some/topic&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.publish(&quot;some/topic&quot;, [1, 2, 3]);</textarea></div><p>to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/topic&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">topic</span><span class="p">){</span>
  <span class="nx">topic</span><span class="p">.</span><span class="nx">publish</span><span class="p">(</span><span class="s2">&quot;some/topic&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/topic&quot;], function(topic){
  topic.publish(&quot;some/topic&quot;, 1, 2, 3);
});</textarea></div><p>Note that no array brackets are used anymore.</p>
<div class="section" id="id3">
<h4>Quick Reference<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.publish(&#8220;/foo&#8221;, [1,2,3])</td>
<td>dojo/topic</td>
<td>topic.publish(&#8220;/foo&#8221;, 1, 2, 3)</td>
</tr>
<tr class="row-odd"><td>dojo.subscribe(&#8220;/foo&#8221;, callback)</td>
<td>dojo/topic</td>
<td>topic.subscribe(&#8220;/foo&#8221;, callback)</td>
</tr>
<tr class="row-even"><td>dojo.unsubscribe(handle)</td>
<td>&nbsp;</td>
<td>handle.remove()</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="dom-manipulation">
<h3><a class="toc-backref" href="#id20">DOM Manipulation</a><a class="headerlink" href="#dom-manipulation" title="Permalink to this headline">¶</a></h3>
<p>The Dojo DOM related functions previously available as part of <tt class="docutils literal"><span class="pre">dojo/dojo.js</span></tt> are now in a number of modules which
must each be explicitly loaded.  These modules are:</p>
<ul class="simple">
<li><a class="reference internal" href="../dojo/dom.html#dojo-dom"><em>dojo/dom</em></a>: general functions</li>
<li><a class="reference internal" href="../dojo/dom-attr.html#dojo-dom-attr"><em>dojo/dom-attr</em></a>: setting node attributes</li>
<li><a class="reference internal" href="../dojo/dom-class.html#dojo-dom-class"><em>dojo/dom-class</em></a>: adding and removing classes</li>
<li><a class="reference internal" href="../dojo/dom-construct.html#dojo-dom-construct"><em>dojo/dom-construct</em></a>: creating and destroying nodes</li>
<li><a class="reference internal" href="../dojo/dom-form.html#dojo-dom-form"><em>dojo/dom-form</em></a>: form related</li>
<li><a class="reference internal" href="../dojo/io-query.html#dojo-io-query"><em>dojo/io-query</em></a>: query conversion functions</li>
<li><a class="reference internal" href="../dojo/dom-geometry.html#dojo-dom-geometry"><em>dojo/dom-geometry</em></a>: node sizing</li>
<li><a class="reference internal" href="../dojo/dom-prop.html#dojo-dom-prop"><em>dojo/dom-prop</em></a>: setting node properties</li>
<li><a class="reference internal" href="../dojo/dom-style.html#dojo-dom-style"><em>dojo/dom-style</em></a>: setting/getting style for a node</li>
</ul>
<p>Note in particular that node attribute setting and property setting has been split up. <tt class="docutils literal"><span class="pre">dojo/dom-attr</span></tt> will
eventually be deprecated in lieu of <tt class="docutils literal"><span class="pre">dojo/dom-prop</span></tt>.</p>
<p>Note also that combination accessor functions like <tt class="docutils literal"><span class="pre">dojo.marginBox()</span></tt>, <tt class="docutils literal"><span class="pre">dojo.contentBox()</span></tt>, and <tt class="docutils literal"><span class="pre">dojo.style()</span></tt>
have been split into separate setter and getter methods.</p>
<div class="section" id="id4">
<h4>Quick Reference<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.byId</td>
<td>dojo/dom</td>
<td>dom.byId</td>
</tr>
<tr class="row-odd"><td>dojo.isDescendant</td>
<td>dojo/dom</td>
<td>dom.isDescendant</td>
</tr>
<tr class="row-even"><td>dojo.setSelectable</td>
<td>dojo/dom</td>
<td>dom.setSelectable</td>
</tr>
<tr class="row-odd"><td>dojo.attr(node, attr)</td>
<td>dojo/dom-attr</td>
<td>attr.get(node, attr)</td>
</tr>
<tr class="row-even"><td>dojo.attr(node, attr, val)</td>
<td>dojo/dom-attr</td>
<td>attr.set(node, attr, val)</td>
</tr>
<tr class="row-odd"><td>dojo.hasAttr</td>
<td>dojo/dom-attr</td>
<td>attr.has</td>
</tr>
<tr class="row-even"><td>dojo.removeAttr</td>
<td>dojo/dom-attr</td>
<td>attr.remove</td>
</tr>
<tr class="row-odd"><td>dojo.addClass</td>
<td>dojo/dom-class</td>
<td>domClass.add</td>
</tr>
<tr class="row-even"><td>dojo.hasClass</td>
<td>dojo/dom-class</td>
<td>domClass.contains</td>
</tr>
<tr class="row-odd"><td>dojo.removeClass</td>
<td>dojo/dom-class</td>
<td>domClass.remove</td>
</tr>
<tr class="row-even"><td>dojo.replaceClass</td>
<td>dojo/dom-class</td>
<td>domClass.replace</td>
</tr>
<tr class="row-odd"><td>dojo.toggleClass</td>
<td>dojo/dom-class</td>
<td>domClass.toggle</td>
</tr>
<tr class="row-even"><td>dojo.toDom</td>
<td>dojo/dom-construct</td>
<td>construct.toDom</td>
</tr>
<tr class="row-odd"><td>dojo.place</td>
<td>dojo/dom-construct</td>
<td>construct.place</td>
</tr>
<tr class="row-even"><td>dojo.create</td>
<td>dojo/dom-construct</td>
<td>construct.create</td>
</tr>
<tr class="row-odd"><td>dojo.empty</td>
<td>dojo/dom-construct</td>
<td>construct.empty</td>
</tr>
<tr class="row-even"><td>dojo.destroy</td>
<td>dojo/dom-construct</td>
<td>construct.destroy</td>
</tr>
<tr class="row-odd"><td>dojo.fieldToObject</td>
<td>dojo/dom-form</td>
<td>form.fieldToObject</td>
</tr>
<tr class="row-even"><td>dojo.formToObject</td>
<td>dojo/dom-form</td>
<td>form.toObject</td>
</tr>
<tr class="row-odd"><td>dojo.formToQuery</td>
<td>dojo/dom-form</td>
<td>form.toQuery</td>
</tr>
<tr class="row-even"><td>dojo.formToJson</td>
<td>dojo/dom-form</td>
<td>form.toJson</td>
</tr>
<tr class="row-odd"><td>dojo._getPadExtents</td>
<td>dojo/dom-geometry</td>
<td>geometry.getPadExtents</td>
</tr>
<tr class="row-even"><td>dojo._getBorderExtents</td>
<td>dojo/dom-geometry</td>
<td>geometry.getBorderExtents</td>
</tr>
<tr class="row-odd"><td>dojo._getPadBorderExtents</td>
<td>dojo/dom-geometry</td>
<td>geometry.getPadBorderExtents</td>
</tr>
<tr class="row-even"><td>dojo._getMarginExtents</td>
<td>dojo/dom-geometry</td>
<td>geometry.getMarginExtents</td>
</tr>
<tr class="row-odd"><td>dojo._getMarginSize</td>
<td>dojo/dom-geometry</td>
<td>geometry.getMarginSize</td>
</tr>
<tr class="row-even"><td>dojo._getMarginBox</td>
<td>dojo/dom-geometry</td>
<td>geometry.getMarginBox</td>
</tr>
<tr class="row-odd"><td>dojo._setMarginBox</td>
<td>dojo/dom-geometry</td>
<td>geometry.setMarginBox</td>
</tr>
<tr class="row-even"><td>dojo.marginBox(node)</td>
<td>dojo/dom-geometry</td>
<td>geometry.getMarginBox(node)</td>
</tr>
<tr class="row-odd"><td>dojo.marginBox(node,size)</td>
<td>dojo/dom-geometry</td>
<td>geometry.setMarginBox(node,size)</td>
</tr>
<tr class="row-even"><td>dojo._getContentBox</td>
<td>dojo/dom-geometry</td>
<td>geometry.getContentBox</td>
</tr>
<tr class="row-odd"><td>dojo.setContentSize</td>
<td>dojo/dom-geometry</td>
<td>geometry.setContentSize</td>
</tr>
<tr class="row-even"><td>dojo.contentBox(node)</td>
<td>dojo/dom-geometry</td>
<td>geometry.getContentBox(node)</td>
</tr>
<tr class="row-odd"><td>dojo.contentBox(node,size)</td>
<td>dojo/dom-geometry</td>
<td>geometry.setContentSize(node,size)</td>
</tr>
<tr class="row-even"><td>dojo.position</td>
<td>dojo/dom-geometry</td>
<td>geometry.position</td>
</tr>
<tr class="row-odd"><td>dojo._isBodyLtr</td>
<td>dojo/dom-geometry</td>
<td>geometry.isBodyLtr</td>
</tr>
<tr class="row-even"><td>dojo._docScroll</td>
<td>dojo/dom-geometry</td>
<td>geometry.docScroll</td>
</tr>
<tr class="row-odd"><td>dojo._getIeDocumentElementOffset</td>
<td>dojo/dom-geometry</td>
<td>geometry.getIeDocumentElementOffset</td>
</tr>
<tr class="row-even"><td>dojo._fixIeBiDiScrollLeft</td>
<td>dojo/dom-geometry</td>
<td>geometry.fixIeBiDiScrollLeft</td>
</tr>
<tr class="row-odd"><td>dojo.style(node, attr)</td>
<td>dojo/dom-style</td>
<td>style.get(node, attr)</td>
</tr>
<tr class="row-even"><td>dojo.style(node, attr, val)</td>
<td>dojo/dom-style</td>
<td>style.set(node, attr, val)</td>
</tr>
<tr class="row-odd"><td>dojo.style(node, hash)</td>
<td>dojo/dom-style</td>
<td>style.set(node, hash)</td>
</tr>
<tr class="row-even"><td>dojo.getComputedStyle</td>
<td>dojo/dom-style</td>
<td>style.getComputedStyle</td>
</tr>
<tr class="row-odd"><td>dojo._toPixelValue</td>
<td>dojo/dom-style</td>
<td>style.toPixelValue</td>
</tr>
<tr class="row-even"><td>dojo.queryToObject</td>
<td>dojo/io-query</td>
<td>ioQuery.queryToObject</td>
</tr>
<tr class="row-odd"><td>dojo.objectToQuery</td>
<td>dojo/io-query</td>
<td>ioQuery.objectToQuery</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="dojo-base-window">
<h4>dojo/_base/window<a class="headerlink" href="#dojo-base-window" title="Permalink to this headline">¶</a></h4>
<p><strong>dojo/_base/window</strong> was originally written to serve two main purposes:</p>
<blockquote>
<div><ul class="simple">
<li>Provide methods/variables to access the current document and the <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> element of the current document.</li>
<li>Provide functions to switch the &#8220;current document&#8221;, i.e. the document accessed by the methods/variables
mentioned above, and indirectly by DOM methods where the document isn&#8217;t implied by the arguments, for example
<tt class="docutils literal"><span class="pre">dojo.byId(&quot;xyz&quot;)</span></tt>.</li>
</ul>
</div></blockquote>
<p>In modern code, you can usually forgo use of this module, and instead just:</p>
<blockquote>
<div><ul class="simple">
<li>Use the <tt class="docutils literal"><span class="pre">window</span></tt>, <tt class="docutils literal"><span class="pre">document</span></tt>, and <tt class="docutils literal"><span class="pre">document.body</span></tt> global variables, or equivalent variables
for the frame that you want to operate on.</li>
<li>If you need to operate on a different frame/document, all of the modern dojo DOM related methods either take a document
parameter or a DOMNode parameter (which implies a document).   For example:</li>
</ul>
</div></blockquote>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/dom&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom-geometry&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dom</span><span class="p">,</span> <span class="nx">domGeom</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="nx">myDocument</span><span class="p">);</span>
    <span class="nx">domGeom</span><span class="p">.</span><span class="nx">setMarginBox</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="p">...);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/dom&quot;, &quot;dojo/dom-geometry&quot;], function(dom, domGeom){
    var node = dom.byId(&quot;address&quot;, myDocument);
    domGeom.setMarginBox(node, ...);
});</textarea></div><p>In V1.9 (and earlier) the old methods are still accessible through AMD via:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.global</td>
<td>dojo/_base/window</td>
<td>window.global</td>
</tr>
<tr class="row-odd"><td>dojo.doc</td>
<td>dojo/_base/window</td>
<td>window.doc</td>
</tr>
<tr class="row-even"><td>dojo.body</td>
<td>dojo/_base/window</td>
<td>window.body</td>
</tr>
<tr class="row-odd"><td>dojo.setContext</td>
<td>dojo/_base/window</td>
<td>window.setContext</td>
</tr>
<tr class="row-even"><td>dojo.withGlobal</td>
<td>dojo/_base/window</td>
<td>window.withGlobal</td>
</tr>
<tr class="row-odd"><td>dojo.withDoc</td>
<td>dojo/_base/window</td>
<td>window.withDoc</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="json">
<h3><a class="toc-backref" href="#id21">JSON</a><a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h3>
<p>The JSON methods are available from the <a class="reference internal" href="../dojo/json.html#dojo-json"><em>dojo/json</em></a> package, which must be loaded explicitly.</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.fromJson</td>
<td>dojo/json</td>
<td>json.parse</td>
</tr>
<tr class="row-odd"><td>dojo.toJson</td>
<td>dojo/json</td>
<td>json.stringify</td>
</tr>
</tbody>
</table>
<p>Note that the new methods only accept true JSON, not arbitrary JavaScript.  Even the keys in a hash must be quoted</p>
<p>Valid:</p>
<div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">{ &quot;foo&quot;: 1, &quot;bar&quot;: 2 }</textarea></div><p>Invalid:</p>
<div class="highlight"><pre><span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">bar</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">{ foo: 1, bar: 2 }</textarea></div><p>Also, single quotes are invalid, you must use double quotes for keys and string values.</p>
</div>
<div class="section" id="parser">
<h3><a class="toc-backref" href="#id22">Parser</a><a class="headerlink" href="#parser" title="Permalink to this headline">¶</a></h3>
<div class="section" id="running-the-parser">
<h4>Running the Parser<a class="headerlink" href="#running-the-parser" title="Permalink to this headline">¶</a></h4>
<p>The parser is in the <a class="reference internal" href="../dojo/parser.html#dojo-parser"><em>dojo/parser</em></a> module, invoked like:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/parser&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parser</span><span class="p">){</span>
  <span class="nx">parser</span><span class="p">.</span><span class="nx">parse</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/parser&quot;], function(parser){
  parser.parse();
});</textarea></div><p>Even if you are parsing declaratively via the <tt class="docutils literal"><span class="pre">parseOnLoad:</span> <span class="pre">true</span></tt> <tt class="docutils literal"><span class="pre">dojoConfig</span></tt> setting, you need to explicitly
require the parser.</p>
</div>
<div class="section" id="data-dojo-type-and-data-dojo-props">
<h4>data-dojo-type and data-dojo-props<a class="headerlink" href="#data-dojo-type-and-data-dojo-props" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">dojoType</span></tt> has been renamed to <tt class="docutils literal"><span class="pre">data-dojo-type</span></tt>, and a new <tt class="docutils literal"><span class="pre">data-dojo-props</span></tt> parameter has been created to
specify non-native attributes in a way that doesn&#8217;t violate HTML5 validation.</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">dojoType=</span><span class="s">&quot;dijit.form.Button&quot;</span> <span class="na">tabIndex=</span><span class="s">2</span>
    <span class="na">iconClass=</span><span class="s">&quot;checkmark&quot;</span><span class="nt">&gt;</span>OK<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button dojoType=&quot;dijit.form.Button&quot; tabIndex=2
    iconClass=&quot;checkmark&quot;&gt;OK&lt;/button&gt;</textarea></div><p>New code:</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit/form/Button&quot;</span> <span class="na">tabIndex=</span><span class="s">2</span>
    <span class="na">data-dojo-props=</span><span class="s">&quot;iconClass: &#39;checkmark&#39;&quot;</span><span class="nt">&gt;</span>OK<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button data-dojo-type=&quot;dijit/form/Button&quot; tabIndex=2
    data-dojo-props=&quot;iconClass: 'checkmark'&quot;&gt;OK&lt;/button&gt;</textarea></div><p><tt class="docutils literal"><span class="pre">data-dojo-props</span></tt> is a hash that contains name value pairs, for example: <tt class="docutils literal"><span class="pre">data-dojo-props=&quot;</span> <span class="pre">name:</span> <span class="pre">'hi',</span> <span class="pre">size:</span> <span class="pre">123&quot;</span></tt>
.</p>
</div>
<div class="section" id="using-mids">
<h4>Using MIDs<a class="headerlink" href="#using-mids" title="Permalink to this headline">¶</a></h4>
<p>Starting in 1.8, referring to classes by their module ID (MID) is the preferred way.</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit.form.Button&quot;</span> <span class="na">tabIndex=</span><span class="s">2</span>
  <span class="na">data-dojo-props=</span><span class="s">&quot;iconClass: &#39;checkmark&#39;&quot;</span><span class="nt">&gt;</span>OK<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button data-dojo-type=&quot;dijit.form.Button&quot; tabIndex=2
  data-dojo-props=&quot;iconClass: 'checkmark'&quot;&gt;OK&lt;/button&gt;</textarea></div><p>New code:</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit/form/Button&quot;</span> <span class="na">tabIndex=</span><span class="s">2</span>
  <span class="na">data-dojo-props=</span><span class="s">&quot;iconClass: &#39;checkmark&#39;&quot;</span><span class="nt">&gt;</span>OK<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button data-dojo-type=&quot;dijit/form/Button&quot; tabIndex=2
  data-dojo-props=&quot;iconClass: 'checkmark'&quot;&gt;OK&lt;/button&gt;</textarea></div><p>The MID should match the <tt class="docutils literal"><span class="pre">require([...])</span></tt> used to require it in and the <tt class="docutils literal"><span class="pre">require([...])</span></tt> should occur before the
parser is invoked, but the <tt class="docutils literal"><span class="pre">parse()</span></tt> doesn&#8217;t have to specifically occur within the closure of the <tt class="docutils literal"><span class="pre">require([...])</span></tt>.
If the module is not loaded before the invocation of the <tt class="docutils literal"><span class="pre">parse()</span></tt>, the <tt class="docutils literal"><span class="pre">dojo/parser</span></tt> will attempt to auto-load
the module, if the value of <tt class="docutils literal"><span class="pre">data-dojo-type</span></tt> looks like it is a MID.</p>
</div>
<div class="section" id="connecting-to-widget-events">
<h4>Connecting to Widget Events<a class="headerlink" href="#connecting-to-widget-events" title="Permalink to this headline">¶</a></h4>
<p>Previously you could use <tt class="docutils literal"><span class="pre">&lt;script</span> <span class="pre">type=&quot;dojo/connect&quot;&gt;</span></tt> to monitor widget events and connect to methods:</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit.form.Button&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;span&gt;</span>Click Me!<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;dojo/connect&quot;</span> <span class="na">event=</span><span class="s">&quot;onclick&quot;</span> <span class="na">args=</span><span class="s">&quot;e&quot;</span><span class="nt">&gt;</span>
    <span class="c1">// ...</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button data-dojo-type=&quot;dijit.form.Button&quot;&gt;
  &lt;span&gt;Click Me!&lt;/span&gt;
  &lt;script type=&quot;dojo/connect&quot; event=&quot;onclick&quot; args=&quot;e&quot;&gt;
    // ...
  &lt;/script&gt;
&lt;/button&gt;</textarea></div><p>Now the following is used: <tt class="docutils literal"><span class="pre">&lt;script</span> <span class="pre">type=&quot;dojo/on&quot;&gt;</span></tt> for events like click, <tt class="docutils literal"><span class="pre">&lt;script</span> <span class="pre">type=&quot;dojo/watch&quot;&gt;</span></tt> to monitor
changes to a widget&#8217;s attribute and <tt class="docutils literal"><span class="pre">&lt;script</span> <span class="pre">type=&quot;dojo/aspect&quot;&gt;</span></tt> to modify the behavior of methods:</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit/form/Button&quot;</span><span class="nt">&gt;</span>Click Me!
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;dojo/on&quot;</span> <span class="na">data-dojo-event=</span><span class="s">&quot;click&quot;</span> <span class="na">data-dojo-args=</span><span class="s">&quot;e&quot;</span><span class="nt">&gt;</span>
    <span class="c1">// ...</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit/form/TextBox&quot;</span> <span class="na">id=</span><span class="s">&quot;textBox1&quot;</span>
    <span class="na">data-dojo-props=</span><span class="s">&quot;value: &#39;Old Value&#39;&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;dojo/watch&quot;</span> <span class="na">data-dojo-prop=</span><span class="s">&quot;value&quot;</span> <span class="na">data-dojo-args=</span><span class="s">&quot;prop,oldValue,newValue&quot;</span><span class="nt">&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Prop &#39;&quot;</span><span class="o">+</span><span class="nx">prop</span><span class="o">+</span><span class="s2">&quot;&#39; was &#39;&quot;</span><span class="o">+</span><span class="nx">oldValue</span><span class="o">+</span><span class="s2">&quot;&#39; and is now &#39;&quot;</span><span class="o">+</span><span class="nx">newValue</span><span class="o">+</span><span class="s2">&quot;&#39;&quot;</span><span class="p">);</span>
  <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;form</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit/form/Form&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;dojo/aspect&quot;</span> <span class="na">data-dojo-advice=</span><span class="s">&quot;before&quot;</span> <span class="na">data-dojo-method=</span><span class="s">&quot;onSubmit&quot;</span><span class="nt">&gt;</span>
    <span class="c1">// ...</span>
  <span class="nt">&lt;/script&gt;</span>
  <span class="c">&lt;!-- ... --&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button data-dojo-type=&quot;dijit/form/Button&quot;&gt;Click Me!
  &lt;script type=&quot;dojo/on&quot; data-dojo-event=&quot;click&quot; data-dojo-args=&quot;e&quot;&gt;
    // ...
  &lt;/script&gt;
&lt;/button&gt;
&lt;div data-dojo-type=&quot;dijit/form/TextBox&quot; id=&quot;textBox1&quot;
    data-dojo-props=&quot;value: 'Old Value'&quot;&gt;
  &lt;script type=&quot;dojo/watch&quot; data-dojo-prop=&quot;value&quot; data-dojo-args=&quot;prop,oldValue,newValue&quot;&gt;
    console.log(&quot;Prop '&quot;+prop+&quot;' was '&quot;+oldValue+&quot;' and is now '&quot;+newValue+&quot;'&quot;);
  &lt;/script&gt;
&lt;/div&gt;
&lt;form data-dojo-type=&quot;dijit/form/Form&quot;&gt;
  &lt;script type=&quot;dojo/aspect&quot; data-dojo-advice=&quot;before&quot; data-dojo-method=&quot;onSubmit&quot;&gt;
    // ...
  &lt;/script&gt;
  &lt;!-- ... --&gt;
&lt;/form&gt;</textarea></div></div>
</div>
<div class="section" id="jsid">
<h3><a class="toc-backref" href="#id23">jsId</a><a class="headerlink" href="#jsid" title="Permalink to this headline">¶</a></h3>
<p>The <cite>jsId</cite> attribute has been removed. Replace all <cite>jsId</cite> references with <cite>data-dojo-id</cite>, the behavior is identical.</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">data-dojo-id=</span><span class="s">&quot;bar&quot;</span> <span class="na">data-dojo-type=</span><span class="s">&quot;some/Thinger&quot;</span><span class="nt">&gt;</span>I am exported to window.bar by reference<span class="nt">&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div data-dojo-id=&quot;bar&quot; data-dojo-type=&quot;some/Thinger&quot;&gt;I am exported to window.bar by reference&lt;/div&gt;</textarea></div></div>
<div class="section" id="query">
<h3><a class="toc-backref" href="#id24">Query</a><a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo/query</span></tt> is a new module similar to the old <tt class="docutils literal"><span class="pre">dojo.query()</span></tt> function.  In general you can use it like
<tt class="docutils literal"><span class="pre">dojo.query()</span></tt>, so old code like:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">connect</span><span class="p">(</span><span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.query(&quot;li&quot;).connect(&quot;onclick&quot;, callback)</textarea></div><p>can been replaced by:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/query&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">){</span>
  <span class="nx">query</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/query&quot;], function(query){
  query(&quot;li&quot;).on(&quot;click&quot;, callback);
});</textarea></div><p>Points of caution:</p>
<blockquote>
<div><p>1. As before, you need to require certain NodeList extension modules to get added methods on the NodeList return
from <tt class="docutils literal"><span class="pre">query()</span></tt>. The difference is that now the NodeList DOM functions also need to be explicitly loaded. So you
need to do:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/query&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/NodeList-dom&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">){</span>
  <span class="nx">query</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/query&quot;, &quot;dojo/NodeList-dom&quot;], function(query){
  query(&quot;li&quot;).style(&quot;display&quot;, &quot;none&quot;);
});</textarea></div><p>2. <tt class="docutils literal"><span class="pre">query()</span></tt> can load various selector engines. By default it uses the <tt class="docutils literal"><span class="pre">dojo/selector/light</span></tt> engine. If you have
complicated queries you need to switch it to use a more powerful engine. See <a class="reference internal" href="../dojo/query.html#dojo-query"><em>dojo/query</em></a> for
details.</p>
<p>There are a couple of ways to set the selector engine. First, we can define the selector engine as part of the dojo
configuration for the whole page:</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">data-dojo-config=</span><span class="s">&quot;selectorEngine=&#39;css2.1&#39;&quot;</span> <span class="na">src=</span><span class="s">&quot;dojo/dojo.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script data-dojo-config=&quot;selectorEngine='css2.1'&quot; src=&quot;dojo/dojo.js&quot;&gt;&lt;/script&gt;</textarea></div><p>You can also specify the selector engine level you are dependent on for each of your modules. This is done by
indicating the CSS selector engine level after <tt class="docutils literal"><span class="pre">!</span></tt> in the <tt class="docutils literal"><span class="pre">dojo/query</span></tt> module id. For example, if your module
needed to do a CSS3 level query, you could write:</p>
<div class="highlight"><pre><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;dojo/query!css3&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">query</span><span class="p">){</span>
  <span class="nx">query</span><span class="p">(</span><span class="s2">&quot;.someClass:last-child&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">define([&quot;dojo/query!css3&quot;], function(query){
  query(&quot;.someClass:last-child&quot;).style(&quot;color&quot;, &quot;red&quot;);
});</textarea></div></div></blockquote>
</div>
<div class="section" id="stores">
<h3><a class="toc-backref" href="#id25">Stores</a><a class="headerlink" href="#stores" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../dojo/data.html#dojo-data"><em>dojo.data</em></a> API stores have been replaced with the new <a class="reference internal" href="../dojo/store.html#dojo-store"><em>dojo/store</em></a> API.</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">dojo.data</th>
<th class="head">dojo/store</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>store.getValue(item, &#8220;foo&#8221;)</td>
<td>item.foo</td>
</tr>
<tr class="row-odd"><td>store.getLabel(item)</td>
<td>item.label</td>
</tr>
<tr class="row-even"><td>store.getItemByIdentifier(id)</td>
<td>store.get(id) returns Deferred</td>
</tr>
<tr class="row-odd"><td>store.fetch(...)</td>
<td>store.query() returns Deferred</td>
</tr>
</tbody>
</table>
<p>In order to aid transition, there are two modules that are available:</p>
<ul class="simple">
<li><a class="reference internal" href="../dojo/store/DataStore.html#dojo-store-datastore"><em>dojo/store/DataStore</em></a> - Can convert a legacy <tt class="docutils literal"><span class="pre">dojo.data</span></tt> API store and make it appear
to be a native <tt class="docutils literal"><span class="pre">dojo/store</span></tt>.</li>
<li><a class="reference internal" href="../dojo/data/ObjectStore.html#dojo-data-objectstore"><em>dojo.data.ObjectStore</em></a> - Wraps a <tt class="docutils literal"><span class="pre">dojo/store</span></tt> API store and makes it appear to be a
legacy <tt class="docutils literal"><span class="pre">dojo.data</span></tt> store.</li>
</ul>
<p>Many Dijits are now directly <tt class="docutils literal"><span class="pre">dojo/store</span></tt> aware, including: <a class="reference internal" href="../dijit/form/ComboBox.html#dijit-form-combobox"><em>dijit/form/ComboBox</em></a>,
<a class="reference internal" href="../dijit/form/FilteringSelect.html#dijit-form-filteringselect"><em>dijit/form/FilteringSelect</em></a>, and <a class="reference internal" href="../dijit/Tree.html#dijit-tree"><em>dijit/Tree</em></a>.</p>
</div>
<div class="section" id="declaring-classes">
<h3><a class="toc-backref" href="#id26">Declaring Classes</a><a class="headerlink" href="#declaring-classes" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.declare()</span></tt> has been migrated to <a class="reference internal" href="../dojo/_base/declare.html#dojo-base-declare"><em>dojo/_base/declare</em></a>.  There may be further changes
for Dojo 2.0, for example replacing it by ComposeJS, or may have more modest changes.  For now, for classes you don&#8217;t
need in the global scope, you should declare them as baseless.  Something like this:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">provide</span><span class="p">(</span><span class="s2">&quot;package.myClass&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit._Widget&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;package.myWidget&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">dijit</span><span class="p">.</span><span class="nx">_Widget</span><span class="p">],</span> <span class="p">{</span>
  <span class="c1">// myWidget Class declaration</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.provide(&quot;package.myClass&quot;);
dojo.require(&quot;dijit._Widget&quot;);
dojo.declare(&quot;package.myWidget&quot;, [dijit._Widget], {
  // myWidget Class declaration
});</textarea></div><p>Should change to something like this:</p>
<div class="highlight"><pre><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;dojo/_base/declare&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/_WidgetBase&quot;</span><span class="p">],</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">declare</span><span class="p">,</span> <span class="nx">_WidgetBase</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">declare</span><span class="p">([</span><span class="nx">_WidgetBase</span><span class="p">],</span> <span class="p">{</span>
    <span class="c1">// myWidget Class declaration</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">define([&quot;dojo/_base/declare&quot;, &quot;dijit/_WidgetBase&quot;],
function(declare, _WidgetBase){
  return declare([_WidgetBase], {
    // myWidget Class declaration
  });
});</textarea></div><p>Notice the omission of the first argument in the <tt class="docutils literal"><span class="pre">declare()</span></tt>. This means that nothing will be set in the global
scope.  Also, the mixin array uses the return values of the define requirement array, instead of the legacy class
names. This means that your custom class will only be available within the closure scope of a <tt class="docutils literal"><span class="pre">require()</span></tt> or
<tt class="docutils literal"><span class="pre">define()</span></tt> that has required it in.</p>
<p>This does mean your module can only return a single public class, which is more consistent with the concepts of AMD and
baseless anyways, but if you need to create a private class that isn&#8217;t referenced outside the current module, you can
simply declare it as a variable. For example:</p>
<div class="highlight"><pre><span class="nx">define</span><span class="p">([</span><span class="s2">&quot;dojo/_base/declare&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/_WidgetBase&quot;</span><span class="p">],</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">declare</span><span class="p">,</span> <span class="nx">_WidgetBase</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">_myMixin</span> <span class="o">=</span> <span class="nx">declare</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
    <span class="c1">// _myMixin Class private declaration</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">declare</span><span class="p">([</span><span class="nx">_WidgetBase</span><span class="p">,</span> <span class="nx">_myMixin</span><span class="p">],</span> <span class="p">{</span>
    <span class="c1">// myWidget Class</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">define([&quot;dojo/_base/declare&quot;, &quot;dijit/_WidgetBase&quot;],
function(declare, _WidgetBase){
  var _myMixin = declare(null, {
    // _myMixin Class private declaration
  });

  return declare([_WidgetBase, _myMixin], {
    // myWidget Class
  });
});</textarea></div></div>
<div class="section" id="fx">
<h3><a class="toc-backref" href="#id27">FX</a><a class="headerlink" href="#fx" title="Permalink to this headline">¶</a></h3>
<p>The base FX features of <tt class="docutils literal"><span class="pre">dojo/dojo.js</span></tt> have been moved to <a class="reference internal" href="../dojo/_base/fx.html#dojo-base-fx"><em>dojo/_base/fx</em></a> and the additional
features of the <tt class="docutils literal"><span class="pre">dojo.fx</span></tt> module are now in <a class="reference internal" href="../dojo/fx.html#dojo-fx"><em>dojo/fx</em></a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo._Line</td>
<td>dojo/_base/fx</td>
<td>baseFx._Line</td>
</tr>
<tr class="row-odd"><td>dojo.Animation</td>
<td>dojo/_base/fx</td>
<td>baseFx.Animation</td>
</tr>
<tr class="row-even"><td>dojo._fade</td>
<td>dojo/_base/fx</td>
<td>baseFx._fade</td>
</tr>
<tr class="row-odd"><td>dojo.fadeIn</td>
<td>dojo/_base/fx</td>
<td>baseFx.fadeIn</td>
</tr>
<tr class="row-even"><td>dojo.fadeOut</td>
<td>dojo/_base/fx</td>
<td>baseFx.fadeOut</td>
</tr>
<tr class="row-odd"><td>dojo._defaultEasing</td>
<td>dojo/_base/fx</td>
<td>baseFx._defaultEasing</td>
</tr>
<tr class="row-even"><td>dojo.animateProperty</td>
<td>dojo/_base/fx</td>
<td>baseFx.animateProperty</td>
</tr>
<tr class="row-odd"><td>dojo.anim</td>
<td>dojo/_base/fx</td>
<td>baseFx.anim</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="promises-and-deferreds">
<h3><a class="toc-backref" href="#id28">Promises and Deferreds</a><a class="headerlink" href="#promises-and-deferreds" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.Deferred</span></tt> and <tt class="docutils literal"><span class="pre">dojo.when</span></tt> have been replaced with <tt class="docutils literal"><span class="pre">dojo/promise</span></tt>, <tt class="docutils literal"><span class="pre">dojo/Deferred</span></tt> and <tt class="docutils literal"><span class="pre">dojo/when</span></tt>.
The functionality in <tt class="docutils literal"><span class="pre">dojo.</span>
<span class="pre">DeferredList</span></tt> has been replaced by <tt class="docutils literal"><span class="pre">dojo/promise/all</span></tt> and <tt class="docutils literal"><span class="pre">dojo/promise/first</span></tt>.</p>
<p>Old code like:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">addCallback</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
  <span class="c1">// handle success</span>
<span class="p">});</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">addErrback</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="c1">// handle failure</span>
<span class="p">});</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">callback</span><span class="p">({</span> <span class="nx">success</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">d</span><span class="p">.</span><span class="nx">errback</span><span class="p">({</span> <span class="nx">success</span><span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var d = new dojo.Deferred();
d.addCallback(function(result){
  // handle success
});
d.addErrback(function(err){
  // handle failure
});
d.callback({ success: true });
d.errback({ success: false });</textarea></div><p>Should be refactored like:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/Deferred&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Deferred</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Deferred</span><span class="p">();</span>

  <span class="nx">d</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
    <span class="c1">// handle success</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
    <span class="c1">// handle failure</span>
  <span class="p">});</span>

  <span class="nx">d</span><span class="p">.</span><span class="nx">resolve</span><span class="p">({</span> <span class="nx">success</span><span class="o">:</span> <span class="kc">true</span> <span class="p">});</span>
  <span class="nx">d</span><span class="p">.</span><span class="nx">reject</span><span class="p">({</span> <span class="nx">success</span><span class="o">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/Deferred&quot;], function(Deferred){
  var d = new Deferred();

  d.then(function(result){
    // handle success
  }, function(err){
    // handle failure
  });

  d.resolve({ success: true });
  d.reject({ success: false });
});</textarea></div><p>The following table provides a quick reference to the changes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="25%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.Deferred</td>
<td>dojo/Deferred</td>
<td>Deferred</td>
</tr>
<tr class="row-odd"><td>dojo.when</td>
<td>dojo/when</td>
<td>when</td>
</tr>
<tr class="row-even"><td>dojo.DeferredList([...]).then(...)</td>
<td>dojo/promise/all</td>
<td>all([...]).then(...)</td>
</tr>
<tr class="row-odd"><td>dojo.DeferredList([...], true).then(...)</td>
<td>dojo/promise/first</td>
<td>first([...]).then(...)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="xhr-and-io-requests">
<h3><a class="toc-backref" href="#id29">XHR and IO Requests</a><a class="headerlink" href="#xhr-and-io-requests" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">dojo.xhr*</span></tt> and <tt class="docutils literal"><span class="pre">dojo.io.*</span></tt> have been replaced with <a class="reference internal" href="../dojo/request.html#dojo-request"><em>dojo/request</em></a>.</p>
<p>Old code like:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">xhrGet</span><span class="p">({</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;something.json&quot;</span><span class="p">,</span>
  <span class="nx">handleAs</span><span class="o">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
  <span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="c1">// do something</span>
  <span class="p">},</span>
  <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="c1">// handle error</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.xhrGet({
  url: &quot;something.json&quot;,
  handleAs: &quot;json&quot;,
  load: function(data){
    // do something
  },
  error: function(e){
    // handle error
  }
});</textarea></div><p>Should be refactored as:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/request&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">){</span>
  <span class="nx">request</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;something.json&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">handleAs</span><span class="o">:</span> <span class="s2">&quot;json&quot;</span>
  <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="c1">// do something</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="c1">// handle error</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/request&quot;], function(request){
  request.get(&quot;something.json&quot;, {
    handleAs: &quot;json&quot;
  }).then(function(data){
    // do something
  }, function(e){
    // handle error
  });
});</textarea></div><p><tt class="docutils literal"><span class="pre">dojo.io.script</span></tt> is replaced by <a class="reference internal" href="../dojo/request/script.html#dojo-request-script"><em>dojo/request/script</em></a> and <tt class="docutils literal"><span class="pre">dojo.io.iframe</span></tt> is
replaced by <a class="reference internal" href="../dojo/request/iframe.html#dojo-request-iframe"><em>dojo/request/iframe</em></a> and operate in a similar fashion to the base <tt class="docutils literal"><span class="pre">dojo/request</span></tt> module.</p>
<p>Note that <tt class="docutils literal"><span class="pre">dojo/request</span></tt> utilises the new <tt class="docutils literal"><span class="pre">dojo/promise</span></tt> modules.</p>
</div>
<div class="section" id="miscellaneous">
<h3><a class="toc-backref" href="#id30">Miscellaneous</a><a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="23%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dojo.window</td>
<td>dojo/window</td>
<td>window</td>
</tr>
<tr class="row-odd"><td>dojo.Color</td>
<td>dojo/_base/Color</td>
<td>Color</td>
</tr>
<tr class="row-even"><td>dojo.cookie</td>
<td>dojo/cookie</td>
<td>cookie</td>
</tr>
<tr class="row-odd"><td>dojo.date.locale</td>
<td>dojo/date/locale</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>dojo.date.stamp</td>
<td>dojo/date/stamp</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>dojo.date</td>
<td>dojo/date</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>dojo.dnd.*</td>
<td>dojo/dnd/*</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>dojo.hash</td>
<td>dojo/hash</td>
<td>hash</td>
</tr>
<tr class="row-even"><td>dojo.html</td>
<td>dojo/html</td>
<td>html</td>
</tr>
<tr class="row-odd"><td>dojo.currency</td>
<td>dojo/currency</td>
<td>currency</td>
</tr>
<tr class="row-even"><td>dojo.number</td>
<td>dojo/number</td>
<td>number</td>
</tr>
<tr class="row-odd"><td>dojo.string</td>
<td>dojo/string</td>
<td>string</td>
</tr>
<tr class="row-even"><td>dojo.Stateful</td>
<td>dojo/Stateful</td>
<td>Stateful</td>
</tr>
<tr class="row-odd"><td>dojo.window.*</td>
<td>dojo/window</td>
<td>window.*</td>
</tr>
<tr class="row-even"><td>dojo.config</td>
<td>dojo/_base/config</td>
<td>config</td>
</tr>
<tr class="row-odd"><td>dojo.back.*</td>
<td>dojo/hash</td>
<td>see <a class="reference internal" href="../dojo/hash.html#dojo-hash"><em>dojo/hash</em></a> reference doc</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="dijit">
<h2><a class="toc-backref" href="#id31">Dijit</a><a class="headerlink" href="#dijit" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mapping-table-for-dijit">
<h3><a class="toc-backref" href="#id32">Mapping table for dijit</a><a class="headerlink" href="#mapping-table-for-dijit" title="Permalink to this headline">¶</a></h3>
<p>This is a quick lookup table for methods, attributes, etc. in 1.x mapped to their equivalent method in that module in
2.0.   Note that many methods that were previously included automatically now need to be explicitly loaded.</p>
<p>The sections underneath this give more detail on conversions.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="14%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">1.x syntax</th>
<th class="head">2.0 module</th>
<th class="head">2.0 syntax</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>dijit.hasDefaultTabStop</td>
<td>dijit/a11y</td>
<td>a11y.hasDefaultTabStop</td>
</tr>
<tr class="row-odd"><td>dijit.isTabNavigable</td>
<td>dijit/a11y</td>
<td>a11y.isTabNavigable</td>
</tr>
<tr class="row-even"><td>dijit._getTabNavigable</td>
<td>dijit/a11y</td>
<td>a11y._getTabNavigable</td>
</tr>
<tr class="row-odd"><td>dijit.getFirstInTabbingOrder</td>
<td>dijit/a11y</td>
<td>a11y.getFirstInTabbingOrder</td>
</tr>
<tr class="row-even"><td>dijit.getLastInTabbingOrder</td>
<td>dijit/a11y</td>
<td>a11y.getLastInTabbingOrder</td>
</tr>
<tr class="row-odd"><td>dijit.byId</td>
<td>dijit/registry</td>
<td>registry.byId</td>
</tr>
<tr class="row-even"><td>dijit.byNode</td>
<td>dijit/registry</td>
<td>registry.byNode</td>
</tr>
<tr class="row-odd"><td>dijit.registry.toArray</td>
<td>dijit/registry</td>
<td>registry.toArray</td>
</tr>
<tr class="row-even"><td>dijit.registry.forEach()</td>
<td>dijit/registry</td>
<td>array.forEach(registry.toArray(), ...)</td>
</tr>
<tr class="row-odd"><td>dijit.registry.filter()</td>
<td>dijit/registry</td>
<td>array.filter(registry.toArray(), ...)</td>
</tr>
<tr class="row-even"><td>dijit.registry.map()</td>
<td>dijit/registry</td>
<td>array.map(registry.toArray(), ...)</td>
</tr>
<tr class="row-odd"><td>dijit.registry.every()</td>
<td>dijit/registry</td>
<td>array.every(registry.toArray(), ...)</td>
</tr>
<tr class="row-even"><td>dijit.registry.some()</td>
<td>dijit/registry</td>
<td>array.some(registry.toArray(), ...)</td>
</tr>
<tr class="row-odd"><td>dijit.registry.byClass(&#8220;dijit.form.Button&#8221;)</td>
<td>dijit/registry</td>
<td>array.filter(registry.toArray(), function(widget){ return widget.constructor === require(&#8220;dijit/form/Button&#8221;); })</td>
</tr>
<tr class="row-even"><td>dijit.findWidgets</td>
<td>dijit/registry</td>
<td>registry.findWidgets</td>
</tr>
<tr class="row-odd"><td>dijit.getEnclosingWidget</td>
<td>dijit/registry</td>
<td>registry.getEnclosingWidget</td>
</tr>
<tr class="row-even"><td>dijit.focus</td>
<td>dijit/focus</td>
<td>focus.focus</td>
</tr>
<tr class="row-odd"><td>dijit.registerWin</td>
<td>dijit/focus</td>
<td>focus.registerIframe</td>
</tr>
<tr class="row-even"><td>dijit._curNode</td>
<td>dijit/focus</td>
<td>focus.curNode</td>
</tr>
<tr class="row-odd"><td>dijit.getFocus()</td>
<td>dijit/focus</td>
<td>focus.curNode (points to node not hash)</td>
</tr>
<tr class="row-even"><td>dijit._activeState</td>
<td>dijit/focus</td>
<td>focus.activeStack</td>
</tr>
<tr class="row-odd"><td>dojo.require(&#8220;dijit.sniff&#8221;)</td>
<td>dojo/uacss</td>
<td>require dojo/uacss instead</td>
</tr>
<tr class="row-even"><td>dojo.subscribe(&#8220;focusNode&#8221;,cb)</td>
<td>dijit/focus</td>
<td>focus.watch(&#8220;curNode&#8221;,cb)</td>
</tr>
<tr class="row-odd"><td>dojo.subscribe(&#8220;widgetBlur&#8221;,cb)</td>
<td>dijit/focus</td>
<td>focus.on(&#8220;widget-blur&#8221;,cb)</td>
</tr>
<tr class="row-even"><td>dojo.subscribe(&#8220;widgetFocus&#8221;,cb)</td>
<td>dijit/focus</td>
<td>focus.on(&#8220;widget-focus&#8221;,cb)</td>
</tr>
<tr class="row-odd"><td>dijit.getViewport</td>
<td>dojo/window</td>
<td>window.getBox</td>
</tr>
<tr class="row-even"><td>dijit.placeOnScreen</td>
<td>dijit/place:place.at</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>dijit.placeOnScreenAroundElement(n,an,{BL: &#8220;TL&#8221;</td>
<td>dijit/place</td>
<td>place.around(n,an,[&#8220;before&#8221;,&#8221;after&#8221;])</td>
</tr>
<tr class="row-even"><td>dijit.typematic</td>
<td>dijit/typematic</td>
<td>typematic</td>
</tr>
<tr class="row-odd"><td>dijit.popup.open({orient:{BL: &#8220;TL&#8221;,...})</td>
<td>dijit/popup</td>
<td>popup.open({orient:[&#8220;before&#8221;,&#8221;after&#8221;]})</td>
</tr>
<tr class="row-even"><td>dijit.hasWaiRole(node, role)</td>
<td>&nbsp;</td>
<td>node.getAttribute(&#8220;role&#8221;)==role</td>
</tr>
<tr class="row-odd"><td>dijit.getWaiRole(node)</td>
<td>&nbsp;</td>
<td>node.getAttribute(&#8220;role&#8221;)</td>
</tr>
<tr class="row-even"><td>dijit.setWaiRole(node, role)</td>
<td>&nbsp;</td>
<td>node.setAttribute(&#8220;role&#8221;, role)</td>
</tr>
<tr class="row-odd"><td>dijit.removeWaiRole</td>
<td>&nbsp;</td>
<td>node.setAttribute(role, &#8220;&#8221;)</td>
</tr>
<tr class="row-even"><td>dijit.hasWaiState(&#8220;selected&#8221;)</td>
<td>&nbsp;</td>
<td>node.hasAttribute(&#8220;aria-selected&#8221;)</td>
</tr>
<tr class="row-odd"><td>dijit.getWaiState(&#8220;describedby&#8221;)</td>
<td>&nbsp;</td>
<td>node.getAttribute(&#8220;aria-describedby&#8221;)</td>
</tr>
<tr class="row-even"><td>dijit.setWaiState(&#8220;describedby&#8221;, desc)</td>
<td>&nbsp;</td>
<td>node.getAttribute(&#8220;aria-describedby&#8221;, desc)</td>
</tr>
<tr class="row-odd"><td>dijit.removeWaiState(&#8220;selected&#8221;)</td>
<td>&nbsp;</td>
<td>node.removeAttribute(&#8220;aria-selected&#8221;)</td>
</tr>
<tr class="row-even"><td>dijit.layout.marginBox2contentBox</td>
<td>dijit/layout/utils</td>
<td>utils.marginBox2contentBox</td>
</tr>
<tr class="row-odd"><td>dijit.layout.layoutChildren</td>
<td>dijit/layout/utils</td>
<td>utils.layoutChildren</td>
</tr>
<tr class="row-even"><td>dojo.connect(myWidget, &#8220;onClick&#8221;, cb)</td>
<td>&nbsp;</td>
<td>myWidget.on(&#8220;click&#8221;, cb)</td>
</tr>
<tr class="row-odd"><td>dojo.connect(myWidget, &#8220;onChange&#8221;, cb)</td>
<td>&nbsp;</td>
<td>myWidget.watch(&#8220;value&#8221;, function(name, o, n){...})</td>
</tr>
<tr class="row-even"><td>myWidget.setAttribute(name,val)</td>
<td>&nbsp;</td>
<td>myWidget.set(name,val)</td>
</tr>
<tr class="row-odd"><td>myWidget.attr(name)</td>
<td>&nbsp;</td>
<td>myWidget.get(name)</td>
</tr>
<tr class="row-even"><td>myWidget.attr(name,val)</td>
<td>&nbsp;</td>
<td>myWidget.set(name,val)</td>
</tr>
<tr class="row-odd"><td>myWidget.attr(hash)</td>
<td>&nbsp;</td>
<td>myWidget.set(hash)</td>
</tr>
<tr class="row-even"><td>myWidget.getDescendants</td>
<td>&nbsp;</td>
<td>myWidget.getChildren</td>
</tr>
<tr class="row-odd"><td>myWidget.setDisabled(bool)</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;disabled&#8221;, bool)</td>
</tr>
<tr class="row-even"><td>myWidget.setValue(val)</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;value&#8221;, val)</td>
</tr>
<tr class="row-odd"><td>myWidget.getValue()</td>
<td>&nbsp;</td>
<td>myWidget.get(&#8220;value&#8221;)</td>
</tr>
<tr class="row-even"><td>myWidget.getDisplayedValue()</td>
<td>&nbsp;</td>
<td>myWidget.get(&#8220;displayedValue&#8221;)</td>
</tr>
<tr class="row-odd"><td>myWidget.setDisplayedValue(val)</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;displayedValue&#8221;, val)</td>
</tr>
<tr class="row-even"><td>myWidget.setLabel(label)</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;label&#8221;, label)</td>
</tr>
<tr class="row-odd"><td>myWidget.setChecked(val)</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;checked&#8221;, val)</td>
</tr>
<tr class="row-even"><td>myWidget.setHref()</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;href&#8221;, ...)</td>
</tr>
<tr class="row-odd"><td>myWidget.setContent()</td>
<td>&nbsp;</td>
<td>myWidget.set(&#8220;content&#8221;, ...)</td>
</tr>
<tr class="row-even"><td>dojo.connect(myCalendar, &#8220;onValueSelected&#8221;, ...)</td>
<td>&nbsp;</td>
<td>myCalendar.watch(&#8220;value&#8221;, ...)</td>
</tr>
<tr class="row-odd"><td>Editor.focusOnLoad</td>
<td>dijit/Editor</td>
<td>perform manually</td>
</tr>
<tr class="row-even"><td>Editor.blur()</td>
<td>dijit/Editor</td>
<td>focus something else</td>
</tr>
<tr class="row-odd"><td>dijit._editor.escapeXml()</td>
<td>dijit/_editor/html</td>
<td>html.escapeXml()</td>
</tr>
<tr class="row-even"><td>Editor.getNodeHtml()</td>
<td>dijit/_editor/html</td>
<td>html._getNodeHtml()</td>
</tr>
<tr class="row-odd"><td>Editor.getNodeChildrenHtml()</td>
<td>dijit/_editor/html</td>
<td>html.getNodeChildrenHtml()</td>
</tr>
<tr class="row-even"><td>ProgressBar.progress</td>
<td>dijit/ProgressBar</td>
<td>ProgressBar.value</td>
</tr>
<tr class="row-odd"><td>ProgressBar._setIndeterminateAttr(true)</td>
<td>dijit/ProgressBar</td>
<td>ProgressBar.set(&#8220;value&#8221;, Infinity)</td>
</tr>
<tr class="row-even"><td>ProgressBar._setIndeterminateAttr(false)</td>
<td>dijit/ProgressBar</td>
<td>ProgressBar.set(&#8220;value&#8221;, 123)</td>
</tr>
<tr class="row-odd"><td>TitlePane.setTitle(title)</td>
<td>dijit/TitlePane</td>
<td>TitlePane.set(&#8220;title&#8221;, title)</td>
</tr>
<tr class="row-even"><td>Tooltip.addTarget()</td>
<td>dijit/Tooltip</td>
<td>Tooltip.set(&#8220;connectId&#8221;, ...)</td>
</tr>
<tr class="row-odd"><td>Tooltip.removeTarget()</td>
<td>dijit/Tooltip</td>
<td>Tooltip.set(&#8220;connectId&#8221;, ...)</td>
</tr>
<tr class="row-even"><td>Tree.store</td>
<td>dijit/Tree</td>
<td>specify Tree.model instead</td>
</tr>
<tr class="row-odd"><td>Tree.query</td>
<td>dijit/Tree</td>
<td>pass query to Tree.model instead</td>
</tr>
<tr class="row-even"><td>Tree.label</td>
<td>dijit/Tree</td>
<td>pass label to ForestStoreModel instead</td>
</tr>
<tr class="row-odd"><td>Tree.childrenAttr</td>
<td>dijit/Tree</td>
<td>pass to model</td>
</tr>
<tr class="row-even"><td>Tree.mayHaveChildren</td>
<td>dijit/Tree</td>
<td>specify on model</td>
</tr>
<tr class="row-odd"><td>Tree.getItemChildren</td>
<td>dijit/Tree</td>
<td>specify on model</td>
</tr>
<tr class="row-even"><td>_KeyNavContainer.startupKeyNavChildren</td>
<td>dijit/_KeyNavContainer</td>
<td>remove call to method</td>
</tr>
<tr class="row-odd"><td>Form.execute</td>
<td>dijit/form/Form</td>
<td>Form.submit</td>
</tr>
<tr class="row-even"><td>Form.getValues()</td>
<td>dijit/form/Form</td>
<td>Form.get(&#8220;value&#8221;)</td>
</tr>
<tr class="row-odd"><td>Form.setValues(val)</td>
<td>dijit/form/Form</td>
<td>Form.set(&#8220;value&#8221;, val)</td>
</tr>
<tr class="row-even"><td>Form.isValid()</td>
<td>dijit/form/Form</td>
<td>Form.get(&#8220;state&#8221;)</td>
</tr>
<tr class="row-odd"><td>dijit._setSelectionRange</td>
<td>dijit/form/_TextBoxMixin</td>
<td>_TextBoxMixin._setSelectionRange</td>
</tr>
<tr class="row-even"><td>dojo.connect(myForm, &#8220;onValidStateChange&#8221;, cb)</td>
<td>dijit/form/Form</td>
<td>myForm.watch(&#8220;state&#8221;, function(name, o, n){...})</td>
</tr>
<tr class="row-odd"><td>dijit._Widget</td>
<td>replaced widgets</td>
<td>use dijit/_WidgetBase</td>
</tr>
<tr class="row-even"><td>dijit._Templated</td>
<td>replaced widgets</td>
<td>use dijit/_TemplatedMixin, dijit/_WidgetsInTemplate instead</td>
</tr>
<tr class="row-odd"><td>dijit.form.Slider</td>
<td>replaced widgets</td>
<td>use dijit/form/HorizontalSlider, VerticalSlider, etc.</td>
</tr>
<tr class="row-even"><td>dijit.layout.LayoutContainer</td>
<td>replaced widgets</td>
<td>use dijit/layout/BorderContainer</td>
</tr>
<tr class="row-odd"><td>dijit.layout.SplitContainer</td>
<td>replaced widgets</td>
<td>use dijit/layout/BorderContainer</td>
</tr>
<tr class="row-even"><td>dijit._Calendar</td>
<td>replaced widgets</td>
<td>use dijit/Calendar</td>
</tr>
<tr class="row-odd"><td>dijit.layout.AccordionPane</td>
<td>replaced widgets</td>
<td>use dijit/layout/ContentPane</td>
</tr>
<tr class="row-even"><td>layoutAlign=&#8221;top&#8221;</td>
<td>widget parameters</td>
<td>region=&#8221;top&#8221;</td>
</tr>
<tr class="row-odd"><td>dojoAttachPoint</td>
<td>templates</td>
<td>data-dojo-attach-point</td>
</tr>
<tr class="row-even"><td>dojoAttachEvent</td>
<td>templates</td>
<td>data-dojo-attach-event</td>
</tr>
<tr class="row-odd"><td>waiRole=&#8221;button&#8221;</td>
<td>templates</td>
<td>role=&#8221;button&#8221;</td>
</tr>
<tr class="row-even"><td>waiState=&#8221;selected-false,haspopup-true&#8221;</td>
<td>templates</td>
<td>aria-selected=&#8221;false&#8221; aria-haspopup=&#8221;true&#8221;</td>
</tr>
<tr class="row-odd"><td>attributeMap:{foo:a,bar:b}</td>
<td>widget definitions</td>
<td>_fooSetter:a, _barSetter:b (NB: in 1.8, _setFooAttr and _setBarAttr)</td>
</tr>
<tr class="row-even"><td>_setFooAttr:...</td>
<td>widget definitions</td>
<td>_fooSetter:... (NB: in 1.8, it&#8217;s still _setFooAttr)</td>
</tr>
<tr class="row-odd"><td>this._focused</td>
<td>widget definitions</td>
<td>this.focused</td>
</tr>
<tr class="row-even"><td>this._supportingWidgets.push(...)</td>
<td>widget definitions</td>
<td>this.own(...)</td>
</tr>
<tr class="row-odd"><td>this.connect(node, &#8220;onclick&#8221;, &#8220;myMethod&#8221;)</td>
<td>widget definitions</td>
<td>this.own(on(node, &#8220;click&#8221;, lang.hitch(this, &#8220;myMethod&#8221;)))</td>
</tr>
<tr class="row-even"><td>this.connect(obj, func, &#8220;myMethod&#8221;)</td>
<td>widget definitions</td>
<td>this.own(aspect.after(obj, func, lang.hitch(this, &#8220;myMethod&#8221;), true))</td>
</tr>
<tr class="row-odd"><td>this.subscribe(topicName, &#8220;myMethod&#8221;)</td>
<td>widget definitions</td>
<td>this.own(topic(topicName, lang.hitch(this, &#8220;myMethod&#8221;))) but note that arguments to myMethod are passed as varargs not array</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="set-get">
<h3><a class="toc-backref" href="#id33">set(), get()</a><a class="headerlink" href="#set-get" title="Permalink to this headline">¶</a></h3>
<p>Old widget methods to set and get parameter values, such as:</p>
<div class="highlight"><pre><span class="nx">myEditor</span><span class="p">.</span><span class="nx">getValue</span><span class="p">()</span>
<span class="nx">myTextBox</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="nx">myForm</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(...);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">myEditor.getValue()
myTextBox.attr(&quot;value&quot;)
myForm.setValue(...);</textarea></div><p>have been replaced by the standard <tt class="docutils literal"><span class="pre">set()</span></tt> and <tt class="docutils literal"><span class="pre">get()</span></tt> methods:</p>
<div class="highlight"><pre><span class="nx">myEditor</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="nx">myTextBox</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
<span class="nx">myForm</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">myEditor.get(&quot;value&quot;)
myTextBox.get(&quot;value&quot;)
myForm.set(&quot;value&quot;, ...);</textarea></div></div>
<div class="section" id="watch-on">
<h3><a class="toc-backref" href="#id34">watch(), on()</a><a class="headerlink" href="#watch-on" title="Permalink to this headline">¶</a></h3>
<p>Old widget methods to monitor widget events or changes in widget parameters have been consolidated to use <tt class="docutils literal"><span class="pre">on()</span></tt> and
<tt class="docutils literal"><span class="pre">watch()</span></tt>:</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">myForm</span><span class="p">,</span> <span class="s2">&quot;onValidStateChange&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="p">...</span> <span class="p">});</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">myButton</span><span class="p">,</span> <span class="s2">&quot;onClick&quot;</span><span class="p">,</span> <span class="nx">clickCallback</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.connect(myForm, &quot;onValidStateChange&quot;, function(){ ... });
dojo.connect(myButton, &quot;onClick&quot;, clickCallback);</textarea></div><p>New code:</p>
<div class="highlight"><pre><span class="nx">myForm</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">&quot;valid&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">oldVal</span><span class="p">,</span> <span class="nx">newVal</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">myForm</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot; changed from &quot;</span> <span class="o">+</span>
  <span class="nx">oldVal</span> <span class="o">+</span> <span class="s2">&quot; to &quot;</span> <span class="o">+</span> <span class="nx">newVal</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">myButton</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">clickCallback</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">myForm.watch(&quot;valid&quot;, function(name, oldVal, newVal){
  console.log(myForm.id + &quot;: &quot; + name + &quot; changed from &quot; +
  oldVal + &quot; to &quot; + newVal);
});
myButton.on(&quot;click&quot;, clickCallback);</textarea></div></div>
<div class="section" id="templated-widgets">
<h3><a class="toc-backref" href="#id35">Templated Widgets</a><a class="headerlink" href="#templated-widgets" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">dijit/_Templated</span></tt> mixin has been split into <tt class="docutils literal"><span class="pre">dijit/_TemplatedMixin</span></tt> and <tt class="docutils literal"><span class="pre">dijit/_WidgetsInTemplateMixin</span></tt>. In
addition, <tt class="docutils literal"><span class="pre">dojoAttachPoint</span></tt> and <tt class="docutils literal"><span class="pre">dojoAttachEvent</span></tt> have been changed to the HTML5 valid <tt class="docutils literal"><span class="pre">data-dojo-attach-point</span></tt>
and <tt class="docutils literal"><span class="pre">data-dojo-attach-event</span></tt>.</p>
<p>For example, old code like:</p>
<div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojo.declare&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit._Widget&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit._Templated&quot;</span><span class="p">);</span>

<span class="nx">dojo</span><span class="p">.</span><span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;SimpleTemplate&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">dijit</span><span class="p">.</span><span class="nx">_Widget</span><span class="p">,</span> <span class="nx">dijit</span><span class="p">.</span><span class="nx">_Templated</span><span class="p">],</span> <span class="p">{</span>
  <span class="nx">templateString</span><span class="o">:</span> <span class="s2">&quot;&lt;button&gt;&lt;span dojoAttachPoint=&quot;</span><span class="nx">label</span><span class="s2">&quot;&gt;&lt;/span&gt;&lt;/button&gt;&quot;</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.require(&quot;dojo.declare&quot;);
dojo.require(&quot;dijit._Widget&quot;);
dojo.require(&quot;dijit._Templated&quot;);

dojo.declare(&quot;SimpleTemplate&quot;, [dijit._Widget, dijit._Templated], {
  templateString: &quot;&lt;button&gt;&lt;span dojoAttachPoint=&quot;label&quot;&gt;&lt;/span&gt;&lt;/button&gt;&quot;
});</textarea></div><p>will change to:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/declare&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/_WidgetBase&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/_TemplatedMixin&quot;</span><span class="p">],</span>
<span class="kd">function</span><span class="p">(</span><span class="nx">declare</span><span class="p">,</span> <span class="nx">_WidgetBase</span><span class="p">,</span> <span class="nx">_TemplatedMixin</span><span class="p">){</span>
  <span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;SimpleTemplate&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">_WidgetBase</span><span class="p">,</span> <span class="nx">_TemplatedMixin</span><span class="p">],</span> <span class="p">{</span>
    <span class="nx">templateString</span><span class="o">:</span> <span class="s2">&quot;&lt;button&gt;&lt;span data-dojo-attach-point=&quot;</span><span class="nx">label</span><span class="s2">&quot;&gt;&lt;/span&gt;&lt;/button&gt;&quot;</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/declare&quot;, &quot;dijit/_WidgetBase&quot;, &quot;dijit/_TemplatedMixin&quot;],
function(declare, _WidgetBase, _TemplatedMixin){
  declare(&quot;SimpleTemplate&quot;, [_WidgetBase, _TemplatedMixin], {
    templateString: &quot;&lt;button&gt;&lt;span data-dojo-attach-point=&quot;label&quot;&gt;&lt;/span&gt;&lt;/button&gt;&quot;
  });
});</textarea></div><p>If the above example had widgets in the templates, it would also mixin <tt class="docutils literal"><span class="pre">dijit/_WidgetsInTemplateMixin</span></tt>.</p>
<p>To specify a template from a file, <tt class="docutils literal"><span class="pre">templatePath</span></tt> is no longer supported, and <tt class="docutils literal"><span class="pre">dojo.cache()</span></tt> shouldn&#8217;t be used
either.</p>
<p>Old code:</p>
<div class="highlight"><pre><span class="nx">templatePath</span><span class="o">:</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">moduleUrl</span><span class="p">(</span><span class="s2">&quot;templates&quot;</span><span class="p">,</span> <span class="s2">&quot;myTemplate.html&quot;</span><span class="p">)</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">templatePath: dojo.moduleUrl(&quot;templates&quot;, &quot;myTemplate.html&quot;)</textarea></div><p>New code:</p>
<div class="highlight"><pre><span class="nx">define</span><span class="p">([...,</span> <span class="s2">&quot;dojo/text!./templates/myTemplate.html&quot;</span><span class="p">,</span>
<span class="kd">function</span><span class="p">(...,</span> <span class="nx">myTemplate</span><span class="p">){</span>
  <span class="p">...</span>
  <span class="nx">templateString</span><span class="o">:</span> <span class="nx">myTemplate</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">define([..., &quot;dojo/text!./templates/myTemplate.html&quot;,
function(..., myTemplate){
  ...
  templateString: myTemplate</textarea></div><p>The other change to widgets is that the <tt class="docutils literal"><span class="pre">waiRole</span></tt> and <tt class="docutils literal"><span class="pre">waiState</span></tt> parameters are no longer supported, since it&#8217;s
now easy to use role and state directly.</p>
<p>For instance. Replace:</p>
<div class="highlight"><pre><span class="nt">&lt;span</span> <span class="na">waiRole=</span><span class="s">&quot;treeitem&quot;</span> <span class="na">waiState=</span><span class="s">&quot;selected-false,haspopup-true&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;span waiRole=&quot;treeitem&quot; waiState=&quot;selected-false,haspopup-true&quot;&gt;&lt;/span&gt;</textarea></div><p>With:</p>
<div class="highlight"><pre><span class="nt">&lt;span</span> <span class="na">role=</span><span class="s">&quot;treeitem&quot;</span> <span class="na">aria-selected=</span><span class="s">&quot;false&quot;</span> <span class="na">aria-haspopup=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;span role=&quot;treeitem&quot; aria-selected=&quot;false&quot; aria-haspopup=&quot;true&quot;&gt;&lt;/span&gt;</textarea></div></div>
<div class="section" id="custom-setters">
<h3><a class="toc-backref" href="#id36">custom setters</a><a class="headerlink" href="#custom-setters" title="Permalink to this headline">¶</a></h3>
<p>In 1.8 customer setters for attributes have names like _setXxxAttr().   In 2.0 the name will be changed to _xxxSetter().</p>
</div>
<div class="section" id="attributemap">
<h3><a class="toc-backref" href="#id37">attributeMap</a><a class="headerlink" href="#attributemap" title="Permalink to this headline">¶</a></h3>
<p>attributeMap in 1.x was a hash mapping widget attributes to DOM nodes.   For example:</p>
<div class="highlight"><pre><span class="nx">attributeMap</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="s2">&quot;focusNode&quot;</span><span class="p">,</span>
  <span class="s2">&quot;style&quot;</span><span class="o">:</span> <span class="s2">&quot;domNode&quot;</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">attributeMap: {
  &quot;index&quot;: &quot;focusNode&quot;,
  &quot;style&quot;: &quot;domNode&quot;
}</textarea></div><p>Currently, this is achieved by making separate <tt class="docutils literal"><span class="pre">_xxxSetter</span></tt> attribute for each attribute to map. Originally
<tt class="docutils literal"><span class="pre">_xxxSetter</span></tt> was a function to set a widget attribute.   It can still be a function, but now it can also be an
object like one of the values from <tt class="docutils literal"><span class="pre">attributeMap</span></tt>.    (NB: In 1.8, it&#8217;s _setXxxAttr() not _xxxSetter().   This will
change for 2.0.)</p>
<p>The code above would be expressed as:</p>
<div class="highlight"><pre><span class="nx">_tabIndexSetter</span><span class="o">:</span> <span class="s2">&quot;focusNode&quot;</span><span class="p">,</span>
<span class="nx">_styleSetter</span><span class="o">:</span> <span class="s2">&quot;domNode&quot;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">_tabIndexSetter: &quot;focusNode&quot;,
_styleSetter: &quot;domNode&quot;</textarea></div></div>
<div class="section" id="this-connect-this-subscribe-this-supportingwidgets">
<h3><a class="toc-backref" href="#id38">this.connect(), this.subscribe(), this._supportingWidgets</a><a class="headerlink" href="#this-connect-this-subscribe-this-supportingwidgets" title="Permalink to this headline">¶</a></h3>
<p>The ways to make a widget listen to DOMNode events, do advice on a regular function, subscribe to topics, and
to register a supporting widget have changed.</p>
<p>The new interface is to use the standard dojo methods dojo/on, dojo/aspect, dojo/topic, etc., and call this.own() to
register the handle to be released when the widget is destroyed.   this.own() can be called multiple times, each with
one or more handles specified:</p>
<div class="highlight"><pre><span class="k">this</span><span class="p">.</span><span class="nx">own</span><span class="p">(</span>
  <span class="c1">// setup an event handler (automatically remove() when I&#39;m destroyed)</span>
  <span class="nx">on</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">domNode</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="p">...</span> <span class="p">}),</span>

  <span class="c1">// watch external object (automatically unwatch() when I&#39;m destroyed)</span>
  <span class="nx">aStatefulObject</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">oVal</span><span class="p">,</span> <span class="nx">nVal</span><span class="p">){</span> <span class="p">...</span> <span class="p">}),</span>

  <span class="c1">// create a supporting (internal) widget, to be destroyed when I&#39;m destroyed</span>
  <span class="k">new</span> <span class="nx">MySupportingWidget</span><span class="p">(...)</span>
<span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">this.own(
  // setup an event handler (automatically remove() when I'm destroyed)
  on(this.domNode, &quot;click&quot;, function(){ ... }),

  // watch external object (automatically unwatch() when I'm destroyed)
  aStatefulObject.watch(&quot;x&quot;, function(name, oVal, nVal){ ... }),

  // create a supporting (internal) widget, to be destroyed when I'm destroyed
  new MySupportingWidget(...)
);</textarea></div></div>
<div class="section" id="base-functionality">
<h3><a class="toc-backref" href="#id39">Base Functionality</a><a class="headerlink" href="#base-functionality" title="Permalink to this headline">¶</a></h3>
<p>The methods previously loaded into <tt class="docutils literal"><span class="pre">dijit</span></tt> by default now must be explicitly loaded from various modules.</p>
<p>TODO: list stuff in <tt class="docutils literal"><span class="pre">dijit/registry</span></tt>, <tt class="docutils literal"><span class="pre">dijit/a11y</span></tt>.</p>
<div class="section" id="dijit-focus-dijit-place-and-dijit-popup">
<h4>dijit/focus, dijit/place, and dijit/popup<a class="headerlink" href="#dijit-focus-dijit-place-and-dijit-popup" title="Permalink to this headline">¶</a></h4>
<p>The focus, place, and popup modules in <tt class="docutils literal"><span class="pre">dijit/_base</span></tt> have been promoted to root of <tt class="docutils literal"><span class="pre">dijit</span></tt>, so they need included
explicitly by applications that don&#8217;t want to include all of <tt class="docutils literal"><span class="pre">dijit/_base</span></tt>.</p>
<p>There are a few API changes in the top level modules compared to the ones in <tt class="docutils literal"><span class="pre">dijit/_base</span></tt> (although for backwards
compatibility the modules in <tt class="docutils literal"><span class="pre">dijit/_base</span></tt> maintain their old API):</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">Popup.around()</span></tt> (analogous to <tt class="docutils literal"><span class="pre">dijit.popup.placeAroundElement()</span></tt>) takes a position parameter like
<tt class="docutils literal"><span class="pre">[&quot;before&quot;,</span> <span class="pre">&quot;after&quot;]</span></tt> rather than a set of tuples like <tt class="docutils literal"><span class="pre">{BL:</span> <span class="pre">&quot;TL&quot;,</span> <span class="pre">...}</span></tt>.   In other words, <tt class="docutils literal"><span class="pre">Popup.around()</span></tt>
replaces <tt class="docutils literal"><span class="pre">dijit.popup.placeAroundElement()</span></tt> but instead of <tt class="docutils literal"><span class="pre">dijit.getPopupAroundAlignment(xyz)</span></tt>, just pass in
<tt class="docutils literal"><span class="pre">xzy</span></tt> directly.</li>
<li><tt class="docutils literal"><span class="pre">dijit/focus</span></tt> doesn&#8217;t include the selection related code, just focus related code</li>
<li><tt class="docutils literal"><span class="pre">dijit/focus</span></tt> provides <tt class="docutils literal"><span class="pre">.watch()</span></tt> and <tt class="docutils literal"><span class="pre">.on()</span></tt> methods to monitor the focused node and active widgets, rather
than publishing topics <tt class="docutils literal"><span class="pre">focusNode</span></tt>, <tt class="docutils literal"><span class="pre">widgetBlur</span></tt>, and <tt class="docutils literal"><span class="pre">widgetFocus</span></tt>.</li>
<li>Some methods in <tt class="docutils literal"><span class="pre">dijit/_base/popup</span></tt> used to take DOMNodes or widgets as a parameter; now they just take a widget</li>
</ul>
<p>Also note that the new dijit/popup module is only available through the new AMD API, e.g.:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dijit/popup&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">popup</span><span class="p">){</span> <span class="nx">popup</span><span class="p">.</span><span class="nx">open</span><span class="p">(...);</span> <span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dijit/popup&quot;], function(popup){ popup.open(...); });</textarea></div><p>Some functions from <tt class="docutils literal"><span class="pre">dijit</span></tt> have been moved to <tt class="docutils literal"><span class="pre">dojo</span></tt> core.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">dojo/uacss</span></tt> will add classes to the <tt class="docutils literal"><span class="pre">&lt;html&gt;</span></tt> node like <tt class="docutils literal"><span class="pre">dj_ie</span></tt>, representing the browser, browser version,
box model, etc.  Formerly <tt class="docutils literal"><span class="pre">dojo.require(&quot;dijit.sniff&quot;)</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">getBox()</span></tt> from <tt class="docutils literal"><span class="pre">dojo/window</span></tt> gets the viewport size. Formerly <tt class="docutils literal"><span class="pre">dijit.getViewport()</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">get()</span></tt> from <tt class="docutils literal"><span class="pre">dojo/window</span></tt> converts a document to the corresponding window. Formerly
<tt class="docutils literal"><span class="pre">dijit.getDocumentWindow()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">scrollIntoView()</span></tt> from <tt class="docutils literal"><span class="pre">dojo/window</span></tt> scrolls a node into view, similar to <tt class="docutils literal"><span class="pre">node.scrollIntoView()</span></tt> but working
around browser quirks. Formerly <tt class="docutils literal"><span class="pre">dijit.scrollIntoView()</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="editor">
<h3><a class="toc-backref" href="#id40">Editor</a><a class="headerlink" href="#editor" title="Permalink to this headline">¶</a></h3>
<p>New way of registering plugins: TODO</p>
</div>
<div class="section" id="splitcontainer-layoutcontainer">
<h3><a class="toc-backref" href="#id41">SplitContainer, LayoutContainer</a><a class="headerlink" href="#splitcontainer-layoutcontainer" title="Permalink to this headline">¶</a></h3>
<p>Use BorderContainer instead.   (TODO: examples)</p>
</div>
<div class="section" id="miscellaneous-changes">
<h3><a class="toc-backref" href="#id42">Miscellaneous changes</a><a class="headerlink" href="#miscellaneous-changes" title="Permalink to this headline">¶</a></h3>
<p>_Widget &#8211;&gt; _WidgetBase  (TODO: will probably rename again, to Widget)</p>
</div>
</div>
<div class="section" id="dojox">
<h2><a class="toc-backref" href="#id43">DojoX</a><a class="headerlink" href="#dojox" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">dojox</span></tt> namespace will be removed in Dojo 2.0.  Some of the mature sub-packages will like migrate into Dojo Core
or into Dijit.  The remaining code will be &#8220;spun off&#8221; into separate packages that will be available via package
management tools and a repository of packages.</p>
<p>In order to ensure your code can be easily migrated, refactoring it to fully leverage AMD and not relay upon the
<tt class="docutils literal"><span class="pre">dojox</span></tt> global variable is critically important.</p>
</div>
</div>


                        </div>
                    </div>
                    <div class="sidebar unit size1of4 lastUnit">
                        <h4>Reference Guide</h4>
						<div id="dtkVersion">
							<label for="refver">Dojo Version</label>
							<select id="refver" name="refver">
								<option value="1.6">1.6</option>
								<option value="1.7">1.7</option>
								<option value="1.8" selected="selected">1.8</option>
                                <option value="1.9">1.9</option>
							</select>
						</div>
                        <ul>
                            <li><a href="../index.html">Startpage</a></li>
                            <li><a href="../dojo/index.html">Dojo</a></li>
                            <li><a href="../dijit/index.html">Dijit</a></li>
                            <li><a href="../dojox/index.html">DojoX</a></li>
                        </ul>
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Dojo 1.x to 2.0 migration guide</a><ul>
<li><a class="reference internal" href="#amd">AMD</a><ul>
<li><a class="reference internal" href="#loading-dojo-js">Loading dojo.js</a></li>
<li><a class="reference internal" href="#loading-modules">Loading Modules</a></li>
<li><a class="reference internal" href="#accessing-modules">Accessing Modules</a></li>
<li><a class="reference internal" href="#defining-modules">Defining Modules</a></li>
<li><a class="reference internal" href="#i18n">I18N</a></li>
<li><a class="reference internal" href="#loading-text-resources-and-widget-templates">Loading Text Resources and Widget Templates</a></li>
<li><a class="reference internal" href="#urls">URLs</a></li>
<li><a class="reference internal" href="#quick-reference">Quick Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dojo-core">Dojo Core</a><ul>
<li><a class="reference internal" href="#basic-functions">Basic functions</a><ul>
<li><a class="reference internal" href="#testing-object-types">Testing object types</a></li>
<li><a class="reference internal" href="#dojo-base-lang">dojo/_base/lang</a></li>
<li><a class="reference internal" href="#dojo-base-kernel">dojo/_base/kernel</a></li>
<li><a class="reference internal" href="#dojo-base-array">dojo/_base/array</a></li>
<li><a class="reference internal" href="#browser-device-sniffing">Browser/Device Sniffing</a></li>
<li><a class="reference internal" href="#load-and-unload-handlers">Load and Unload Handlers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#events">Events</a><ul>
<li><a class="reference internal" href="#mouseenter-mouseleave">mouseenter/mouseleave</a></li>
<li><a class="reference internal" href="#mouse-buttons">Mouse Buttons</a></li>
<li><a class="reference internal" href="#keys">Keys</a></li>
<li><a class="reference internal" href="#onkeypress">onkeypress</a></li>
<li><a class="reference internal" href="#event-delegation">Event Delegation</a></li>
<li><a class="reference internal" href="#connectpublisher">connectPublisher()</a></li>
<li><a class="reference internal" href="#id1">Quick Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advice">Advice</a><ul>
<li><a class="reference internal" href="#id2">Quick Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#publish-and-subscribe">Publish and subscribe</a><ul>
<li><a class="reference internal" href="#id3">Quick Reference</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dom-manipulation">DOM Manipulation</a><ul>
<li><a class="reference internal" href="#id4">Quick Reference</a></li>
<li><a class="reference internal" href="#dojo-base-window">dojo/_base/window</a></li>
</ul>
</li>
<li><a class="reference internal" href="#json">JSON</a></li>
<li><a class="reference internal" href="#parser">Parser</a><ul>
<li><a class="reference internal" href="#running-the-parser">Running the Parser</a></li>
<li><a class="reference internal" href="#data-dojo-type-and-data-dojo-props">data-dojo-type and data-dojo-props</a></li>
<li><a class="reference internal" href="#using-mids">Using MIDs</a></li>
<li><a class="reference internal" href="#connecting-to-widget-events">Connecting to Widget Events</a></li>
</ul>
</li>
<li><a class="reference internal" href="#jsid">jsId</a></li>
<li><a class="reference internal" href="#query">Query</a></li>
<li><a class="reference internal" href="#stores">Stores</a></li>
<li><a class="reference internal" href="#declaring-classes">Declaring Classes</a></li>
<li><a class="reference internal" href="#fx">FX</a></li>
<li><a class="reference internal" href="#promises-and-deferreds">Promises and Deferreds</a></li>
<li><a class="reference internal" href="#xhr-and-io-requests">XHR and IO Requests</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dijit">Dijit</a><ul>
<li><a class="reference internal" href="#mapping-table-for-dijit">Mapping table for dijit</a></li>
<li><a class="reference internal" href="#set-get">set(), get()</a></li>
<li><a class="reference internal" href="#watch-on">watch(), on()</a></li>
<li><a class="reference internal" href="#templated-widgets">Templated Widgets</a></li>
<li><a class="reference internal" href="#custom-setters">custom setters</a></li>
<li><a class="reference internal" href="#attributemap">attributeMap</a></li>
<li><a class="reference internal" href="#this-connect-this-subscribe-this-supportingwidgets">this.connect(), this.subscribe(), this._supportingWidgets</a></li>
<li><a class="reference internal" href="#base-functionality">Base Functionality</a><ul>
<li><a class="reference internal" href="#dijit-focus-dijit-place-and-dijit-popup">dijit/focus, dijit/place, and dijit/popup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#editor">Editor</a></li>
<li><a class="reference internal" href="#splitcontainer-layoutcontainer">SplitContainer, LayoutContainer</a></li>
<li><a class="reference internal" href="#miscellaneous-changes">Miscellaneous changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dojox">DojoX</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="migration-17.html"
                        title="previous chapter">Hints about Migrating from 1.x to 1.7</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../developer/a11y-requirements.html"
                        title="next chapter">A11y Requirements</a></p>
    <div id="searchbox" style="display: none">
        <h3>Quick search</h3>
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
         </form>
         <p class="searchtip" style="font-size: 90%">
             Enter search terms or a module, class or function name.
         </p>
    </div>
        </div>
      </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hide" />
        <div id="foot">
            <div class="innerBox">
                <script type="text/javascript">document.write('<a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&amp;formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&amp;entry_0=' + encodeURIComponent(window.location.href) + '">Error in the documentation? Can’t find what you are looking for? Let us know!</a>');</script>
                <div class="footer">
                      &copy; Copyright 2005-2012, Dojo Foundation.
                      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
                </div>
            </div>  
        </div>
        <script src="http://www.google.com/jsapi?key=ABQIAAAAbTW5DVaTIHKHQe5Q75sB0BSaOaO_TgJ5c3mtQFnk5JO2zD5dZBSGHlRJ8HAPlCQCEO_FxSmyNAHSLw" type="text/javascript"></script>
    </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>