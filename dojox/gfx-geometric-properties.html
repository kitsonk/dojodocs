

<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.gfx.matrix &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="The Dojo Toolkit - Reference Guide" href="../index.html" />
    <link rel="up" title="DojoX" href="contents.html" />
    <link rel="next" title="Shape properties" href="gfx-visual-properties.html" />
    <link rel="prev" title="dojox.gfx" href="gfx.html" />

    <link rel="stylesheet" href="../_static/css/site.css">
    <link rel="stylesheet" href="../_static/js/docs/resources/guide.css">
	<script type="text/javascript">
		dojoConfig = {
			async: true
		};
	</script>
    <script type="text/javascript" src="../_static/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="../_static/js/docs/guide.js"></script>

  </head>
  <body>  

    <div class="document">
    <div id="accessibilityNode">
        <a href="#intro">Skip to Content</a> | <a href="#nav">Skip to Navigation</a>
    </div>
    <hr class="hide">
    <div id="page" class="docPage">
        <div id="header">
            <div class="container">
                <span id="logo"><a title="Home" href="http://dojotoolkit.org">
                    <img alt="Dojo Toolkit" src="../_static/images/logo.png"></a>
                </span>
                <ul id="navigation">
                    <li class="home"><a href="/"><span class="homeIcon"></span></a></li>
                    <li class="download"><a href="/download/">Download</a></li>
                    <li class="features"><a href="/features/">Features</a></li>
                    <li class="docs active"><a href="/documentation/">Documentation</a></li>
                    <li class="community"><a href="/community/">Community</a></li>
                    <li class="about"><a href="/blog/">Blog</a></li>
                </ul>
            </div>
        </div>
    
        <hr class="hide" />
    
        <div id="main">
            <div id="content" class="innerBox">
                <div class="pageTitleContainer">
                    <h1>Documentation</h1>
                    <ul class="subnav">
                        <li><a href="/documentation/"><span>Tutorials</span></a></li>
                        <li class="active"><a href="/reference-guide/"><span>Reference Guide</span></a></li>
                        <li><a href="/api/"><span>API Documentation</span></a></li>
                    </ul>
                </div>
                <div class="line">
                    <div class="unit size3of4 firstUnit">
                        <div class="spacer">
                            
  <div class="section" id="dojox-gfx-matrix">
<span id="dojox-gfx-geometric-properties"></span><h1><a class="toc-backref" href="#id1">dojox.gfx.matrix</a><a class="headerlink" href="#dojox-gfx-matrix" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Eugene Lazutkin, Kun Xi, Chris Mitchell</td>
</tr>
<tr class="field-even field"><th class="field-name">since:</th><td class="field-body">0.4</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-gfx-matrix" id="id1">dojox.gfx.matrix</a><ul>
<li><a class="reference internal" href="#coordinates-and-transformations" id="id2">Coordinates and transformations</a></li>
<li><a class="reference internal" href="#matrix2d-and-normalization" id="id3">Matrix2D and normalization</a><ul>
<li><a class="reference internal" href="#matrix2d" id="id4">Matrix2D</a></li>
<li><a class="reference internal" href="#normalize" id="id5">normalize</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constants" id="id6">Constants</a><ul>
<li><a class="reference internal" href="#identity" id="id7">identity</a></li>
<li><a class="reference internal" href="#flipx" id="id8">flipX</a></li>
<li><a class="reference internal" href="#flipy" id="id9">flipY</a></li>
<li><a class="reference internal" href="#flipxy" id="id10">flipXY</a></li>
</ul>
</li>
<li><a class="reference internal" href="#matrix-creators" id="id11">Matrix creators</a><ul>
<li><a class="reference internal" href="#translate" id="id12">translate</a></li>
<li><a class="reference internal" href="#scale" id="id13">scale</a></li>
<li><a class="reference internal" href="#rotate" id="id14">rotate</a></li>
<li><a class="reference internal" href="#skewx" id="id15">skewX</a></li>
<li><a class="reference internal" href="#skewy" id="id16">skewY</a></li>
<li><a class="reference internal" href="#reflect" id="id17">reflect</a></li>
<li><a class="reference internal" href="#project" id="id18">project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general-operations" id="id19">General operations</a><ul>
<li><a class="reference internal" href="#invert" id="id20">invert</a></li>
<li><a class="reference internal" href="#clone" id="id21">clone</a></li>
<li><a class="reference internal" href="#multiplypoint" id="id22">multiplyPoint</a></li>
<li><a class="reference internal" href="#multiply" id="id23">multiply</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sandwich-helpers" id="id24">&#8220;Sandwich&#8221; helpers</a><ul>
<li><a class="reference internal" href="#scaleat" id="id25">scaleAt</a></li>
<li><a class="reference internal" href="#rotateat" id="id26">rotateAt</a></li>
<li><a class="reference internal" href="#skewxat" id="id27">skewXAt</a></li>
<li><a class="reference internal" href="#skewyat" id="id28">skewYAt</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="coordinates-and-transformations">
<h2><a class="toc-backref" href="#id2">Coordinates and transformations</a><a class="headerlink" href="#coordinates-and-transformations" title="Permalink to this headline">¶</a></h2>
<p>In order to understand transformations you need to be familiar with fundamentals of matrices (matrix multiplication, multiplication of a vector by a matrix, order of multiplications). <a class="reference internal" href="gfx.html#dojox-gfx"><em>dojox.gfx</em></a> uses a mnemonic way to describe a matrix: <tt class="docutils literal"><span class="pre">xx</span></tt> scales an <tt class="docutils literal"><span class="pre">X</span></tt> component of a coordinate, <tt class="docutils literal"><span class="pre">yy</span></tt> scales a <tt class="docutils literal"><span class="pre">Y</span></tt> component, <tt class="docutils literal"><span class="pre">xy</span></tt>, and <tt class="docutils literal"><span class="pre">yx</span></tt> affect both components, <tt class="docutils literal"><span class="pre">dx</span></tt> moves an <tt class="docutils literal"><span class="pre">X</span></tt> component, and <tt class="docutils literal"><span class="pre">dy</span></tt> moves a <tt class="docutils literal"><span class="pre">Y</span></tt> component. If you want to refresh your memory, read our <a class="reference internal" href="gfx/matrix-tutorial.html#dojox-gfx-matrix-tutorial"><em>Matrix tutorial</em></a>.</p>
<p>Simple examples:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">2}</span></tt> &#8212; stretches the <tt class="docutils literal"><span class="pre">X</span></tt> dimension by 2.</li>
<li><tt class="docutils literal"><span class="pre">{yy:</span> <span class="pre">0.5}</span></tt> &#8212; <tt class="docutils literal"><span class="pre">&quot;stretches&quot;</span></tt> the <tt class="docutils literal"><span class="pre">Y</span></tt> dimension by 0.5 (shrinks by 2).</li>
<li><tt class="docutils literal"><span class="pre">{dx:</span> <span class="pre">5,</span> <span class="pre">dy:</span> <span class="pre">10}</span></tt> &#8212; shifts an <tt class="docutils literal"><span class="pre">X</span></tt> coordinate by 5, a <tt class="docutils literal"><span class="pre">Y</span></tt> coordinate by 10.</li>
<li><tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">0.866,</span> <span class="pre">xy:</span> <span class="pre">0.5,</span> <span class="pre">yx:</span> <span class="pre">−0.5,</span> <span class="pre">yy:</span> <span class="pre">0.866}</span></tt> &#8212; rotates everything by approximately 30 degrees clockwise (CW) around point <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">0,</span> <span class="pre">xy:</span> <span class="pre">1,</span> <span class="pre">yx:</span> <span class="pre">−1,</span> <span class="pre">yy:</span> <span class="pre">0,</span> <span class="pre">dx:</span> <span class="pre">100}</span></tt> &#8212; rotates everything by 90 degrees CW around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>, and moves things right by 100.</li>
</ul>
<p>Don’t worry, in most cases you don’t need to calculate all members of a transformation matrix directly. As you can see not all members of matrix should be specified &#8212; all skipped members going to be copied from the identity matrix.</p>
<p>There is a shortcut for scaling &#8212; if a number N is used instead of a matrix, it is assumed that it represents a uniform scaling matrix <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">N,</span> <span class="pre">yy:</span> <span class="pre">N}</span></tt>.</p>
<p>There is a shortcut for multiplication (see <a class="reference internal" href="#multiply">multiply</a> for details) &#8212; is an array is used it is treated as an array of matrices, and all matrices will be multiplied to produce the final matrix.</p>
<p><em class="xref std std-ref">dojox.gfx.matrix</em> defines <tt class="docutils literal"><span class="pre">Matrix2D</span></tt> class, as well as numerous helpers (<tt class="docutils literal"><span class="pre">Matrix2D</span></tt> is propagated to <tt class="docutils literal"><span class="pre">dojox.gfx</span></tt> namespace for convenience). Most important of them (all in <tt class="docutils literal"><span class="pre">dojox.gfx.matrix</span></tt> namespace) are listed below.</p>
</div>
<div class="section" id="matrix2d-and-normalization">
<h2><a class="toc-backref" href="#id3">Matrix2D and normalization</a><a class="headerlink" href="#matrix2d-and-normalization" title="Permalink to this headline">¶</a></h2>
<p>As you can see developers can specify matrices in a variety of ways. But for performance reasons internally it is always converted to <tt class="docutils literal"><span class="pre">Matrix2D</span></tt>, which has all proper attributes defined. You can achieve this normalization by instantiating <a class="reference internal" href="#matrix2d">Matrix2D</a> object or by invoking a creator function called <a class="reference internal" href="#normalize">normalize</a>.</p>
<div class="section" id="matrix2d">
<h3><a class="toc-backref" href="#id4">Matrix2D</a><a class="headerlink" href="#matrix2d" title="Permalink to this headline">¶</a></h3>
<p>Matrix2D is the class for our 2 by 3 matrix. You can always use it to normalize your matrix expression to the canonical representation. It is available in both namespaces: <tt class="docutils literal"><span class="pre">dojox.gfx</span></tt> and <tt class="docutils literal"><span class="pre">dojox.gfx.matrix</span></tt>.</p>
<p>Examples:</p>
<div class="highlight"><pre><span class="c1">// identity {xx: 1, xy: 0, dx: 0, yx: 0, yy: 1, dy: 0}</span>
<span class="kd">var</span> <span class="nx">m1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">();</span>

<span class="c1">// shift down {xx: 1, xy: 0, dx: 0, yx: 0, yy: 1, dy: 10}</span>
<span class="kd">var</span> <span class="nx">m2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">({</span><span class="nx">dy</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>

<span class="c1">// scale by 2 {xx: 2, xy: 0, dx: 0, yx: 0, yy: 2, dy: 0}</span>
<span class="kd">var</span> <span class="nx">m3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

<span class="c1">// scale by 2 and shift down {xx: 2, xy: 0, dx: 0, yx: 0, yy: 2, dy: 10}</span>
<span class="kd">var</span> <span class="nx">m3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">gfx</span><span class="p">.</span><span class="nx">Matrix2D</span><span class="p">([{</span><span class="nx">dy</span><span class="o">:</span> <span class="mi">10</span><span class="p">},</span> <span class="mi">2</span><span class="p">]);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// identity {xx: 1, xy: 0, dx: 0, yx: 0, yy: 1, dy: 0}
var m1 = new dojox.gfx.Matrix2D();

// shift down {xx: 1, xy: 0, dx: 0, yx: 0, yy: 1, dy: 10}
var m2 = new dojox.gfx.Matrix2D({dy: 10});

// scale by 2 {xx: 2, xy: 0, dx: 0, yx: 0, yy: 2, dy: 0}
var m3 = new dojox.gfx.Matrix2D(2);

// scale by 2 and shift down {xx: 2, xy: 0, dx: 0, yx: 0, yy: 2, dy: 10}
var m3 = new dojox.gfx.Matrix2D([{dy: 10}, 2]);</textarea></div></div>
<div class="section" id="normalize">
<h3><a class="toc-backref" href="#id5">normalize</a><a class="headerlink" href="#normalize" title="Permalink to this headline">¶</a></h3>
<p>There is one more useful function: <tt class="docutils literal"><span class="pre">normalize(m)</span></tt>, which returns <a class="reference internal" href="#matrix2d">Matrix2D</a>:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">m1</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>        <span class="c1">// =&gt; {xx: 2, xy: 0, yx: 0, yy: 2, dx: 0, dy: 0}</span>

<span class="kd">var</span> <span class="nx">m2</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">({</span><span class="nx">dy</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span> <span class="c1">// =&gt; {xx: 1, xy: 0, yx: 0, yy: 1, dx: 0, dy: 5}</span>

<span class="kd">var</span> <span class="nx">m3</span> <span class="o">=</span> <span class="nx">normalize</span><span class="p">([</span><span class="nx">scale</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nx">translate</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">)]);</span>
                              <span class="c1">// =&gt; {xx: 2, xy: 0, yx: 0, yy: 2, dx: 200, dy: 400}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var m1 = normalize(2);        // =&gt; {xx: 2, xy: 0, yx: 0, yy: 2, dx: 0, dy: 0}

var m2 = normalize({dy: 10}); // =&gt; {xx: 1, xy: 0, yx: 0, yy: 1, dx: 0, dy: 5}

var m3 = normalize([scale(2), translate(100, 200)]);
                              // =&gt; {xx: 2, xy: 0, yx: 0, yy: 2, dx: 200, dy: 400}</textarea></div><p>The same normalization effect can be achieved with creating a matrix directly.</p>
</div>
</div>
<div class="section" id="constants">
<h2><a class="toc-backref" href="#id6">Constants</a><a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<p>Some operations do not require any parameters and implemented as predefined constants.</p>
<div class="section" id="identity">
<h3><a class="toc-backref" href="#id7">identity</a><a class="headerlink" href="#identity" title="Permalink to this headline">¶</a></h3>
<p>The identity matrix. This matrix doesn’t change a picture at all.</p>
</div>
<div class="section" id="flipx">
<h3><a class="toc-backref" href="#id8">flipX</a><a class="headerlink" href="#flipx" title="Permalink to this headline">¶</a></h3>
<p>Changes the sign of all <tt class="docutils literal"><span class="pre">X</span></tt> coordinates. This matrix mirrors the picture around the <tt class="docutils literal"><span class="pre">Y</span></tt> axis.</p>
</div>
<div class="section" id="flipy">
<h3><a class="toc-backref" href="#id9">flipY</a><a class="headerlink" href="#flipy" title="Permalink to this headline">¶</a></h3>
<p>Changes the sign of all <tt class="docutils literal"><span class="pre">Y</span></tt> coordinates. This matrix mirrors the picture around the <tt class="docutils literal"><span class="pre">X</span></tt> axis.</p>
</div>
<div class="section" id="flipxy">
<h3><a class="toc-backref" href="#id10">flipXY</a><a class="headerlink" href="#flipxy" title="Permalink to this headline">¶</a></h3>
<p>Changes the sign of all coordinates. This matrix rotates the picture by 180 degrees around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> point. Another way to say it: it mirrors all points around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>.</p>
</div>
</div>
<div class="section" id="matrix-creators">
<h2><a class="toc-backref" href="#id11">Matrix creators</a><a class="headerlink" href="#matrix-creators" title="Permalink to this headline">¶</a></h2>
<p>Matrices can be used to express any linear transformation of coordinates. To simplify the task of creating matrices for common operations numerous matrix creators are provided.</p>
<p>In all signatures <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">c</span></tt>, and <tt class="docutils literal"><span class="pre">e</span></tt> are numbers (coordinate components or scaling factors), <tt class="docutils literal"><span class="pre">p</span></tt> is a 2D coordinate, <tt class="docutils literal"><span class="pre">r</span></tt> is an angle in radians, <tt class="docutils literal"><span class="pre">d</span></tt> is an angle in degrees (positive value of an angle is CW), <tt class="docutils literal"><span class="pre">m</span></tt> is a matrix.</p>
<p>If a function accepts an angle value, there are two versions of this function: with radians, and with degrees. The latter will be denoted with <tt class="docutils literal"><span class="pre">g</span></tt> suffix. Example: <tt class="docutils literal"><span class="pre">rotate(r)</span></tt> accepts radians, while <tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> accepts degrees.</p>
<div class="section" id="translate">
<h3><a class="toc-backref" href="#id12">translate</a><a class="headerlink" href="#translate" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">translate(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">translate(p)</span></tt>. Shifts everything:</p>
<blockquote>
<div><ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">{dx:</span> <span class="pre">a,</span> <span class="pre">dy:</span> <span class="pre">b}</span></tt></li>
<li>by <tt class="docutils literal"><span class="pre">{dx:</span> <span class="pre">p.x,</span> <span class="pre">dy:</span> <span class="pre">p.y}</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="scale">
<h3><a class="toc-backref" href="#id13">scale</a><a class="headerlink" href="#scale" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">scale(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">scale(a)</span></tt>, <tt class="docutils literal"><span class="pre">scale(p)</span></tt>. Scales a picture:</p>
<blockquote>
<div><ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">a,</span> <span class="pre">yy:</span> <span class="pre">b}</span></tt></li>
<li>by <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">a,</span> <span class="pre">yy:</span> <span class="pre">a}</span></tt></li>
<li>by <tt class="docutils literal"><span class="pre">{xx:</span> <span class="pre">p.x,</span> <span class="pre">yy:</span> <span class="pre">p.y}</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="rotate">
<h3><a class="toc-backref" href="#id14">rotate</a><a class="headerlink" href="#rotate" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">rotate(r)</span></tt>, <tt class="docutils literal"><span class="pre">rotateg(d)</span></tt>. Rotates a picture around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>:</p>
<blockquote>
<div><ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">r</span></tt> radians</li>
<li>by <tt class="docutils literal"><span class="pre">d</span></tt> degrees</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="skewx">
<h3><a class="toc-backref" href="#id15">skewX</a><a class="headerlink" href="#skewx" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">skewX(r)</span></tt>, <tt class="docutils literal"><span class="pre">skewXg(d)</span></tt>. Skews a picture around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> in the <tt class="docutils literal"><span class="pre">X</span></tt> dimension:</p>
<blockquote>
<div><ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">r</span></tt> radians</li>
<li>by <tt class="docutils literal"><span class="pre">d</span></tt> degrees</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="skewy">
<h3><a class="toc-backref" href="#id16">skewY</a><a class="headerlink" href="#skewy" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">skewY(r)</span></tt>, <tt class="docutils literal"><span class="pre">skewYg(d)</span></tt>. Skews a picture around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> in the <tt class="docutils literal"><span class="pre">Y</span></tt> dimension:</p>
<blockquote>
<div><ul class="simple">
<li>by <tt class="docutils literal"><span class="pre">r</span></tt> radians</li>
<li>by <tt class="docutils literal"><span class="pre">d</span></tt> degrees</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="reflect">
<h3><a class="toc-backref" href="#id17">reflect</a><a class="headerlink" href="#reflect" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">reflect(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">reflect(p)</span></tt>. Reflects points around a line that goes through the origin <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>:</p>
<blockquote>
<div><ul class="simple">
<li>around the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(a,</span> <span class="pre">b)]</span></tt></li>
<li>around the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(p.x,</span> <span class="pre">p.y)]</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="project">
<h3><a class="toc-backref" href="#id18">project</a><a class="headerlink" href="#project" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">project(a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">project(p)</span></tt>. Projects points on a line that goes through the origin <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>:</p>
<blockquote>
<div><ul class="simple">
<li>on the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(a,</span> <span class="pre">b)]</span></tt></li>
<li>on the line <tt class="docutils literal"><span class="pre">[(0,</span> <span class="pre">0),</span> <span class="pre">(p.x,</span> <span class="pre">p.y)]</span></tt></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="general-operations">
<h2><a class="toc-backref" href="#id19">General operations</a><a class="headerlink" href="#general-operations" title="Permalink to this headline">¶</a></h2>
<p>In all signatures <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">c</span></tt>, and <tt class="docutils literal"><span class="pre">e</span></tt> are numbers (coordinate components or scaling factors), <tt class="docutils literal"><span class="pre">p</span></tt> is a 2D coordinate, <tt class="docutils literal"><span class="pre">r</span></tt> is an angle in radians, <tt class="docutils literal"><span class="pre">d</span></tt> is an angle in degrees (positive value of an angle is CW), <tt class="docutils literal"><span class="pre">m</span></tt> is a matrix.</p>
<div class="section" id="invert">
<h3><a class="toc-backref" href="#id20">invert</a><a class="headerlink" href="#invert" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">invert(m)</span></tt>. Inverts a matrix. This useful function calculates a matrix, which will do the opposite transformation to the m matrix effectively undoing it. For example, <tt class="docutils literal"><span class="pre">scale(2)</span></tt> produces a matrix to scale uniformly a picture by 2. The opposite matrix is going to be <tt class="docutils literal"><span class="pre">scale(0.5)</span></tt>. We can produce the same result with <tt class="docutils literal"><span class="pre">invert(scale(2))</span></tt>. While it seems complicated for this simple case, frequently it is the only way to calculate an inverted matrix for complex transformation, especially when we don’t know how it was produced initially.</p>
</div>
<div class="section" id="clone">
<h3><a class="toc-backref" href="#id21">clone</a><a class="headerlink" href="#clone" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">clone(m)</span></tt>. Creates a copy of the <tt class="docutils literal"><span class="pre">m</span></tt> matrix.</p>
</div>
<div class="section" id="multiplypoint">
<h3><a class="toc-backref" href="#id22">multiplyPoint</a><a class="headerlink" href="#multiplypoint" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">multiplyPoint(m,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt>, <tt class="docutils literal"><span class="pre">multiplyPoint(m,</span> <span class="pre">p)</span></tt>. Applies a transformation to a coordinate.</p>
</div>
<div class="section" id="multiply">
<h3><a class="toc-backref" href="#id23">multiply</a><a class="headerlink" href="#multiply" title="Permalink to this headline">¶</a></h3>
<p>Signatures: <tt class="docutils literal"><span class="pre">multiply(m1,</span> <span class="pre">m2,</span> <span class="pre">...)</span></tt>. Multiplies all its parameters to create a single matrix.</p>
<p>This function is extremely useful and there is a shortcut for it: anywhere a matrix is expected, an array of matrices can be specified as well. Examples:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">[2,</span> <span class="pre">rotateg(45)]</span></tt> &#8212; rotates everything 45 degrees CW around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> and scales everything by 2 after that.</li>
<li><tt class="docutils literal"><span class="pre">[{dy:</span> <span class="pre">10},</span> <span class="pre">scale(2,</span> <span class="pre">1)]</span></tt> &#8212; scales all <tt class="docutils literal"><span class="pre">X</span></tt> coordinates by 2, and moves the result down by 10.</li>
</ul>
<p>More complex example: imagine you have a surface 500 by 500 pixels, and you want everything in it to be magnified around its center by 2, and rotated (around the center as well) by 30 degrees CW. It is easy: <tt class="docutils literal"><span class="pre">[translate(250,</span> <span class="pre">250),</span> <span class="pre">rotateg(−30),</span> <span class="pre">scale(2),</span> <span class="pre">translate(-250,</span> <span class="pre">-250)]</span></tt>. Explanations:</p>
<ol class="arabic simple">
<li>All scaling, rotating, and skewing operations work around <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt> point. Let’s move the center of our picture to <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>: <tt class="docutils literal"><span class="pre">translate(−250,</span> <span class="pre">−250)</span></tt>.</li>
<li>Now we can scale it: <tt class="docutils literal"><span class="pre">scale(2)</span></tt>.</li>
<li>Now we can rotate it: <tt class="docutils literal"><span class="pre">rotateg(−30)</span></tt>.</li>
<li>Now let’s move our center back: <tt class="docutils literal"><span class="pre">translate(250,</span> <span class="pre">250)</span></tt>.</li>
</ol>
<p>You can see that this kind of transformations follow a <tt class="docutils literal"><span class="pre">&quot;sandwich&quot;</span></tt> pattern, where the first and the last transformation move an immutable point to/from the origin of coordinates before performing other origin-based operations. The first operation is usually a translation to the origin, and the last is the inverse of the same translation.</p>
</div>
</div>
<div class="section" id="sandwich-helpers">
<h2><a class="toc-backref" href="#id24">&#8220;Sandwich&#8221; helpers</a><a class="headerlink" href="#sandwich-helpers" title="Permalink to this headline">¶</a></h2>
<p>These &#8220;around the point&#8221; operations are so important that <tt class="docutils literal"><span class="pre">dojox.gfx</span></tt> provides several helpers for common transformations. Usually they are named like their middle &#8220;meaty&#8221; part with the suffix <tt class="docutils literal"><span class="pre">At</span></tt>. Example: <tt class="docutils literal"><span class="pre">scale(a)</span></tt> =&gt; <tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">p)</span></tt>.</p>
<p>In all signatures <tt class="docutils literal"><span class="pre">a</span></tt>, <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">c</span></tt>, and <tt class="docutils literal"><span class="pre">e</span></tt> are numbers (coordinate components or scaling factors), <tt class="docutils literal"><span class="pre">p</span></tt> is a 2D coordinate, <tt class="docutils literal"><span class="pre">r</span></tt> is an angle in radians, <tt class="docutils literal"><span class="pre">d</span></tt> is an angle in degrees (positive value of an angle is CW), <tt class="docutils literal"><span class="pre">m</span></tt> is a matrix.</p>
<p>If a function accepts an angle value, there are two versions of this function: with radians, and with degrees. The latter will be denoted with <tt class="docutils literal"><span class="pre">g</span></tt> suffix. Example: <tt class="docutils literal"><span class="pre">rotate(r)</span></tt> accepts radians, while <tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> accepts degrees.</p>
<div class="section" id="scaleat">
<h3><a class="toc-backref" href="#id25">scaleAt</a><a class="headerlink" href="#scaleat" title="Permalink to this headline">¶</a></h3>
<p>Applies <a class="reference internal" href="#scale">scale</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a)</span></tt> around <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">b,</span> <span class="pre">c)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a)</span></tt> around <tt class="docutils literal"><span class="pre">(b,</span> <span class="pre">c)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">b,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a,</span> <span class="pre">b)</span></tt> around <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">scaleAt(a,</span> <span class="pre">b,</span> <span class="pre">c,</span> <span class="pre">e)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">scale(a,</span> <span class="pre">b)</span></tt> around <tt class="docutils literal"><span class="pre">(c,</span> <span class="pre">e)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="rotateat">
<h3><a class="toc-backref" href="#id26">rotateAt</a><a class="headerlink" href="#rotateat" title="Permalink to this headline">¶</a></h3>
<p>Applies <a class="reference internal" href="#rotate">rotate</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotateAt(r,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotate(r)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotateAt(r,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotate(r)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotategAt(d,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">rotategAt(d,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">rotateg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="skewxat">
<h3><a class="toc-backref" href="#id27">skewXAt</a><a class="headerlink" href="#skewxat" title="Permalink to this headline">¶</a></h3>
<p>Applies <a class="reference internal" href="#skewx">skewX</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXAt(r,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewX(r)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXAt(r,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewX(r)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXgAt(d,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewXg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewXgAt(d,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewXg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="skewyat">
<h3><a class="toc-backref" href="#id28">skewYAt</a><a class="headerlink" href="#skewyat" title="Permalink to this headline">¶</a></h3>
<p>Applies <a class="reference internal" href="#skewy">skewY</a> with the center at the given point.</p>
<p>Signatures:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYAt(r,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewY(r)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYAt(r,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewY(r)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYgAt(d,</span> <span class="pre">p)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewYg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(p.x,</span> <span class="pre">p.y)</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">skewYgAt(d,</span> <span class="pre">a,</span> <span class="pre">b)</span></tt></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">skewYg(d)</span></tt> at <tt class="docutils literal"><span class="pre">(a,</span> <span class="pre">b)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>


                        </div>
                    </div>
                    <div class="sidebar unit size1of4 lastUnit">
                        <h4>Reference Guide</h4>
						<div id="dtkVersion">
							<label for="refver">Dojo Version</label>
							<select id="refver" name="refver">
								<option value="1.6">1.6</option>
								<option value="1.7">1.7</option>
								<option value="1.8" selected="selected">1.8</option>
                                <option value="1.9">1.9</option>
							</select>
						</div>
                        <ul>
                            <li><a href="../index.html">Startpage</a></li>
                            <li><a href="../dojo/index.html">Dojo</a></li>
                            <li><a href="../dijit/index.html">Dijit</a></li>
                            <li><a href="index.html">DojoX</a></li>
                        </ul>
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">dojox.gfx.matrix</a><ul>
<li><a class="reference internal" href="#coordinates-and-transformations">Coordinates and transformations</a></li>
<li><a class="reference internal" href="#matrix2d-and-normalization">Matrix2D and normalization</a><ul>
<li><a class="reference internal" href="#matrix2d">Matrix2D</a></li>
<li><a class="reference internal" href="#normalize">normalize</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constants">Constants</a><ul>
<li><a class="reference internal" href="#identity">identity</a></li>
<li><a class="reference internal" href="#flipx">flipX</a></li>
<li><a class="reference internal" href="#flipy">flipY</a></li>
<li><a class="reference internal" href="#flipxy">flipXY</a></li>
</ul>
</li>
<li><a class="reference internal" href="#matrix-creators">Matrix creators</a><ul>
<li><a class="reference internal" href="#translate">translate</a></li>
<li><a class="reference internal" href="#scale">scale</a></li>
<li><a class="reference internal" href="#rotate">rotate</a></li>
<li><a class="reference internal" href="#skewx">skewX</a></li>
<li><a class="reference internal" href="#skewy">skewY</a></li>
<li><a class="reference internal" href="#reflect">reflect</a></li>
<li><a class="reference internal" href="#project">project</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general-operations">General operations</a><ul>
<li><a class="reference internal" href="#invert">invert</a></li>
<li><a class="reference internal" href="#clone">clone</a></li>
<li><a class="reference internal" href="#multiplypoint">multiplyPoint</a></li>
<li><a class="reference internal" href="#multiply">multiply</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sandwich-helpers">&#8220;Sandwich&#8221; helpers</a><ul>
<li><a class="reference internal" href="#scaleat">scaleAt</a></li>
<li><a class="reference internal" href="#rotateat">rotateAt</a></li>
<li><a class="reference internal" href="#skewxat">skewXAt</a></li>
<li><a class="reference internal" href="#skewyat">skewYAt</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="gfx.html"
                        title="previous chapter">dojox.gfx</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="gfx-visual-properties.html"
                        title="next chapter">Shape properties</a></p>
    <div id="searchbox" style="display: none">
        <h3>Quick search</h3>
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
         </form>
         <p class="searchtip" style="font-size: 90%">
             Enter search terms or a module, class or function name.
         </p>
    </div>
        </div>
      </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hide" />
        <div id="foot">
            <div class="innerBox">
                <script type="text/javascript">document.write('<a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&amp;formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&amp;entry_0=' + encodeURIComponent(window.location.href) + '">Error in the documentation? Can’t find what you are looking for? Let us know!</a>');</script>
                <div class="footer">
                      &copy; Copyright 2005-2012, Dojo Foundation.
                      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
                </div>
            </div>  
        </div>
        <script src="http://www.google.com/jsapi?key=ABQIAAAAbTW5DVaTIHKHQe5Q75sB0BSaOaO_TgJ5c3mtQFnk5JO2zD5dZBSGHlRJ8HAPlCQCEO_FxSmyNAHSLw" type="text/javascript"></script>
    </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>