

<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.data.FlickrRestStore &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="The Dojo Toolkit - Reference Guide" href="../../index.html" />
    <link rel="up" title="DojoX" href="../contents.html" />
    <link rel="next" title="dojox.data.FlickrStore" href="FlickrStore.html" />
    <link rel="prev" title="dojox.data.FileStore: Technical/Protocol Details" href="FileStore/protocol.html" />

    <link rel="stylesheet" href="../../_static/css/site.css">
    <link rel="stylesheet" href="../../_static/js/docs/resources/guide.css">
	<script type="text/javascript">
		dojoConfig = {
			async: true
		};
	</script>
    <script type="text/javascript" src="../../_static/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="../../_static/js/docs/guide.js"></script>

  </head>
  <body>  

    <div class="document">
    <div id="accessibilityNode">
        <a href="#intro">Skip to Content</a> | <a href="#nav">Skip to Navigation</a>
    </div>
    <hr class="hide">
    <div id="page" class="docPage">
        <div id="header">
            <div class="container">
                <span id="logo"><a title="Home" href="http://dojotoolkit.org">
                    <img alt="Dojo Toolkit" src="../../_static/images/logo.png"></a>
                </span>
                <ul id="navigation">
                    <li class="home"><a href="/"><span class="homeIcon"></span></a></li>
                    <li class="download"><a href="/download/">Download</a></li>
                    <li class="features"><a href="/features/">Features</a></li>
                    <li class="docs active"><a href="/documentation/">Documentation</a></li>
                    <li class="community"><a href="/community/">Community</a></li>
                    <li class="about"><a href="/blog/">Blog</a></li>
                </ul>
            </div>
        </div>
    
        <hr class="hide" />
    
        <div id="main">
            <div id="content" class="innerBox">
                <div class="pageTitleContainer">
                    <h1>Documentation</h1>
                    <ul class="subnav">
                        <li><a href="/documentation/"><span>Tutorials</span></a></li>
                        <li class="active"><a href="/reference-guide/"><span>Reference Guide</span></a></li>
                        <li><a href="/api/"><span>API Documentation</span></a></li>
                    </ul>
                </div>
                <div class="line">
                    <div class="unit size3of4 firstUnit">
                        <div class="spacer">
                            
  <div class="section" id="dojox-data-flickrreststore">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.data.FlickrRestStore</a><a class="headerlink" href="#dojox-data-flickrreststore" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-data-flickrreststore" id="id2">dojox.data.FlickrRestStore</a><ul>
<li><a class="reference internal" href="#features" id="id3">Features</a></li>
<li><a class="reference internal" href="#flickr-terms-and-conditions" id="id4">Flickr Terms and Conditions</a></li>
<li><a class="reference internal" href="#api-key" id="id5">API Key</a></li>
<li><a class="reference internal" href="#flickr-api-example" id="id6">Flickr API Example</a><ul>
<li><a class="reference internal" href="#query-the-first-three-photos-from-a-user" id="id7">Query the first three photos from a user</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constructor-parameters" id="id8">Constructor Parameters</a></li>
<li><a class="reference internal" href="#item-attributes" id="id9">Item Attributes</a></li>
<li><a class="reference internal" href="#query-syntax" id="id10">Query Syntax</a></li>
<li><a class="reference internal" href="#usage-examples" id="id11">Usage Examples</a><ul>
<li><a class="reference internal" href="#listing-nature-pictures" id="id12">Listing nature pictures</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>FlickrRestStore is an implementation of the dojo.data API provides access to the Flickr photo sharing site&#8217;s REST API. Many advanced features are available, including tag search, sorting on numerous attributes, full text search, support for simultaneous clients, result caching and more.</p>
<p>Dojo has several examples of browser in-memory stores, such as dojo.data.ItemFileReadStore, dojox.data.CsvStore, and dojox.data.OmplStore. While these stores are useful and great examples of how data stores can be used to wrapper accessing data, they are not the only way data is served and processed. In many cases, data stores can wrapper external services. It is those services that perform the querying and filtering of data, and then provide only that as a subset back to the data store for presentation as items.</p>
<p>FlickrRestStore is one such store. The purpose of FlickrRestStore is to wrapper the public photo feed of the Flickr service. Then by simply using the FlickrRestStore store, as you would any data store in Dojo, you now have access to querying the vast repository of public photos made available by others on the Web. Look at this <a class="reference external" href="http://archive.dojotoolkit.org/nightly/dojotoolkit/dojox/data/demos/demo_FlickrRestStore.html">demo</a> to see it in action, or look here for some example usages.</p>
<p>The following dojo.data APIs are implemented by FlickrRestStore</p>
<ul class="simple">
<li><a class="reference internal" href="../../dojo/data/api/Read.html#dojo-data-api-read"><em>dojo.data.api.Read</em></a></li>
</ul>
<p>FlickrRestStore is built upon <a class="reference internal" href="FlickrStore.html#dojox-data-flickrstore"><em>FlickrStore</em></a>, a store which reads from Flickr&#8217;s more simplistic public API. However, FlickrRestStore provides many more features:</p>
<div class="section" id="features">
<h2><a class="toc-backref" href="#id3">Features</a><a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Build on Flickr REST API. The Flickr REST API, a much more flexible API than the one used by FlickrStore. This opens up the possibility of having a very comprehensive data store that can have a very rich querying interface.</li>
<li>Results caching. If a request is repeated, or a subset of one or more previous requests is requested, it is returned immediately.</li>
<li>Supports multiple simultaneous clients. If an identical request is received before the first request has completed, a second remote request is not made. Instead, the second caller is notified when the first request completes. An example of this would be two widgets sharing the same FlickrRestStore, and individually paging through the photos.</li>
<li>Result sorting. The available sort attributes are date-taken, date-published and interestingness. See the examples below for their usage.</li>
<li>Full text search. The Flickr API supports full text searching, which you can do by passing a text parameter to the request query. See the examples below for its usage.</li>
<li>Filter by Photo Set. By specifying a setid parameter on the query, you can retrieve photos only from a single set. Due to limitations of the Flickr API, using this parameter negates the use of the full text search.</li>
<li>Tag search. Passing a tags parameter to the request query searches by the given tags. This parameter can be either a comma separated string, or an array of strings. See the examples below.</li>
</ul>
</div>
<div class="section" id="flickr-terms-and-conditions">
<h2><a class="toc-backref" href="#id4">Flickr Terms and Conditions</a><a class="headerlink" href="#flickr-terms-and-conditions" title="Permalink to this headline">¶</a></h2>
<p>Note: While this store wraps making calls to the Flickr service, as a user, you should still verify that you agree to the terms and conditions by which you are using the public Flickr photo service. Review their terms and conditions, and the API terms and conditions, <a class="reference external" href="http://www.flickr.com/services/api/tos/">here</a>.</p>
</div>
<div class="section" id="api-key">
<h2><a class="toc-backref" href="#id5">API Key</a><a class="headerlink" href="#api-key" title="Permalink to this headline">¶</a></h2>
<p>Another difference between FlickrRestStore and FlickrStore is that, due to the fact that FlickrRestStore works with the Flickr REST APIs, you will need to get a free API key from Flickr. You can do so at <a class="reference external" href="http://www.flickr.com/services/api/keys/apply/">http://www.flickr.com/services/api/keys/apply/</a>.</p>
<p>The Flickr service provides its data back in a wide variety of formats (for example, ATOM, RSS, and JSON) but FlickrRestStore only makes use of the JSON format. The following example shows a query that FlickrRestStore processes and the response:
Example</p>
<p>Query the first three photos from a user:</p>
</div>
<div class="section" id="flickr-api-example">
<h2><a class="toc-backref" href="#id6">Flickr API Example</a><a class="headerlink" href="#flickr-api-example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="query-the-first-three-photos-from-a-user">
<h3><a class="toc-backref" href="#id7">Query the first three photos from a user</a><a class="headerlink" href="#query-the-first-three-photos-from-a-user" title="Permalink to this headline">¶</a></h3>
<p><strong>URL:</strong> <a class="reference external" href="http://www.flickr.com/services/rest/?format=json&amp;method=flickr.people.getPublicPhotos&amp;api_key=8c6803164dbc395fb7131c9d54843627&amp;user_id=44153025%40N00&amp;per_page=3">http://www.flickr.com/services/rest/?format=json&amp;method=flickr.people.getPublicPhotos&amp;api_key=8c6803164dbc395fb7131c9d54843627&amp;user_id=44153025%40N00&amp;per_page=3</a></p>
<p><strong>Response:</strong></p>
<div class="highlight"><pre><span class="nx">jsonFlickrApi</span><span class="p">({</span>
  <span class="s2">&quot;photos&quot;</span><span class="o">:</span><span class="p">{</span>
    <span class="s2">&quot;page&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;pages&quot;</span><span class="o">:</span><span class="mi">98</span><span class="p">,</span>
    <span class="s2">&quot;perpage&quot;</span><span class="o">:</span><span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;total&quot;</span><span class="o">:</span><span class="s2">&quot;489&quot;</span><span class="p">,</span>
    <span class="s2">&quot;photo&quot;</span><span class="o">:</span><span class="p">[</span>
       <span class="p">{</span>
         <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;1352049918&quot;</span><span class="p">,</span>
         <span class="s2">&quot;owner&quot;</span><span class="o">:</span><span class="s2">&quot;44153025@N00&quot;</span><span class="p">,</span>
         <span class="s2">&quot;secret&quot;</span><span class="o">:</span><span class="s2">&quot;5636009306&quot;</span><span class="p">,</span>
         <span class="s2">&quot;server&quot;</span><span class="o">:</span><span class="s2">&quot;1111&quot;</span><span class="p">,</span>
         <span class="s2">&quot;farm&quot;</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>
         <span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;The Liffey Panorama&quot;</span><span class="p">,</span>
         <span class="s2">&quot;ispublic&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;isfriend&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;isfamily&quot;</span><span class="o">:</span><span class="mi">0</span>
       <span class="p">},</span>
       <span class="p">{</span>
         <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;1351120079&quot;</span><span class="p">,</span>
         <span class="s2">&quot;owner&quot;</span><span class="o">:</span><span class="s2">&quot;44153025@N00&quot;</span><span class="p">,</span>
         <span class="s2">&quot;secret&quot;</span><span class="o">:</span><span class="s2">&quot;880bf6a003&quot;</span><span class="p">,</span>
         <span class="s2">&quot;server&quot;</span><span class="o">:</span><span class="s2">&quot;1027&quot;</span><span class="p">,</span>
         <span class="s2">&quot;farm&quot;</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>
         <span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;Many Hands make pretty flowers&quot;</span><span class="p">,</span>
         <span class="s2">&quot;ispublic&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;isfriend&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;isfamily&quot;</span><span class="o">:</span><span class="mi">0</span>
       <span class="p">},</span>
       <span class="p">{</span>
         <span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="s2">&quot;1322051485&quot;</span><span class="p">,</span>
         <span class="s2">&quot;owner&quot;</span><span class="o">:</span><span class="s2">&quot;44153025@N00&quot;</span><span class="p">,</span>
         <span class="s2">&quot;secret&quot;</span><span class="o">:</span><span class="s2">&quot;b7c529335d&quot;</span><span class="p">,</span>
         <span class="s2">&quot;server&quot;</span><span class="o">:</span><span class="s2">&quot;1110&quot;</span><span class="p">,</span>
         <span class="s2">&quot;farm&quot;</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span>
         <span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;Wok&#39;n&#39;Roll baby!&quot;</span><span class="p">,</span>
         <span class="s2">&quot;ispublic&quot;</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
         <span class="s2">&quot;isfriend&quot;</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span>
         <span class="s2">&quot;isfamily&quot;</span><span class="o">:</span><span class="mi">0</span>
       <span class="p">}</span>
     <span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">&quot;stat&quot;</span><span class="o">:</span><span class="s2">&quot;ok&quot;</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">jsonFlickrApi({
  &quot;photos&quot;:{
    &quot;page&quot;:1,
    &quot;pages&quot;:98,
    &quot;perpage&quot;:3,
    &quot;total&quot;:&quot;489&quot;,
    &quot;photo&quot;:[
       {
         &quot;id&quot;:&quot;1352049918&quot;,
         &quot;owner&quot;:&quot;44153025&#64;N00&quot;,
         &quot;secret&quot;:&quot;5636009306&quot;,
         &quot;server&quot;:&quot;1111&quot;,
         &quot;farm&quot;:2,
         &quot;title&quot;:&quot;The Liffey Panorama&quot;,
         &quot;ispublic&quot;:1,
         &quot;isfriend&quot;:0,
         &quot;isfamily&quot;:0
       },
       {
         &quot;id&quot;:&quot;1351120079&quot;,
         &quot;owner&quot;:&quot;44153025&#64;N00&quot;,
         &quot;secret&quot;:&quot;880bf6a003&quot;,
         &quot;server&quot;:&quot;1027&quot;,
         &quot;farm&quot;:2,
         &quot;title&quot;:&quot;Many Hands make pretty flowers&quot;,
         &quot;ispublic&quot;:1,
         &quot;isfriend&quot;:0,
         &quot;isfamily&quot;:0
       },
       {
         &quot;id&quot;:&quot;1322051485&quot;,
         &quot;owner&quot;:&quot;44153025&#64;N00&quot;,
         &quot;secret&quot;:&quot;b7c529335d&quot;,
         &quot;server&quot;:&quot;1110&quot;,
         &quot;farm&quot;:2,
         &quot;title&quot;:&quot;Wok'n'Roll baby!&quot;,
         &quot;ispublic&quot;:1,
         &quot;isfriend&quot;:0,
         &quot;isfamily&quot;:0
       }
     ]
  },
  &quot;stat&quot;:&quot;ok&quot;}
)</textarea></div><p>FlickrRestStore&#8217;s role is to process the query parameters passed to the dojo.data.api.Read API and generate the appropriate service URL. It then processes the response from the service and handles accessing the items returned from the query. It also provides simple attribute access to all the values.</p>
</div>
</div>
<div class="section" id="constructor-parameters">
<h2><a class="toc-backref" href="#id8">Constructor Parameters</a><a class="headerlink" href="#constructor-parameters" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="59%" />
<col width="18%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Attribute</strong></td>
<td><strong>Description</strong></td>
<td>Since</td>
</tr>
<tr class="row-even"><td>label</td>
<td>The item attribute to use as the label of the Flickr item.
Defaults to &#8216;title&#8217;</td>
<td>Dojo 1.1</td>
</tr>
<tr class="row-odd"><td>urlPreventCache</td>
<td>Flag controlling whether preventCache of dojo.io.script is used to
prevent browser caching.  Default is true.</td>
<td>Dojo 1.4</td>
</tr>
<tr class="row-even"><td>apikey</td>
<td>Your Flickr service API key.</td>
<td>Dojo 1.1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="item-attributes">
<h2><a class="toc-backref" href="#id9">Item Attributes</a><a class="headerlink" href="#item-attributes" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>title</td>
<td>The title of the photo.</td>
</tr>
<tr class="row-even"><td>author</td>
<td>The person who published the photo to Flickr.</td>
</tr>
<tr class="row-odd"><td>dateTaken</td>
<td>A JavaScript date object representing the date the photo was taken.</td>
</tr>
<tr class="row-even"><td>datePublished</td>
<td>A JavaScript date object representing the date the photo was published to Flickr.</td>
</tr>
<tr class="row-odd"><td>imageUrl</td>
<td>A URL to the full resolution photo image.</td>
</tr>
<tr class="row-even"><td>imageUrlSmall</td>
<td>A URL to the small (icon sized) resolution photo image.</td>
</tr>
<tr class="row-odd"><td>imageUrlMedium</td>
<td>A URL to the medium resolution photo image.</td>
</tr>
<tr class="row-even"><td>imageUrlLarge</td>
<td>A URL to the large resolution photo image.  <strong>New to dojo 1.5</strong></td>
</tr>
<tr class="row-odd"><td>imageUrlOriginal</td>
<td>A URL to the original resolution photo image.  <strong>New to dojo 1.5</strong></td>
</tr>
<tr class="row-even"><td>imageUrlThumb</td>
<td>A URL to the thumbnail sized resolution photo image.</td>
</tr>
<tr class="row-odd"><td>link</td>
<td>A URL linking to the Flickr page displaying the image.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="query-syntax">
<h2><a class="toc-backref" href="#id10">Query Syntax</a><a class="headerlink" href="#query-syntax" title="Permalink to this headline">¶</a></h2>
<p>The fetch method query syntax for FlickrRestStore is simple and straightforward. It allows the following attributes to be set and queried against:</p>
<dl class="docutils">
<dt>userid</dt>
<dd>A Flickr userid to use to narrow the search scope, e.g. <a class="reference external" href="mailto:'44153025&#37;&#52;&#48;N00">'44153025<span>&#64;</span>N00</a>&#8216;. This is required.</dd>
<dt>apikey</dt>
<dd>A Flickr API key. Flickr requires clients of their REST APIs to register for an API key. This is free, and can be done at <a class="reference external" href="http://www.flickr.com/services/api/keys/apply/">http://www.flickr.com/services/api/keys/apply/</a>. Note: do not reuse the API key used in Dojo examples, register your own. This is required.</dd>
<dt>setid</dt>
<dd>The id of a photo set to use to narrow the result data. This is optional. If not specified,
photos from the users primary stream are returned.</dd>
<dt>page</dt>
<dd>Specifies the page of results to use. If not used, then the standard start parameter is used. This is optional.</dd>
<dt>lang</dt>
<dd>Specifies the language to return the results in. This is optional.</dd>
<dt>tags</dt>
<dd>Specifies the tags to search for. This can be either a comma separated list, or an array of strings. This is optional.</dd>
<dt>text</dt>
<dd>The text to use in a full text search. This matches any text in the title or description of a photo. This is optional.</dd>
<dt>sort</dt>
<dd><p class="first">The order to sort the results in. This is a JSON object with two fields, as specified by the dojo.data API.</p>
<ul class="simple">
<li>attribute: This specifies the name of the attribute to sort on. The supported attribute names are<ul>
<li>date-posted</li>
<li>date-taken</li>
<li>interestingness</li>
</ul>
</li>
</ul>
<p>If an attribute is not specified, the default is date-posted</p>
<ul class="last simple">
<li>descending: If set to true, the photos are sorted in descending order. If set to false, or not specified, the photos are sorted in ascending order.</li>
</ul>
</dd>
</dl>
<p><strong>Note:</strong> Unlike many of the other example stores, the FlickrRestStore store cannot do wild-card matching of the attributes. This is because the Flickr public photo feed service cannot do it. In an ideal service implementation, the Flickr service would provide a mechanism by with to pass in wild cards as part of its query parameters.</p>
</div>
<div class="section" id="usage-examples">
<h2><a class="toc-backref" href="#id11">Usage Examples</a><a class="headerlink" href="#usage-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="listing-nature-pictures">
<h3><a class="toc-backref" href="#id12">Listing nature pictures</a><a class="headerlink" href="#listing-nature-pictures" title="Permalink to this headline">¶</a></h3>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" data-dojo-props="type: 'dialog', pluginArgs:{ dojoConfig: 'parseOnLoad: true', version:'' }, width:'700', height:'400', toolbar:'', themename:'claro'"><div class="CodeGlassMiniInner"><div class="highlight"><pre><span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.data.FlickrRestStore&quot;</span><span class="p">);</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.form.Button&quot;</span><span class="p">);</span>

<span class="c1">// This function performs some basic dojo initialization. In this case it connects the button</span>
<span class="c1">// onClick to a function which invokes the fetch(). The fetch function queries for all items</span>
<span class="c1">// and provides callbacks to use for completion of data retrieval or reporting of errors.</span>
<span class="c1">// Set the init function to run when dojo loading and page parsing has completed.</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
   <span class="c1">// Function to perform a fetch on the datastore when a button is clicked</span>
   <span class="kd">function</span> <span class="nx">getAllItems</span><span class="p">(){</span>

     <span class="c1">// Callback to perform an action when the data items are starting to be returned:</span>
     <span class="kd">function</span> <span class="nx">clearOldList</span><span class="p">(</span><span class="nx">size</span><span class="p">,</span> <span class="nx">request</span><span class="p">){</span>
       <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;list&quot;</span><span class="p">);</span>
       <span class="k">if</span><span class="p">(</span><span class="nx">list</span><span class="p">){</span>
         <span class="k">while</span><span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">){</span>
           <span class="nx">list</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">);</span>
         <span class="p">}</span>
       <span class="p">}</span>
     <span class="p">}</span>

     <span class="c1">// Callback for processing a returned list of items.</span>
     <span class="kd">function</span> <span class="nx">gotItems</span><span class="p">(</span><span class="nx">items</span><span class="p">,</span> <span class="nx">request</span><span class="p">){</span>
       <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;list&quot;</span><span class="p">);</span>
       <span class="k">if</span><span class="p">(</span><span class="nx">list</span><span class="p">){</span>
         <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
         <span class="k">for</span><span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
           <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
           <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">);</span>
           <span class="nx">list</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">image</span><span class="p">);</span>
           <span class="nx">image</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="nx">flickrStore</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="s2">&quot;imageUrlMedium&quot;</span><span class="p">));</span>
           <span class="nx">list</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;br&quot;</span><span class="p">));</span>
         <span class="p">}</span>
       <span class="p">}</span>
     <span class="p">}</span>

     <span class="c1">// Callback for if the lookup fails.</span>
     <span class="kd">function</span> <span class="nx">fetchFailed</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">request</span><span class="p">){</span>
       <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;lookup failed.&quot;</span><span class="p">);</span>
     <span class="p">}</span>

     <span class="c1">// Fetch the images. Note the API key used is not for general usage. It&#39;s here to demo the store, ONLY.</span>
     <span class="nx">flickrStore</span><span class="p">.</span><span class="nx">fetch</span><span class="p">({</span><span class="nx">query</span><span class="o">:</span><span class="p">{</span> <span class="nx">tags</span><span class="o">:</span> <span class="s2">&quot;nature&quot;</span><span class="p">,</span> <span class="nx">apikey</span><span class="o">:</span> <span class="s2">&quot;8c6803164dbc395fb7131c9d54843627&quot;</span><span class="p">},</span> <span class="nx">onBegin</span><span class="o">:</span> <span class="nx">clearOldList</span><span class="p">,</span> <span class="nx">onComplete</span><span class="o">:</span> <span class="nx">gotItems</span><span class="p">,</span> <span class="nx">onError</span><span class="o">:</span> <span class="nx">fetchFailed</span><span class="p">});</span>
   <span class="p">}</span>
   <span class="c1">// Link the click event of the button to driving the fetch.</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">button</span><span class="p">,</span> <span class="s2">&quot;onClick&quot;</span><span class="p">,</span> <span class="nx">getAllItems</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">dojo.require(&quot;dojox.data.FlickrRestStore&quot;);
dojo.require(&quot;dijit.form.Button&quot;);

// This function performs some basic dojo initialization. In this case it connects the button
// onClick to a function which invokes the fetch(). The fetch function queries for all items
// and provides callbacks to use for completion of data retrieval or reporting of errors.
// Set the init function to run when dojo loading and page parsing has completed.
dojo.ready(function(){
   // Function to perform a fetch on the datastore when a button is clicked
   function getAllItems(){

     // Callback to perform an action when the data items are starting to be returned:
     function clearOldList(size, request){
       var list = dojo.byId(&quot;list&quot;);
       if(list){
         while(list.firstChild){
           list.removeChild(list.firstChild);
         }
       }
     }

     // Callback for processing a returned list of items.
     function gotItems(items, request){
       var list = dojo.byId(&quot;list&quot;);
       if(list){
         var i;
         for(i = 0; i &lt; items.length; i++){
           var item = items[i];
           var image = document.createElement(&quot;img&quot;);
           list.appendChild(image);
           image.setAttribute(&quot;src&quot;, flickrStore.getValue(item, &quot;imageUrlMedium&quot;));
           list.appendChild(document.createElement(&quot;br&quot;));
         }
       }
     }

     // Callback for if the lookup fails.
     function fetchFailed(error, request){
       alert(&quot;lookup failed.&quot;);
     }

     // Fetch the images. Note the API key used is not for general usage. It's here to demo the store, ONLY.
     flickrStore.fetch({query:{ tags: &quot;nature&quot;, apikey: &quot;8c6803164dbc395fb7131c9d54843627&quot;}, onBegin: clearOldList, onComplete: gotItems, onError: fetchFailed});
   }
   // Link the click event of the button to driving the fetch.
   dojo.connect(button, &quot;onClick&quot;, getAllItems);
});</textarea></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox.data.FlickrRestStore&quot;</span> <span class="na">data-dojo-id=</span><span class="s">&quot;flickrStore&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit.form.Button&quot;</span> <span class="na">data-dojo-id=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>Find nature pictures!<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;br&gt;</span>
<span class="nt">&lt;br&gt;</span>
<span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">&quot;list&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/span&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div data-dojo-type=&quot;dojox.data.FlickrRestStore&quot; data-dojo-id=&quot;flickrStore&quot;&gt;&lt;/div&gt;
&lt;div data-dojo-type=&quot;dijit.form.Button&quot; data-dojo-id=&quot;button&quot;&gt;Find nature pictures!&lt;/div&gt;
&lt;br&gt;
&lt;br&gt;
&lt;span id=&quot;list&quot;&gt;
&lt;/span&gt;</textarea></div></div></div></div>
</div>
</div>


                        </div>
                    </div>
                    <div class="sidebar unit size1of4 lastUnit">
                        <h4>Reference Guide</h4>
						<div id="dtkVersion">
							<label for="refver">Dojo Version</label>
							<select id="refver" name="refver">
								<option value="1.6">1.6</option>
								<option value="1.7">1.7</option>
								<option value="1.8" selected="selected">1.8</option>
                                <option value="1.9">1.9</option>
							</select>
						</div>
                        <ul>
                            <li><a href="../../index.html">Startpage</a></li>
                            <li><a href="../../dojo/index.html">Dojo</a></li>
                            <li><a href="../../dijit/index.html">Dijit</a></li>
                            <li><a href="../index.html">DojoX</a></li>
                        </ul>
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">dojox.data.FlickrRestStore</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#flickr-terms-and-conditions">Flickr Terms and Conditions</a></li>
<li><a class="reference internal" href="#api-key">API Key</a></li>
<li><a class="reference internal" href="#flickr-api-example">Flickr API Example</a><ul>
<li><a class="reference internal" href="#query-the-first-three-photos-from-a-user">Query the first three photos from a user</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constructor-parameters">Constructor Parameters</a></li>
<li><a class="reference internal" href="#item-attributes">Item Attributes</a></li>
<li><a class="reference internal" href="#query-syntax">Query Syntax</a></li>
<li><a class="reference internal" href="#usage-examples">Usage Examples</a><ul>
<li><a class="reference internal" href="#listing-nature-pictures">Listing nature pictures</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="FileStore/protocol.html"
                        title="previous chapter">dojox.data.FileStore: Technical/Protocol Details</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="FlickrStore.html"
                        title="next chapter">dojox.data.FlickrStore</a></p>
    <div id="searchbox" style="display: none">
        <h3>Quick search</h3>
        <form class="search" action="../../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
         </form>
         <p class="searchtip" style="font-size: 90%">
             Enter search terms or a module, class or function name.
         </p>
    </div>
        </div>
      </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hide" />
        <div id="foot">
            <div class="innerBox">
                <script type="text/javascript">document.write('<a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&amp;formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&amp;entry_0=' + encodeURIComponent(window.location.href) + '">Error in the documentation? Can’t find what you are looking for? Let us know!</a>');</script>
                <div class="footer">
                      &copy; Copyright 2005-2012, Dojo Foundation.
                      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
                </div>
            </div>  
        </div>
        <script src="http://www.google.com/jsapi?key=ABQIAAAAbTW5DVaTIHKHQe5Q75sB0BSaOaO_TgJ5c3mtQFnk5JO2zD5dZBSGHlRJ8HAPlCQCEO_FxSmyNAHSLw" type="text/javascript"></script>
    </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>