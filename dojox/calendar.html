

<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.calendar &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="The Dojo Toolkit - Reference Guide" href="../index.html" />
    <link rel="up" title="DojoX" href="contents.html" />
    <link rel="next" title="dojox.charting" href="charting.html" />
    <link rel="prev" title="dojox.av.widget" href="av/widget.html" />

    <link rel="stylesheet" href="../_static/css/site.css">
    <link rel="stylesheet" href="../_static/js/docs/resources/guide.css">
	<script type="text/javascript">
		dojoConfig = {
			async: true
		};
	</script>
    <script type="text/javascript" src="../_static/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="../_static/js/docs/guide.js"></script>

  </head>
  <body>  

    <div class="document">
    <div id="accessibilityNode">
        <a href="#intro">Skip to Content</a> | <a href="#nav">Skip to Navigation</a>
    </div>
    <hr class="hide">
    <div id="page" class="docPage">
        <div id="header">
            <div class="container">
                <span id="logo"><a title="Home" href="http://dojotoolkit.org">
                    <img alt="Dojo Toolkit" src="../_static/images/logo.png"></a>
                </span>
                <ul id="navigation">
                    <li class="home"><a href="/"><span class="homeIcon"></span></a></li>
                    <li class="download"><a href="/download/">Download</a></li>
                    <li class="features"><a href="/features/">Features</a></li>
                    <li class="docs active"><a href="/documentation/">Documentation</a></li>
                    <li class="community"><a href="/community/">Community</a></li>
                    <li class="about"><a href="/blog/">Blog</a></li>
                </ul>
            </div>
        </div>
    
        <hr class="hide" />
    
        <div id="main">
            <div id="content" class="innerBox">
                <div class="pageTitleContainer">
                    <h1>Documentation</h1>
                    <ul class="subnav">
                        <li><a href="/documentation/"><span>Tutorials</span></a></li>
                        <li class="active"><a href="/reference-guide/"><span>Reference Guide</span></a></li>
                        <li><a href="/api/"><span>API Documentation</span></a></li>
                    </ul>
                </div>
                <div class="line">
                    <div class="unit size3of4 firstUnit">
                        <div class="spacer">
                            
  <div class="section" id="dojox-calendar">
<span id="id1"></span><h1><a class="toc-backref" href="#id20">dojox.calendar</a><a class="headerlink" href="#dojox-calendar" title="Permalink to this headline">¶</a></h1>
<img alt="../_images/columnView.png" src="../_images/columnView.png" />
<p>dojox.calendar allows to display events in time and edit them.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-calendar" id="id20">dojox.calendar</a><ul>
<li><a class="reference internal" href="#introduction" id="id21">Introduction</a></li>
<li><a class="reference internal" href="#creating-a-calendar" id="id22">Creating a Calendar</a></li>
<li><a class="reference internal" href="#configuring-calendar-data" id="id23">Configuring Calendar data</a><ul>
<li><a class="reference internal" href="#manage-store-errors" id="id24">Manage store errors</a></li>
<li><a class="reference internal" href="#data-mapping" id="id25">Data mapping</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-range-definition" id="id26">Time range definition</a></li>
<li><a class="reference internal" href="#styling-renderers" id="id27">Styling renderers</a></li>
<li><a class="reference internal" href="#views" id="id28">Views</a><ul>
<li><a class="reference internal" href="#columns-view" id="id29">Columns View</a></li>
<li><a class="reference internal" href="#matrix-view" id="id30">Matrix View</a></li>
<li><a class="reference internal" href="#month-columns-view" id="id31">Month Columns View</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interactions" id="id32">Interactions</a><ul>
<li><a class="reference internal" href="#selection" id="id33">Selection</a></li>
<li><a class="reference internal" href="#data-item-editing" id="id34">Data item editing</a></li>
<li><a class="reference internal" href="#navigation-buttons" id="id35">Navigation buttons</a></li>
<li><a class="reference internal" href="#interactive-data-item-creation" id="id36">Interactive data item creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#calendar-events" id="id37">Calendar events</a></li>
<li><a class="reference internal" href="#advanced-configuration" id="id38">Advanced configuration</a><ul>
<li><a class="reference internal" href="#class-diagram" id="id39">Class diagram</a></li>
<li><a class="reference internal" href="#calendar" id="id40">Calendar</a></li>
<li><a class="reference internal" href="#right-to-left" id="id41">Right-to-left</a></li>
<li><a class="reference internal" href="#bidi" id="id42">Bidi</a></li>
<li><a class="reference internal" href="#alternate-calendars" id="id43">Alternate calendars</a></li>
<li><a class="reference internal" href="#date-time-formatting" id="id44">Date/time formatting</a></li>
<li><a class="reference internal" href="#common-properties" id="id45">Common properties</a></li>
<li><a class="reference internal" href="#column-view" id="id46">Column View</a></li>
<li><a class="reference internal" href="#id7" id="id47">Matrix View</a></li>
<li><a class="reference internal" href="#month-column-view" id="id48">Month Column View</a></li>
<li><a class="reference internal" href="#custom-renderers" id="id49">Custom renderers</a></li>
<li><a class="reference internal" href="#id18" id="id50">Data item editing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also" id="id51">See also</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id21">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The dojox calendar widget displays events from a data store along time using widespread representation and allows to interactively edit the position in time and duration of these events.</p>
<p><strong>Note</strong>: On a supported version of Internet Explorer a standard doctype must be set on the page that includes the calendar for the calendar to be supported (see <a class="reference external" href="http://www.w3.org/QA/2002/04/valid-dtd-list.html">http://www.w3.org/QA/2002/04/valid-dtd-list.html</a>).</p>
<dl class="docutils">
<dt><strong>Terminology:</strong> The &#8220;event&#8221; word can be interpreted in several ways in a calendar application context. So in this documentation we will use the following words to prevent confusion:</dt>
<dd><ul class="first last simple">
<li><strong>data item</strong>: item from the data store. A data item is the data representation of an event (e.g. Meeting at 9am to 10am).</li>
<li><strong>event</strong>: Event dispatched by a widget or a DOM node.</li>
<li><strong>event listener</strong> or <strong>event handler</strong>: Function registered on a particular event which is invoked when this event is dispatched by a widget or a DOM node.</li>
<li><strong>item renderer</strong>: graphical representation of a data item.</li>
</ul>
</dd>
</dl>
<p><strong>Important</strong>: the DOM node that contains the calendar widget or a view widget <strong>must</strong> have a position style property set to &#8220;absolute&#8221; or &#8220;relative&#8221;.</p>
</div>
<div class="section" id="creating-a-calendar">
<h2><a class="toc-backref" href="#id22">Creating a Calendar</a><a class="headerlink" href="#creating-a-calendar" title="Permalink to this headline">¶</a></h2>
<p>The calendar widget is available on the dojox.calendar package.</p>
<p>You can create a calendar widget either with markup or programmatically.</p>
<p>The following example shows how to declare a calendar widget in markup:</p>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" data-dojo-props="type: 'dialog', pluginArgs:{ dojoConfig: 'parseOnLoad: true', version:'' }, width:'620', height:'620', toolbar:'', themename:'claro'"><div class="CodeGlassMiniInner"><div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/calendar/Calendar&quot;</span><span class="p">]);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/ready&quot;, &quot;dojox/calendar/Calendar&quot;]);</textarea></div><div class="highlight"><pre><span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
  <span class="nc">.dojoxCalendar</span><span class="p">{</span> <span class="k">font-size</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span> <span class="k">font-family</span><span class="o">:</span><span class="n">Myriad</span><span class="o">,</span><span class="n">Helvetica</span><span class="o">,</span><span class="n">Tahoma</span><span class="o">,</span><span class="n">Arial</span><span class="o">,</span><span class="n">clean</span><span class="o">,</span><span class="k">sans-serif</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox/calendar/Calendar&quot;</span>
     <span class="na">data-dojo-props=</span><span class="s">&quot;dateInterval:&#39;day&#39;&quot;</span>
     <span class="na">style=</span><span class="s">&quot;position:relative;width:600px;height:600px&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;style type=&quot;text/css&quot;&gt;
  .dojoxCalendar{ font-size: 12px; font-family:Myriad,Helvetica,Tahoma,Arial,clean,sans-serif; }
&lt;/style&gt;

&lt;div data-dojo-type=&quot;dojox/calendar/Calendar&quot;
     data-dojo-props=&quot;dateInterval:'day'&quot;
     style=&quot;position:relative;width:600px;height:600px&quot;&gt;
&lt;/div&gt;</textarea></div></div></div><p>The following example shows how to declare a calendar widget programmatically:</p>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" data-dojo-props="type: 'dialog', pluginArgs:{ dojoConfig: 'parseOnLoad: true', version:'' }, width:'620', height:'620', toolbar:'', themename:'claro'"><div class="CodeGlassMiniInner"><div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/parser&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/calendar/Calendar&quot;</span><span class="p">],</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">parser</span><span class="p">,</span> <span class="nx">ready</span><span class="p">,</span> <span class="nx">Calendar</span><span class="p">){</span>
    <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span>
                   <span class="nx">dateInterval</span><span class="o">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
                   <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;position:relative;width:600px;height:600px&quot;</span>
                <span class="p">},</span> <span class="s2">&quot;someId&quot;</span><span class="p">);</span>
              <span class="p">}</span>
          <span class="p">)}</span>
  <span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/parser&quot;, &quot;dojo/ready&quot;, &quot;dojox/calendar/Calendar&quot;],
  function(parser, ready, Calendar){
    ready(function(){
      calendar = new Calendar({
                   dateInterval: &quot;day&quot;,
                   style: &quot;position:relative;width:600px;height:600px&quot;
                }, &quot;someId&quot;);
              }
          )}
  );</textarea></div><div class="highlight"><pre><span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
  <span class="nc">.dojoxCalendar</span><span class="p">{</span> <span class="k">font-size</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span> <span class="k">font-family</span><span class="o">:</span><span class="n">Myriad</span><span class="o">,</span><span class="n">Helvetica</span><span class="o">,</span><span class="n">Tahoma</span><span class="o">,</span><span class="n">Arial</span><span class="o">,</span><span class="n">clean</span><span class="o">,</span><span class="k">sans-serif</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;someId&quot;</span> <span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;style type=&quot;text/css&quot;&gt;
  .dojoxCalendar{ font-size: 12px; font-family:Myriad,Helvetica,Tahoma,Arial,clean,sans-serif; }
&lt;/style&gt;

&lt;div id=&quot;someId&quot; &gt;
&lt;/div&gt;</textarea></div></div></div></div>
<div class="section" id="configuring-calendar-data">
<h2><a class="toc-backref" href="#id23">Configuring Calendar data</a><a class="headerlink" href="#configuring-calendar-data" title="Permalink to this headline">¶</a></h2>
<p>The calendar widget is populated with a list of data items using a store set on its store property.</p>
<p>The Calendar can connect to any implementation of the dojo.store.api.Store interface that implements get/query and id management (getIdentity).</p>
<p>If the Calendar is displaying live data (ie. data that can be edited by the Calendar itself or data that can change outside of the Calendar), the store must be a dojo.store.Observable.</p>
<div class="section" id="manage-store-errors">
<h3><a class="toc-backref" href="#id24">Manage store errors</a><a class="headerlink" href="#manage-store-errors" title="Permalink to this headline">¶</a></h3>
<p>You might want to listen to store query errors, for that you can use the promise returned by the store setter:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojox/calendar/Calendar&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/_base/Deferred&quot;</span><span class="p">,</span> <span class="p">..],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Calendar</span><span class="p">,</span> <span class="nx">Deferred</span><span class="p">,</span> <span class="p">...){</span>
  <span class="kd">var</span> <span class="nx">calendar</span><span class="o">=</span> <span class="k">new</span> <span class="nx">Calendar</span><span class="p">(...);</span>
  <span class="nx">Deferred</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="nx">calendar</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;store&quot;</span><span class="p">,</span> <span class="nx">mystore</span><span class="p">),</span> <span class="kd">function</span> <span class="nx">onOk</span><span class="p">()</span> <span class="p">{},</span> <span class="kd">function</span> <span class="nx">onFail</span><span class="p">()</span> <span class="p">{});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojox/calendar/Calendar&quot;, &quot;dojo/_base/Deferred&quot;, ..], function(Calendar, Deferred, ...){
  var calendar= new Calendar(...);
  Deferred.when(calendar.set(&quot;store&quot;, mystore), function onOk() {}, function onFail() {});
});</textarea></div></div>
<div class="section" id="data-mapping">
<h3><a class="toc-backref" href="#id25">Data mapping</a><a class="headerlink" href="#data-mapping" title="Permalink to this headline">¶</a></h3>
<p>In order to display the data items, the widget must determine for each data item its start and end time.
It will look by default at the &#8220;startTime&#8221; and &#8220;endTime&#8221; properties.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">someData</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">summary</span><span class="o">:</span> <span class="s2">&quot;Event 1&quot;</span><span class="p">,</span>
    <span class="nx">startTime</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="nx">endTime</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span>
  <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">store</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="k">new</span> <span class="nx">Memory</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="nx">someData</span><span class="p">})),</span>
  <span class="nx">dateInterval</span><span class="o">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
  <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;position:relative;width:500px;height:500px&quot;</span>
<span class="p">},</span> <span class="s2">&quot;someId&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var someData = [
  {
    id: 0,
    summary: &quot;Event 1&quot;,
    startTime: new Date(2012, 0, 1, 10, 0),
    endTime: new Date(2012, 0, 1, 12, 0)
  }
];

calendar = new Calendar({
  date: new Date(2012, 0, 1),
  store: new Observable(new Memory({data: someData})),
  dateInterval: &quot;day&quot;,
  style: &quot;position:relative;width:500px;height:500px&quot;
}, &quot;someId&quot;);</textarea></div><p>The property names can be configured by setting the &#8220;startTimeAttr&#8221; and &#8220;endTimeAttr&#8221;.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">someData</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">summary</span><span class="o">:</span> <span class="s2">&quot;Event 1&quot;</span><span class="p">,</span>
    <span class="nx">begin</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="nx">end</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span>
  <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">startTimeAttr</span><span class="o">:</span> <span class="s2">&quot;begin&quot;</span><span class="p">,</span>
  <span class="nx">endTimeAttr</span><span class="o">:</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span>
  <span class="nx">store</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="k">new</span> <span class="nx">Memory</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="nx">someData</span><span class="p">})),</span>
  <span class="nx">dateInterval</span><span class="o">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
  <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;position:relative;width:500px;height:500px&quot;</span>
<span class="p">},</span> <span class="s2">&quot;someId&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var someData = [
  {
    id: 0,
    summary: &quot;Event 1&quot;,
    begin: new Date(2012, 0, 1, 10, 0),
    end: new Date(2012, 0, 1, 12, 0)
  }
];

calendar = new Calendar({
  date: new Date(2012, 0, 1),
  startTimeAttr: &quot;begin&quot;,
  endTimeAttr: &quot;end&quot;,
  store: new Observable(new Memory({data: someData})),
  dateInterval: &quot;day&quot;,
  style: &quot;position:relative;width:500px;height:500px&quot;
}, &quot;someId&quot;);</textarea></div><p>The value retrieved can be a date directly usable by the calendar or must converted into a date.
Since Dojo 1.9, the calendar is using Date instances or directly converts from ISO format in a similar way than the following example.</p>
<p>In the latter case, the <strong>decodeDate()</strong> and <strong>encodeDate()</strong> functions must be set to respectively decode the object into a date and encode the date into a custom object after an editing.</p>
<p>In the following example, the date ISO format is used in the model to communicate with a distant server.
The decodeDate() will allow the calendar to manipulate Date instances.
The encodeDate() will allow to sent back a date in the ISO format after a data item editing.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">someData</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">summary</span><span class="o">:</span> <span class="s2">&quot;Event 1&quot;</span><span class="p">,</span>
    <span class="nx">startTime</span><span class="o">:</span> <span class="s2">&quot;2012-01-01T10:00&quot;</span><span class="p">,</span>
    <span class="nx">endTime</span><span class="o">:</span> <span class="s2">&quot;2012-01-01T12:00&quot;</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span>
  <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">decodeDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">stamp</span><span class="p">.</span><span class="nx">fromISOString</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">encodeDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">stamp</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">store</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="k">new</span> <span class="nx">Memory</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="nx">someData</span><span class="p">})),</span>
  <span class="nx">dateInterval</span><span class="o">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
  <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;position:relative;width:500px;height:500px&quot;</span>
<span class="p">},</span> <span class="s2">&quot;someId&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var someData = [
  {
    id: 0,
    summary: &quot;Event 1&quot;,
    startTime: &quot;2012-01-01T10:00&quot;,
    endTime: &quot;2012-01-01T12:00&quot;
  }
];

calendar = new Calendar({
  date: new Date(2012, 0, 1),
  decodeDate: function(s){
    return stamp.fromISOString(s);
  },
  encodeDate: function(d){
    return stamp.toISOString(d);
  },
  store: new Observable(new Memory({data: someData})),
  dateInterval: &quot;day&quot;,
  style: &quot;position:relative;width:500px;height:500px&quot;
}, &quot;someId&quot;);</textarea></div><p>In addition to the start and end time, a summary is retrieved on the data item, by default using the &#8220;summary&#8221; property name (use summaryAttr property to change the property name).</p>
<p>The data item can also be flagged &#8220;all day&#8221;. An all-day data item is representing a particular event that spans over one or several days and that starts at the beginning of a day to finish at the beginning of another day.</p>
<p>All-day data items can be displayed differently: for example by default they are displayed in the secondary sheet of a column view. The editing behavior of an all-day data item is also different to keep the all-day constraint.
The calendar is looking to the &#8220;allDay&#8221; property of a data item to determine if it is an all day or not (boolean value expected). The property name can be configured by setting the allDayAttr property.</p>
</div>
</div>
<div class="section" id="time-range-definition">
<h2><a class="toc-backref" href="#id26">Time range definition</a><a class="headerlink" href="#time-range-definition" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>The displayed time range can be defined in two ways:</dt>
<dd><ul class="first last simple">
<li>Set date, dateInterval, dateIntervalSteps properties,</li>
<li>Or set startDate and endDate properties.</li>
</ul>
</dd>
</dl>
<p>The date property defines the reference date.</p>
<p>The dateInterval property defines the interval (day, week, month) and dateIntervalSteps the number of intervals.</p>
<dl class="docutils">
<dt>So, depending of these dateInterval values, if ‘n’ is the dateIntervalSteps value, the time range will be:</dt>
<dd><ul class="first last simple">
<li><strong>&#8220;day&#8221;</strong> - n days from the reference date,</li>
<li><strong>&#8220;week&#8221;</strong> - n week from the first day of week that contains the reference date,</li>
<li><strong>&#8220;month&#8221;</strong> - n months from the first day of the month that contains the reference date.</li>
</ul>
</dd>
</dl>
<p>The following example shows how to display 2 weeks, whose first week contains the 1st of January 2012.</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox/calendar/Calendar&quot;</span>
     <span class="na">data-dojo-props=</span><span class="s">&quot;date: new Date(2012, 0, 1), dateInterval:&#39;week&#39;, dateIntervalSteps:2&quot;</span>
     <span class="na">style=</span><span class="s">&quot;position:relative;width:500px;height:500px&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div data-dojo-type=&quot;dojox/calendar/Calendar&quot;
     data-dojo-props=&quot;date: new Date(2012, 0, 1), dateInterval:'week', dateIntervalSteps:2&quot;
     style=&quot;position:relative;width:500px;height:500px&quot;&gt;&lt;/div&gt;</textarea></div><p>When using the definition using the startDate and endDate properties, the date property must be explicitly null.
The time of day of these date are not taken into account and the date defined by endDate is included in the time range.</p>
<p>The following example shows how to define the time range from the 1st of January 2012 to the 9th of January 2012.</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox/calendar/Calendar&quot;</span>
     <span class="na">data-dojo-props=</span><span class="s">&quot;startDate: new Date(2012, 0, 1), endDate: new Date(2012, 0, 9)&quot;</span>
     <span class="na">style=</span><span class="s">&quot;position:relative;width:500px;height:500px&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div data-dojo-type=&quot;dojox/calendar/Calendar&quot;
     data-dojo-props=&quot;startDate: new Date(2012, 0, 1), endDate: new Date(2012, 0, 9)&quot;
     style=&quot;position:relative;width:500px;height:500px&quot;&gt;&lt;/div&gt;</textarea></div></div>
<div class="section" id="styling-renderers">
<h2><a class="toc-backref" href="#id27">Styling renderers</a><a class="headerlink" href="#styling-renderers" title="Permalink to this headline">¶</a></h2>
<p>A CSS class can be specified for each data item to be applied to the renderers for this particular event. Set the cssClassFunc function that returns the CSS class name for a data item.</p>
<p>For example, we can use this feature to change the color of an item renderer depending on a calendar property of the data item as displayed in the following example:</p>
<div class="highlight"><pre><span class="nc">.claro</span> <span class="nc">.dojoxCalendarEvent.Calendar1</span> <span class="nc">.bg</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#00AA00</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.claro</span> <span class="nc">.dojoxCalendarEvent.Calendar1.Hovered</span> <span class="nc">.bg</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#00FF00</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.claro</span> <span class="nc">.dojoxCalendarEvent.Calendar1.Selected</span> <span class="nc">.bg</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#004400</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.claro</span> <span class="nc">.dojoxCalendarEvent.Calendar2</span> <span class="nc">.bg</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#0000AA</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.claro</span> <span class="nc">.dojoxCalendarEvent.Calendar2.Hovered</span> <span class="nc">.bg</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#0000FF</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.claro</span> <span class="nc">.dojoxCalendarEvent.Calendar2.Selected</span> <span class="nc">.bg</span> <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#000044</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="css"><textarea style="display:none">.claro .dojoxCalendarEvent.Calendar1 .bg {
  background-color: #00AA00;
}
.claro .dojoxCalendarEvent.Calendar1.Hovered .bg {
  background-color: #00FF00;
}
.claro .dojoxCalendarEvent.Calendar1.Selected .bg {
  background-color: #004400;
}
.claro .dojoxCalendarEvent.Calendar2 .bg {
  background-color: #0000AA;
}
.claro .dojoxCalendarEvent.Calendar2.Hovered .bg {
  background-color: #0000FF;
}
.claro .dojoxCalendarEvent.Calendar2.Selected .bg {
  background-color: #000044;
}</textarea></div><div class="highlight"><pre><span class="kd">var</span> <span class="nx">someData</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">summary</span><span class="o">:</span> <span class="s2">&quot;Event 1&quot;</span><span class="p">,</span>
    <span class="nx">startTime</span><span class="o">:</span>  <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="nx">endTime</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
    <span class="nx">calendar</span><span class="o">:</span> <span class="s2">&quot;Calendar1&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">summary</span><span class="o">:</span> <span class="s2">&quot;Event 2&quot;</span><span class="p">,</span>
    <span class="nx">startTime</span><span class="o">:</span>  <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
    <span class="nx">endTime</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
    <span class="nx">calendar</span><span class="o">:</span> <span class="s2">&quot;Calendar2&quot;</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span>
  <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">cssClassFunc</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">calendar</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">store</span><span class="o">:</span> <span class="k">new</span> <span class="nx">Observable</span><span class="p">(</span><span class="k">new</span> <span class="nx">Memory</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="nx">someData</span><span class="p">})),</span>
    <span class="nx">dateInterval</span><span class="o">:</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span>
    <span class="nx">style</span><span class="o">:</span> <span class="s2">&quot;position:relative;width:500px;height:500px&quot;</span>
<span class="p">},</span> <span class="s2">&quot;someId&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var someData = [
  {
    id: 0,
    summary: &quot;Event 1&quot;,
    startTime:  new Date(2012,0, 1, 10),
    endTime: new Date(2012,0, 1, 12),
    calendar: &quot;Calendar1&quot;
  },
  {
    id: 1,
    summary: &quot;Event 2&quot;,
    startTime:  new Date(2012,0, 1, 14),
    endTime: new Date(2012,0, 1, 15),
    calendar: &quot;Calendar2&quot;
  }
];

calendar = new Calendar({
  date: new Date(2012, 0, 1),
  cssClassFunc: function(item){
    return item.calendar;
  },
  store: new Observable(new Memory({data: someData})),
    dateInterval: &quot;day&quot;,
    style: &quot;position:relative;width:500px;height:500px&quot;
}, &quot;someId&quot;);</textarea></div><img alt="../_images/cssClassFunc.png" src="../_images/cssClassFunc.png" />
<p>For further customization, custom item renderers can be created. See dedicated section of advanced configuration.</p>
</div>
<div class="section" id="views">
<h2><a class="toc-backref" href="#id28">Views</a><a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<p>The calendar is embedding by defaults two views: the columns view and the matrix view.</p>
<p>The views are displaying time and events differently and are more adapted for a given time range to display.</p>
<dl class="docutils">
<dt>The calendar is using (by default):</dt>
<dd><ul class="first last simple">
<li>the columns view for time ranges that last from one day to seven days.</li>
<li>the matrix view for time ranges that last more than seven days.</li>
</ul>
</dd>
</dl>
<p>Another optional view is the month columns view that can be used to display one or several entire months.</p>
<p>See Advanced configuration to change this behavior.</p>
<div class="section" id="columns-view">
<h3><a class="toc-backref" href="#id29">Columns View</a><a class="headerlink" href="#columns-view" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/columnView.png" src="../_images/columnView.png" />
<p>The columns view is displaying one column per day.</p>
<dl class="docutils">
<dt>It view is made of two sheets:</dt>
<dd><ul class="first last simple">
<li>A main sheet that shows all non all-day data items vertically.</li>
<li>A secondary sheet that displays, by default, all-day data items horizontally.</li>
</ul>
</dd>
</dl>
<p>See Advanced configuration section to see how to change this behavior.</p>
<p>This view is accessible through the columnView property of  the calendar widget.</p>
<dl class="docutils">
<dt>The main properties of the columns view are:</dt>
<dd><ul class="first last simple">
<li><strong>startDate</strong> * - The date of the first column,</li>
<li><strong>columnCount</strong> * - The number of column to display,</li>
<li><strong>minHours</strong> - The first hour displayed by the main sheet,</li>
<li><strong>maxHours</strong> - The last hour displayed (excluded),</li>
<li><strong>hourSize</strong> - The desired size in pixels of one hour,</li>
<li><strong>timeSlotDuration</strong> - The duration of minutes of the time slot (must be a divisor of 60),</li>
</ul>
</dd>
</dl>
<p>Properties with an (*) are computed by the calendar widget.</p>
<p>See Advanced configuration for more advanced properties like layout properties and renderers.</p>
<p>To specify constructor parameters of the column view, set the columnViewProps property as show in the following example:</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox/calendar/Calendar&quot;</span>
     <span class="na">data-dojo-props=</span><span class="s">&quot;dateInterval:&#39;day&#39;,columnViewProps:{minHours:6}&quot;</span>
     <span class="na">style=</span><span class="s">&quot;position:relative;width:500px;height:500px&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div data-dojo-type=&quot;dojox/calendar/Calendar&quot;
     data-dojo-props=&quot;dateInterval:'day',columnViewProps:{minHours:6}&quot;
     style=&quot;position:relative;width:500px;height:500px&quot;&gt;&lt;/div&gt;</textarea></div><p>The time of day displayed is defined by the minHours (8 by default) and maxHours (18 by default) properties. For example to show the entire day set minHours to 0 and maxHours to 24.</p>
<p>Note: The ColumnView can be replaced by the SimpleColumnView widget which is a columns view without the secondary sheet. See advanced configuration to see how to use this alternate view.</p>
</div>
<div class="section" id="matrix-view">
<h3><a class="toc-backref" href="#id30">Matrix View</a><a class="headerlink" href="#matrix-view" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/matrixView.png" src="../_images/matrixView.png" />
<p>The matrix view is displaying a matrix in which each day is a cell. Time is flowing horizontally.</p>
<p>This view is accessible through the matrixView property of  the calendar widget.</p>
<dl class="docutils">
<dt>The main properties of the columns view are:</dt>
<dd><ul class="first last simple">
<li><strong>startDate</strong> * - The date of the first cell,</li>
<li><strong>rowCount</strong> * - The number of rows to display,</li>
<li><strong>columnCount</strong> * - The number of columns to display,</li>
<li><strong>refStartTime</strong> - (optional) Start time of the time range of interest,</li>
<li><strong>refEndTime</strong> - (optional) end time of the time range of interest,</li>
<li><strong>expandDuration</strong> - Duration in milliseconds of the row expand animation,</li>
<li><strong>expandEasing</strong> - Easing of the row expand animation</li>
</ul>
</dd>
</dl>
<p>Properties with an (*) are computed by the calendar widget.</p>
<p>See advanced configuration dedicated section for more advanced properties like layout properties and renderers.</p>
<p>To specify constructor parameters of the matrix view, set the matrixViewProps property as show in the following example:</p>
<div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox/calendar/Calendar&quot;</span>
     <span class="na">data-dojo-props=</span><span class="s">&quot;matrixViewProps:{expandDuration:0}&quot;</span>
     <span class="na">style=</span><span class="s">&quot;position:relative;width:500px;height:500px&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div data-dojo-type=&quot;dojox/calendar/Calendar&quot;
     data-dojo-props=&quot;matrixViewProps:{expandDuration:0}&quot;
     style=&quot;position:relative;width:500px;height:500px&quot;&gt;&lt;/div&gt;</textarea></div><p>The item renderers that are overlapping are stacked vertically.</p>
<p>Sometimes there is not enough room to show all item renderers. In that case, an expand renderer (by default an arrow) is displayed at the bottom of the cell to indicate that some item renderers are not visible.</p>
<p>The matrix view allows to expand a row to see more events.</p>
<p>By default the calendar is using this feature when an expand renderer is clicked or when an row header cell is clicked.</p>
<img alt="../_images/expandRenderer.png" src="../_images/expandRenderer.png" />
<p>In the following image the first row is expanded:</p>
<img alt="../_images/matrixViewExpanded.png" src="../_images/matrixViewExpanded.png" />
</div>
<div class="section" id="month-columns-view">
<h3><a class="toc-backref" href="#id31">Month Columns View</a><a class="headerlink" href="#month-columns-view" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/monthColumnView.png" src="../_images/monthColumnView.png" />
<p>The month columns view is displaying one column per month.</p>
<p>This view is not in the calendar by default but it can be added, see tests/ExtendedCalendar sample class and advanced configuration for more information.</p>
<dl class="docutils">
<dt>The main properties of the columns view are:</dt>
<dd><ul class="first last simple">
<li><strong>startDate</strong> * - The date of the first column,</li>
<li><strong>columnCount</strong> * - The number of column to display,</li>
<li><strong>daySize</strong> - The desired size in pixels of one day.</li>
</ul>
</dd>
</dl>
<p>Properties with an (*) are computed by the calendar widget.</p>
<p>By default, this is view is using vertical item renderers to show all-day data items and data items longer than one day.</p>
<p>If a day is containing one or several hidden data items (i.e. short data items by default), a decoration is displayed on the grid cell.</p>
<img alt="../_images/monthColumnViewHidden.png" src="../_images/monthColumnViewHidden.png" />
<p>See Advanced configuration for more advanced properties like layout properties and renderers.</p>
</div>
</div>
<div class="section" id="interactions">
<h2><a class="toc-backref" href="#id32">Interactions</a><a class="headerlink" href="#interactions" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>There are two widget classes:</dt>
<dd><ul class="first last simple">
<li>Calendar: allows mouse and keyboard interactions,</li>
<li>MobileCalendar: allows touch interactions.</li>
</ul>
</dd>
</dl>
<p>For advanced developer, views (see class diagram) can be mixed with Mouse and Keyboard or Touch classes to enable respective interactions.</p>
<div class="section" id="selection">
<h3><a class="toc-backref" href="#id33">Selection</a><a class="headerlink" href="#selection" title="Permalink to this headline">¶</a></h3>
<div class="section" id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The selectionMode property controls the selection, this property can take the following values:</dt>
<dd><ul class="first last simple">
<li><strong>&#8220;none&#8221;</strong> - no selection is possible.</li>
<li><strong>&#8220;single&#8221;</strong> - only one item can be selected at most.</li>
<li><strong>&#8220;multiple&#8221;</strong> - zero or several items can be selected.</li>
</ul>
</dd>
</dl>
<p>The selectedItems property contains the list of selected items from the data store.</p>
<p>The selectedItem property contains the last selected item.</p>
<p>These last two properties can read as well as programmatically set.</p>
</div>
<div class="section" id="using-the-mouse">
<h4>Using the mouse<a class="headerlink" href="#using-the-mouse" title="Permalink to this headline">¶</a></h4>
<p>To select a data item, simply click on an item renderer.</p>
<p>To deselect a data item, press the control key and click on an item renderer.</p>
<p>If the selection mode is &#8220;multiple&#8221;, you can extend the selection or deselect a data item by pressing the control key and click on an item renderer.</p>
</div>
<div class="section" id="using-the-keyboard">
<h4>Using the keyboard<a class="headerlink" href="#using-the-keyboard" title="Permalink to this headline">¶</a></h4>
<p>If the calendar widget has the focus, press the left or right arrow keys to select a data item.</p>
<p>To move only the focus on a data item and not select it at the same time, press left or right arrow keys while maintaining the control key.</p>
<p>To deselect a data item or extend selection (if selection mode is &#8220;multiple&#8221;), move the focus to an item renderer and press the space bar while maintaining the control key.</p>
</div>
<div class="section" id="using-a-touch-device">
<h4>Using a touch device<a class="headerlink" href="#using-a-touch-device" title="Permalink to this headline">¶</a></h4>
<p>To select a data item, simply tap on it.</p>
</div>
</div>
<div class="section" id="data-item-editing">
<h3><a class="toc-backref" href="#id34">Data item editing</a><a class="headerlink" href="#data-item-editing" title="Permalink to this headline">¶</a></h3>
<p>The calendar widget allows to move and resize a data item.</p>
<p>Only one data item can be edited at a time.</p>
<p>Note: for more information on data item editing behavior and events, See dedicated section of advanced configuration.</p>
<div class="section" id="id2">
<h4>Using the mouse<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>To move a data item, press the mouse button over the body of an item renderer, drag the event at the desired position and release the mouse button.</p>
<p>To resize a data item, press the mouse button over the start or end of an item renderer, drag it to the desired position and release the mouse button.</p>
<p>If you press the escape key while editing a data item, the editing gesture will be canceled.</p>
</div>
<div class="section" id="id3">
<h4>Using the keyboard<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>If a data item has the focus (see selection section), press the enter key to edit it.</p>
<p>In editing mode:</p>
<blockquote>
<div><ul class="simple">
<li>press the arrow keys to move the data item,</li>
<li>press the up or down arrow keys while maintaining the control key to resize it by moving the end of this data item.</li>
<li>press the enter key to validate the changes and leaving the edit mode.</li>
<li>press the escape key to cancel the changes and leaving the edit mode.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id4">
<h4>Using a touch device<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>To enter in edit mode press an item renderer for a small amount of time, until the it visually change its state.</p>
<p>In editing mode:</p>
<blockquote>
<div><ul class="simple">
<li>press and move the body of the item renderer to move the event.</li>
<li>press and move one (or both) of the resize areas to resize the data item.</li>
<li>tap out of the item renderer to validate the changes and leave the edit mode.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="navigation-buttons">
<h3><a class="toc-backref" href="#id35">Navigation buttons</a><a class="headerlink" href="#navigation-buttons" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/buttonBar.png" src="../_images/buttonBar.png" />
<p>By default the calendar template defines 7 buttons to navigate in time.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Button</th>
<th class="head">Action</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Previous</td>
<td>Go the previous time range. For example if four days are displayed, show the four previous days.</td>
</tr>
<tr class="row-odd"><td>Next</td>
<td>Go to the next time range. For example if four days are displayed, show the four next days.</td>
</tr>
<tr class="row-even"><td>Today</td>
<td>Show the current day.</td>
</tr>
<tr class="row-odd"><td>Day</td>
<td>Shows the day defined by the &#8220;date&#8221; property or the current day if the date property is null.</td>
</tr>
<tr class="row-even"><td>Four days</td>
<td>Shows four days from the the day defined by the day property of  the current day if the date property is null.</td>
</tr>
<tr class="row-odd"><td>Week</td>
<td>shows the week that contains the day defined by the &#8220;date&#8221; property.</td>
</tr>
<tr class="row-even"><td>Month</td>
<td>shows the month that contains the day defined by the &#8220;date&#8221; property.</td>
</tr>
</tbody>
</table>
<p>The following functions are also exposed to help navigation:</p>
<blockquote>
<div><ul class="simple">
<li>nextRange(): show next time range.</li>
<li>previousRange(): show previous time range.</li>
<li>goToday(): show the current day.</li>
</ul>
</div></blockquote>
<p>These buttons and methods are just shortcuts that define the date, dateInterval and dateIntervalSteps properties.</p>
</div>
<div class="section" id="interactive-data-item-creation">
<h3><a class="toc-backref" href="#id36">Interactive data item creation</a><a class="headerlink" href="#interactive-data-item-creation" title="Permalink to this headline">¶</a></h3>
<p>Data items are retrieved in the data store. To programmatically add a new data item, the developer can use the store add() method (and <em>remove()</em> to delete it). If the store is an dojo.store.Observable store, the Calendar will automatically update its rendering.</p>
<p>The calendar is allowing to interactively create a data item by pressing the mouse button on the grid and dragging the mouse to set the duration of the event.</p>
<p>Since Dojo 1.9, this interactive creation is working with asynchronous stores, the newly created data item is added at the end of the gesture.</p>
<p>To enable the creation, the createOnGridClick property of the calendar must be set to true (false by default).
Furthermore, a custom function creating the data item must be set on the createItemFunc property.</p>
<dl class="docutils">
<dt>This custom function is taking three arguments:</dt>
<dd><ul class="first last simple">
<li>The current view,</li>
<li>The date of the clicked location,</li>
<li>The mouse event.</li>
</ul>
</dd>
</dl>
<p>The following example is showing an implementation of the createItemFunc that is creating a data item if and only if the control key only is pressed during the interaction. The created event initial position and duration is depending on the current view.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">createItem</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">view</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">e</span><span class="p">){</span>

  <span class="c1">// create item by maintaining control key</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">e</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">altKey</span><span class="p">){</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">colView</span> <span class="o">=</span> <span class="nx">calendar</span><span class="p">.</span><span class="nx">columnView</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">cal</span> <span class="o">=</span> <span class="nx">calendar</span><span class="p">.</span><span class="nx">dateModule</span><span class="p">;</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">view</span> <span class="o">==</span> <span class="nx">colView</span><span class="p">){</span>
    <span class="nx">start</span> <span class="o">=</span> <span class="nx">calendar</span><span class="p">.</span><span class="nx">floorDate</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">,</span> <span class="nx">colView</span><span class="p">.</span><span class="nx">timeSlotDuration</span><span class="p">);</span>
    <span class="nx">end</span> <span class="o">=</span> <span class="nx">cal</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">,</span> <span class="nx">colView</span><span class="p">.</span><span class="nx">timeSlotDuration</span><span class="p">);</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="nx">start</span> <span class="o">=</span> <span class="nx">calendar</span><span class="p">.</span><span class="nx">floorToDay</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
    <span class="nx">end</span> <span class="o">=</span> <span class="nx">cal</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="nx">id</span><span class="p">,</span>
    <span class="nx">summary</span><span class="o">:</span> <span class="s2">&quot;New event &quot;</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span>
    <span class="nx">startTime</span><span class="o">:</span> <span class="nx">start</span><span class="p">,</span>
    <span class="nx">endTime</span><span class="o">:</span> <span class="nx">end</span><span class="p">,</span>
    <span class="nx">allDay</span><span class="o">:</span> <span class="nx">view</span><span class="p">.</span><span class="nx">viewKind</span> <span class="o">==</span> <span class="s2">&quot;matrix&quot;</span>
  <span class="p">};</span>

  <span class="nx">id</span><span class="o">++</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">item</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">calendar</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;createOnGridClick&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;createItemFunc&quot;</span><span class="p">,</span> <span class="nx">createItem</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var createItem = function(view, d, e){

  // create item by maintaining control key
  if(!e.ctrlKey || e.shiftKey || e.altKey){
    return;
  }

  var start, end;
  var colView = calendar.columnView;
  var cal = calendar.dateModule;

  if(view == colView){
    start = calendar.floorDate(d, &quot;minute&quot;, colView.timeSlotDuration);
    end = cal.add(start, &quot;minute&quot;, colView.timeSlotDuration);
  }else{
    start = calendar.floorToDay(d);
    end = cal.add(start, &quot;day&quot;, 1);
  }

  var item = {
    id: id,
    summary: &quot;New event &quot; + id,
    startTime: start,
    endTime: end,
    allDay: view.viewKind == &quot;matrix&quot;
  };

  id++;

  return item;
}

calendar.set(&quot;createOnGridClick&quot;, true);
calendar.set(&quot;createItemFunc&quot;, createItem);</textarea></div></div>
</div>
<div class="section" id="calendar-events">
<h2><a class="toc-backref" href="#id37">Calendar events</a><a class="headerlink" href="#calendar-events" title="Permalink to this headline">¶</a></h2>
<p>The calendar is the source of specific events.</p>
<p>The following table is listing these events:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="51%" />
<col width="18%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Event</th>
<th class="head">Description</th>
<th class="head">Main Properties</th>
<th class="head">Mobile support</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>itemClick</td>
<td>An item renderer of an event has been clicked</td>
<td>item</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>itemDoubleClick</td>
<td>An item renderer of an event has been double-clicked</td>
<td>item</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>itemRollOver</td>
<td>The mouse cursor has entered in an item renderer</td>
<td>item</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>itemRollOut</td>
<td>The mouse cursor has left in an item renderer</td>
<td>item</td>
<td>No</td>
</tr>
<tr class="row-even"><td>itemContextMenu</td>
<td>An item renderer event has been context-clicked</td>
<td>item</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>gridClick</td>
<td>The grid (background of the calendar) has been clicked</td>
<td>date</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>gridDoubleClick</td>
<td>The grid has been double-clicked</td>
<td>date</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>change</td>
<td>The data item selection has changed</td>
<td>item</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>rowHeaderClick</td>
<td>(Matrix view) a cell of the row header has been clicked</td>
<td>index, date</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>expandRendererClick</td>
<td>(Matrix view) an expand renderer has been clicked</td>
<td>rowIndex, columnIndex</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>onExpandAnimationEnd</td>
<td>(Matrix view) an expand or collapse row animation has ended</td>
<td>null</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>columnHeaderClick</td>
<td>(Column views) a cell of the column header has been clicked</td>
<td>index, date</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>onItemEditBegin</td>
<td>The calendar is entering in editing mode</td>
<td>item</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>onItemEditBeginGesture</td>
<td>An editing gesture of data item is beginning</td>
<td>item,editKind</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>onItemEditMoveGesture</td>
<td>A data item is being moved</td>
<td>item</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>onItemEditResizeGesture</td>
<td>A data item is being resized</td>
<td>item</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>onItemEditEndGesture</td>
<td>An editing gesture has been finished</td>
<td>item, editKind</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>onItemEditEnd</td>
<td>The calendar is leaving editing mode</td>
<td>item, completed</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Note: The change event is different than the itemClick event:</dt>
<dd><ul class="first last simple">
<li>A change event with a null item value is sent if the grid is clicked.</li>
<li>If an already selected data item is clicked the change event is not dispatched but the itemClick event is.</li>
</ul>
</dd>
</dl>
<p>To react on a calendar event use the on() method to register a listener as shown in the following event:</p>
<div class="highlight"><pre><span class="nx">calendar</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;itemClick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Item clicked&quot;</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">summary</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">calendar.on(&quot;itemClick&quot;, function(e){
  console.log(&quot;Item clicked&quot;, e.item.summary);
});</textarea></div></div>
<div class="section" id="advanced-configuration">
<h2><a class="toc-backref" href="#id38">Advanced configuration</a><a class="headerlink" href="#advanced-configuration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="class-diagram">
<h3><a class="toc-backref" href="#id39">Class diagram</a><a class="headerlink" href="#class-diagram" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/MainCalendarDiagram.png" src="../_images/MainCalendarDiagram.png" />
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ViewBase</td>
<td>The base class of calendar views.</td>
</tr>
<tr class="row-odd"><td>CalendarBase</td>
<td>The base calendar class that is managing a set of calendar views and exposes time range definition properties.</td>
</tr>
<tr class="row-even"><td>Calendar</td>
<td>The desktop specific calendar that defines a column view and a matrix view with keyboard and mouse interactions enabled and default renderers</td>
</tr>
<tr class="row-odd"><td>MobileCalendar</td>
<td>The mobile specific calendar that defines a column view and a matrix view with touch interactions enabled and specific default renderers.</td>
</tr>
</tbody>
</table>
<img alt="../_images/ViewCalendarDiagram.png" src="../_images/ViewCalendarDiagram.png" />
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>MatrixView</td>
<td>The view that displays days as a matrix of days.</td>
</tr>
<tr class="row-odd"><td>SimpleColumnView</td>
<td>The view that displays each day as a column.</td>
</tr>
<tr class="row-even"><td>ColumnView</td>
<td>A SimpleColumnView with a secondary sheet that is showing all day events.</td>
</tr>
<tr class="row-odd"><td>ColumnViewSecondarySheet</td>
<td>A MatrixView designed to be integrated as a secondary sheet of a ColumnView.</td>
</tr>
<tr class="row-even"><td>MonthColumnView</td>
<td>The view that displays each month as a column.</td>
</tr>
<tr class="row-odd"><td>Mouse</td>
<td>A mixin that enables interactions on events using the mouse.</td>
</tr>
<tr class="row-even"><td>Keyboard</td>
<td>A mixin that enables interactions on events using the keyboard.</td>
</tr>
<tr class="row-odd"><td>Touch</td>
<td>A mixin that enables interactions on events using the touch events</td>
</tr>
<tr class="row-even"><td>_RendererMixin</td>
<td>Base class of item renderers.</td>
</tr>
<tr class="row-odd"><td>VerticalRenderer</td>
<td>The default item renderer class of vertical renderers used in columns view main sheet.</td>
</tr>
<tr class="row-even"><td>MobileVerticalRenderer</td>
<td>The default vertical item renderer class for mobile environment.</td>
</tr>
<tr class="row-odd"><td>HorizontalRenderer</td>
<td>The default item renderer class of horizontal renderers used in matrix view and in columns view secondary sheet.</td>
</tr>
<tr class="row-even"><td>MobileHorizontalRenderer</td>
<td>The default horizontal item renderer class for mobile environment.</td>
</tr>
<tr class="row-odd"><td>LabelRenderer</td>
<td>The default item renderer class for labels used in matrix view.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="calendar">
<h3><a class="toc-backref" href="#id40">Calendar</a><a class="headerlink" href="#calendar" title="Permalink to this headline">¶</a></h3>
<div class="section" id="calendar-views-animations">
<h4>Calendar views animations<a class="headerlink" href="#calendar-views-animations" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>On modern browsers, the calendar is performing an animation when:</dt>
<dd><ul class="first last simple">
<li>The displayed time interval is changing and/or</li>
<li>The current view is changing to display the time interval.</li>
</ul>
</dd>
</dl>
<p>To disable this animation set the calendar animateRange property to false (true by default).</p>
<p>To change the duration of the animation set the animationRangeDuration property (400 by default).</p>
<p>For the most skillful developers, subclass the _animateRange() method to implement your own animation.</p>
</div>
<div class="section" id="view-management">
<h4>View management<a class="headerlink" href="#view-management" title="Permalink to this headline">¶</a></h4>
<p>The default views are created in the _createDefaultViews() function.
To specify the views to use instead of the default views, set the views property.</p>
<p>The view switching is determined according to the displayed time interval.</p>
<p>The calendar is going through the following steps:</p>
<blockquote>
<div><ul class="simple">
<li>One or several properties that are defining the displayed time range are changed,</li>
<li>The new displayed time interval is computed,</li>
<li>The _computeCurrentView() function is called to determine which view should be used to properly display the time range.</li>
<li>The view is configured (setting startDate, columnCount etc) in the _configureView() function.</li>
<li>If the current view has changed, show the new view.</li>
</ul>
</div></blockquote>
<p>You can override these key function change the current and/or change the configuration of this view.</p>
<p>The following example shows the creation of custom views and a change the default view to display two weeks:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">secondarySheetClass</span> <span class="o">=</span> <span class="nx">declare</span><span class="p">([</span><span class="nx">ColumnViewSecondarySheet</span><span class="p">,</span> <span class="nx">CalendarKeyboard</span><span class="p">,</span> <span class="nx">CalendarMouse</span><span class="p">]);</span>

<span class="kd">var</span> <span class="nx">colView</span> <span class="o">=</span> <span class="nx">declare</span><span class="p">([</span><span class="nx">ColumnView</span><span class="p">,</span> <span class="nx">Keyboard</span><span class="p">,</span> <span class="nx">Mouse</span><span class="p">])({</span>
  <span class="nx">secondarySheetClass</span><span class="o">:</span> <span class="nx">secondarySheetClass</span><span class="p">,</span>
  <span class="nx">secondarySheetProps</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">horizontalRendererHeight</span><span class="o">:</span> <span class="mi">16</span>
  <span class="p">},</span>
  <span class="nx">verticalRenderer</span><span class="o">:</span> <span class="nx">VerticalRenderer</span><span class="p">,</span>
  <span class="nx">horizontalRenderer</span><span class="o">:</span> <span class="nx">HorizontalRenderer</span><span class="p">,</span>
  <span class="nx">expandRenderer</span><span class="o">:</span> <span class="nx">ExpandRenderer</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">matrixView</span> <span class="o">=</span> <span class="nx">declare</span><span class="p">([</span><span class="nx">MatrixView</span><span class="p">,</span> <span class="nx">Keyboard</span><span class="p">,</span> <span class="nx">Mouse</span><span class="p">])({</span>
  <span class="nx">horizontalRenderer</span><span class="o">:</span> <span class="nx">HorizontalRenderer</span><span class="p">,</span>
  <span class="nx">labelRenderer</span><span class="o">:</span> <span class="nx">LabelRenderer</span><span class="p">,</span>
  <span class="nx">expandRenderer</span><span class="o">:</span> <span class="nx">ExpandRenderer</span><span class="p">,</span>
  <span class="nx">verticalGap</span><span class="o">:</span><span class="mi">4</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">CalendarBase</span><span class="p">({</span>
  <span class="nx">views</span><span class="o">:</span> <span class="p">[</span><span class="nx">colView</span><span class="p">,</span> <span class="nx">matrixView</span><span class="p">],</span>
  <span class="nx">columnView</span><span class="o">:</span> <span class="nx">colView</span><span class="p">,</span>
  <span class="nx">matrixView</span><span class="o">:</span> <span class="nx">matrixView</span><span class="p">,</span>
  <span class="nx">_computeCurrentView</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">startDate</span><span class="p">,</span> <span class="nx">endDate</span><span class="p">,</span> <span class="nx">duration</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">duration</span> <span class="o">&lt;=</span> <span class="mi">14</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">views</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">views</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">},</span>
  <span class="nx">dateInterval</span><span class="o">:</span> <span class="s2">&quot;week&quot;</span><span class="p">,</span>
  <span class="nx">dateIntervalSteps</span><span class="o">:</span> <span class="mi">2</span>
<span class="p">},</span> <span class="s2">&quot;calendarNode&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var secondarySheetClass = declare([ColumnViewSecondarySheet, CalendarKeyboard, CalendarMouse]);

var colView = declare([ColumnView, Keyboard, Mouse])({
  secondarySheetClass: secondarySheetClass,
  secondarySheetProps: {
    horizontalRendererHeight: 16
  },
  verticalRenderer: VerticalRenderer,
  horizontalRenderer: HorizontalRenderer,
  expandRenderer: ExpandRenderer
});

var matrixView = declare([MatrixView, Keyboard, Mouse])({
  horizontalRenderer: HorizontalRenderer,
  labelRenderer: LabelRenderer,
  expandRenderer: ExpandRenderer,
  verticalGap:4
});

var calendar = new CalendarBase({
  views: [colView, matrixView],
  columnView: colView,
  matrixView: matrixView,
  _computeCurrentView: function(startDate, endDate, duration){
    return duration &lt;= 14 ? this.views[0] : this.views[1];
  },
  dateInterval: &quot;week&quot;,
  dateIntervalSteps: 2
}, &quot;calendarNode&quot;);</textarea></div></div>
</div>
<div class="section" id="right-to-left">
<h3><a class="toc-backref" href="#id41">Right-to-left</a><a class="headerlink" href="#right-to-left" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference external" href="http://dojotoolkit.org/reference-guide/quickstart/internationalization/bi-directional-text.html">http://dojotoolkit.org/reference-guide/quickstart/internationalization/bi-directional-text.html</a></p>
<p>To have a correct rendering in right-to-left display, you must import the calendar_rtl.css file in addition to the calendar.css file.</p>
</div>
<div class="section" id="bidi">
<h3><a class="toc-backref" href="#id42">Bidi</a><a class="headerlink" href="#bidi" title="Permalink to this headline">¶</a></h3>
<p>The calendar is also supporting the &#8220;textDir&#8221; property.</p>
<p>Import the dijit._BidiSupport class and set the &#8220;textDir&#8221; property to “rtl”, “ltr” or “auto” to set the contextual text direction.</p>
</div>
<div class="section" id="alternate-calendars">
<h3><a class="toc-backref" href="#id43">Alternate calendars</a><a class="headerlink" href="#alternate-calendars" title="Permalink to this headline">¶</a></h3>
<p>The calendar is using by default the gregorian calendar to display time, but the alternate calendars defined in dojox.date package can be set on the calendar.</p>
<p>In the constructor, set the datePackage to change the calendar. Remember to use the corresponding date object in the input data store.</p>
<p>The following example shows to how to set the Hebrew calendar:</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span><span class="nx">datePackage</span><span class="o">:</span> <span class="s2">&quot;dojox.date.hebrew&quot;</span><span class="p">},</span> <span class="s2">&quot;calendarNode&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">new Calendar({datePackage: &quot;dojox.date.hebrew&quot;}, &quot;calendarNode&quot;);</textarea></div></div>
<div class="section" id="date-time-formatting">
<h3><a class="toc-backref" href="#id44">Date/time formatting</a><a class="headerlink" href="#date-time-formatting" title="Permalink to this headline">¶</a></h3>
<p>The displayed dates labels are formatted using dojo formatters. If no specific calendar is specified the dojo.date.locale object is used, otherwise it is the dojox.date.XXXX.locale.</p>
<p>The formatter is using the CLDR (<a class="reference external" href="http://cldr.unicode.org/">http://cldr.unicode.org/</a>) to determine according to the current locale the correct date format to use and how to properly format the date.</p>
<p>The date format patterns can be specified by setting view specific properties or functions defined in following view sections.</p>
<p>The calendar exposes an formatItemTimeFunc property allowing to format the time displayed on renderers.</p>
<p>For example for a gregorian calendar, in en_US locale and default format length, a time label is formatted like that: “10:00 AM” or “8:15 AM”.</p>
<p>We can define a function to have a more compact display:</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">Calendar</span><span class="p">({</span>
  <span class="nx">formatItemTimeFunc</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">rd</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">rd</span><span class="p">.</span><span class="nx">dateLocaleModule</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;time&#39;</span><span class="p">,</span>
      <span class="nx">timePattern</span><span class="o">:</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;ha&quot;</span><span class="o">:</span><span class="s2">&quot;h:mma&quot;</span><span class="p">}</span>
    <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">new Calendar({
  formatItemTimeFunc: function(d, rd){
    return rd.dateLocaleModule.format(d, {
      selector: 'time',
      timePattern: d.getMinutes() == 0 ? &quot;ha&quot;:&quot;h:mma&quot;}
    ).toLowerCase();
  }
});</textarea></div><p>This will result into “10am” and “8:15am” when using the previous examples.</p>
</div>
<div class="section" id="common-properties">
<h3><a class="toc-backref" href="#id45">Common properties</a><a class="headerlink" href="#common-properties" title="Permalink to this headline">¶</a></h3>
<p>This section describes properties and concepts that are common to the views classes.</p>
<p>Note: the views are first citizen widgets that can be use alone without enclosing them into a Calendar widget.</p>
<div class="section" id="renderer-kind-mapping">
<h4>Renderer kind mapping<a class="headerlink" href="#renderer-kind-mapping" title="Permalink to this headline">¶</a></h4>
<p>The itemToRendererKindFunc properties allow to specify a mapping between a data item and a kind of item renderer (vertical, horizontal or label).</p>
<dl class="docutils">
<dt>Setting this function allows to:</dt>
<dd><ul class="first last simple">
<li>Filter out some data items, based on some of their properties,</li>
<li>Choose which kind of item renderer is more suited to display the data item.</li>
</ul>
</dd>
<dt>The default function behavior on the ColumnView is:</dt>
<dd><ul class="first last simple">
<li>If the data item is not an all day data item, use vertical item renderer,</li>
<li>otherwise, do not display the data item.</li>
</ul>
</dd>
</dl>
<p>The all day data item are displayed on the secondary sheet which also have a function with the inverse behavior.</p>
<p>For example, to show all-day data item and all the data items whose duration is equal or greater than a usual day (1440 minutes) on the secondary sheet only:</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">ColumnView</span><span class="p">({</span>
  <span class="nx">itemToRendererKindFunc</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">allDay</span> <span class="o">||</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">dateFuncObj</span><span class="p">.</span><span class="nx">difference</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">startTime</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">endTime</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1440</span> <span class="o">?</span> <span class="s2">&quot;null&quot;</span> <span class="o">:</span> <span class="s2">&quot;vertical&quot;</span><span class="p">;</span>
    <span class="p">},</span>
  <span class="nx">secondarySheetProps</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">itemToRendererKindFunc</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
      <span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">allDay</span> <span class="o">||</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">dateFuncObj</span><span class="p">.</span><span class="nx">difference</span><span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">startTime</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">endTime</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1440</span> <span class="o">?</span> <span class="s2">&quot;horizontal&quot;</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">new ColumnView({
  itemToRendererKindFunc: function(item){
    return item.allDay ||
      this.dateFuncObj.difference(item.startTime, item.endTime, &quot;minute&quot;) &gt; 1440 ? &quot;null&quot; : &quot;vertical&quot;;
    },
  secondarySheetProps: {
    itemToRendererKindFunc: function(item){
      return item.allDay ||
        this.dateFuncObj.difference(item.startTime, item.endTime, &quot;minute&quot;) &gt; 1440 ? &quot;horizontal&quot; : null;
    }
  }
});</textarea></div><dl class="docutils">
<dt>The default function behavior on the MatrixView is:</dt>
<dd><ul class="first last simple">
<li>If the data item duration is equal or greater than a usual day (1440 minutes), use a horizontal item renderer,</li>
<li>otherwise use a label item renderer.</li>
</ul>
</dd>
</dl>
<p>You can customize this behavior to show only horizontal item renderers, for example:</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">MatrixView</span><span class="p">({</span>
  <span class="nx">itemToRendererKindFunc</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
    <span class="k">return</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kc">null</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">new MatrixView({
  itemToRendererKindFunc: function(item){
    return &quot;horizontal&quot;;
  }
}, null);</textarea></div></div>
<div class="section" id="grid-cell-styling">
<h4>Grid cell styling<a class="headerlink" href="#grid-cell-styling" title="Permalink to this headline">¶</a></h4>
<p>The grid cells can be customized either by using CSS or programmatically.</p>
<dl class="docutils">
<dt>Each cell of the calendar has some CSS classes depending on the date/time it displays:</dt>
<dd><ul class="first last simple">
<li>&#8220;Sun&#8221;, &#8220;Mon&#8221;, &#8220;Tue&#8221;, &#8220;Wed&#8221;, &#8220;Thu&#8221;, &#8220;Fri&#8221; or &#8220;Sat&#8221;, depending on the day of week,</li>
<li>&#8220;H0&#8221; to &#8220;H23&#8221; according to the time of day (Column view only).</li>
<li>&#8220;Mxx&#8221; where <em>xx</em> is the minutes part of the time of day (Column view, depends on the the slot duration).</li>
</ul>
</dd>
</dl>
<p>The following example specifies CSS classes to grey out Wednesdays and the time range between 12pm and 2pm for other days of week:</p>
<div class="highlight"><pre><span class="nc">.dojoxCalendar</span> <span class="nc">.dojoxCalendarGrid</span> <span class="nc">.Wed</span><span class="o">,</span>
<span class="nc">.dojoxCalendar</span> <span class="nc">.dojoxCalendarGrid</span> <span class="nc">.H12</span><span class="o">,</span>
<span class="nc">.dojoxCalendar</span> <span class="nc">.dojoxCalendarGrid</span> <span class="nc">.H13</span>        <span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#F8F8F8</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="css"><textarea style="display:none">.dojoxCalendar .dojoxCalendarGrid .Wed,
.dojoxCalendar .dojoxCalendarGrid .H12,
.dojoxCalendar .dojoxCalendarGrid .H13        {
  background-color: #F8F8F8 !important;
}</textarea></div><p>For more advanced use cases, each view provides a <strong>styleGridCellFunc</strong> property that allows to customize a grid cell without subclassing a view.</p>
<p>The following example show how to install a CSS class to grey out Wednesdays and the time range between 12pm and 2pm for other days of week:</p>
<div class="highlight"><pre><span class="nc">.greyCell</span><span class="p">{</span>
  <span class="k">background-color</span><span class="o">:</span> <span class="m">#F8F8F8</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="css"><textarea style="display:none">.greyCell{
  background-color: #F8F8F8 !important;
}</textarea></div><div class="highlight"><pre><span class="nx">calendar</span><span class="p">.</span><span class="nx">columnView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;styleGridCellFunc&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">hours</span><span class="p">,</span> <span class="nx">minutes</span><span class="p">){</span>
  <span class="c1">// grey out Wednesday &amp; time range between 12pm and 2pm</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">hours</span> <span class="o">&gt;=</span> <span class="mi">12</span> <span class="o">&amp;&amp;</span> <span class="nx">hours</span> <span class="o">&lt;</span> <span class="mi">14</span> <span class="o">||</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">){</span>
    <span class="nx">domClass</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;greyCell&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">defaultStyleGridCell</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">date</span><span class="p">,</span> <span class="nx">hours</span><span class="p">,</span> <span class="nx">minutes</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">func</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">date</span><span class="p">){</span>
  <span class="c1">// grey out Wednesdays</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">date</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span><span class="p">){</span>
    <span class="nx">domClass</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="s2">&quot;greyCell&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">defaultStyleGridCell</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">date</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">columnView</span><span class="p">.</span><span class="nx">secondarySheet</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;styleGridCellFunc&quot;</span><span class="p">,</span> <span class="nx">func</span><span class="p">);</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">matrixView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;styleGridCellFunc&quot;</span><span class="p">,</span> <span class="nx">func</span><span class="p">);</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">monthColumnView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;styleGridCellFunc&quot;</span><span class="p">,</span> <span class="nx">func</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">calendar.columnView.set(&quot;styleGridCellFunc&quot;, function(node, date, hours, minutes){
  // grey out Wednesday &amp; time range between 12pm and 2pm
  if(hours &gt;= 12 &amp;&amp; hours &lt; 14 || date.getDay() == 3){
    domClass.add(node, &quot;greyCell&quot;);
  }
  this.defaultStyleGridCell(node, date, hours, minutes);
});

var func = function(node, date){
  // grey out Wednesdays
  if(date != null &amp;&amp; date.getDay() == 3){
    domClass.add(node, &quot;greyCell&quot;);
  }
  this.defaultStyleGridCell(node, date);
};
calendar.columnView.secondarySheet.set(&quot;styleGridCellFunc&quot;, func);
calendar.matrixView.set(&quot;styleGridCellFunc&quot;, func);
calendar.monthColumnView.set(&quot;styleGridCellFunc&quot;, func);</textarea></div></div>
<div class="section" id="item-renderer-overlap">
<h4>Item renderer overlap<a class="headerlink" href="#item-renderer-overlap" title="Permalink to this headline">¶</a></h4>
<p>When two item renderers are overlapping in time, the item renderers can either be displayed side by side (no overlap) or can overlap visually horizontally (vertical item renderers) or vertically (horizontal item renderers).</p>
<p>Note that the label item renderers cannot overlap visually.</p>
<p>To specify the overlap, set the percentOverlap property. A 0 value means no overlap, 50 means an overlapping of the half of item renderer size.</p>
<p>The following images show two overlapping events that are displayed by vertical item renderer.
The first one shows a percentOverlap of 70%, the second on a percentOverlap of 0%.</p>
<img alt="../_images/overlap70.png" src="../_images/overlap70.png" />
<img alt="../_images/overlap0.png" src="../_images/overlap0.png" />
</div>
<div class="section" id="layout-priority">
<h4>Layout priority<a class="headerlink" href="#layout-priority" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>During the layout process, the data items that are in the displayed time range are sorted according to the following comparison function:</dt>
<dd><ul class="first last simple">
<li>Data items that start first are placed first,</li>
<li>If two data item have the same start time, the longest is placed first.</li>
</ul>
</dd>
</dl>
<p>These simple rules allow to have nice looking layout when data items are overlapping  in time.</p>
<p>If you want to change this data item layout priority management, set a sorting function to the layoutPriorityFunction. One use case is to build a sort function based on a priority value set on the data item itself.</p>
</div>
<div class="section" id="renderers">
<h4>Renderers<a class="headerlink" href="#renderers" title="Permalink to this headline">¶</a></h4>
<p>The renderer classes (item renderer and others) are not set by default on the views.</p>
<p>The calendar widget is setting the default renderers classes to the views. If a view is used alone, the renderers must be set explicitly.</p>
</div>
</div>
<div class="section" id="column-view">
<h3><a class="toc-backref" href="#id46">Column View</a><a class="headerlink" href="#column-view" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id5">
<h4>Properties<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>The displayed time interval is defined by the startDate and columnCount properties. It is columnCount days from the startDate.</p>
<p>The time of day displayed is defined by the minHours (8 by default) and maxHours (18 by default)  properties. For example to show the entire day set minHours to 0 and maxHours to 24.</p>
<p>The desired size of an hour is defined in the hourSize property (100 by default). According to the value of time slot duration, the size may be slightly bigger.</p>
<p>The time slot duration can defined defined by setting the timeSlotDuration property (15 by default). For example, to show only half hours set the timeSlotDuration to 30.</p>
<p>The scroll position can be retrieved or set using the startTimeOfDay property. The value is an objet containing the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><strong>hours</strong> - The hours part of the time of day,</li>
<li><strong>minutes</strong> - the minutes part of the time of day,</li>
<li><strong>duration</strong> (setter) - the scroll animation duration to scroll from the minHours to the maxHours. The actual duration is computed according to the distance to scroll in order to scroll always at the same speed.</li>
<li><strong>easer</strong> (setter) - if duration is greater than 0, the easing function to use to animate the scroll.</li>
</ul>
</div></blockquote>
<p>For example to programmatically scroll the view to 9 am using an animation, use the following code:</p>
<div class="highlight"><pre><span class="nx">columnView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;startTimeOfDay&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">hours</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span> <span class="nx">duration</span><span class="o">:</span><span class="mi">1000</span><span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">columnView.set(&quot;startTimeOfDay&quot;, {hours:9, duration:1000});</textarea></div><p>The columns view is using a scroll bar, in right-to-left display, you can define the position of the scroll bar with respect to the sheet by setting the scrollBarRTLPosition property. Values are “left” (default) and “right”.</p>
</div>
<div class="section" id="row-header">
<h4>Row Header<a class="headerlink" href="#row-header" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The following properties allow to have a fine grained configuration of the row header:</dt>
<dd><ul class="first last simple">
<li><strong>rowHeaderGridSlotDuration</strong> (60) - The duration of a slot for the row header grid.</li>
<li><strong>rowHeaderLabelSlotDuration</strong> (60) - The duration of a slot of the row header labels.</li>
<li><strong>rowHeaderLabelOffset</strong> (2) - The offset in pixels of the labels from the top of the row header cell.</li>
<li><strong>rowHeaderFirstLabelOffset</strong> (2) - The offset in pixels of the first label from the top of the first row header cell.</li>
</ul>
</dd>
</dl>
<p>Using these properties, you can show a line every 15 minutes, a label every 30 min and center the label on the line (depend on font and font size) excepting the first one to be able to see it.</p>
<div class="highlight"><pre><span class="k">new</span> <span class="nx">ColumnView</span><span class="p">({</span>
  <span class="nx">rowHeaderGridSlotDuration</span><span class="o">:</span> <span class="mi">15</span><span class="p">,</span>
  <span class="nx">rowHeaderLabelSlotDuration</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
  <span class="nx">rowHeaderLabelOffset</span><span class="o">:</span> <span class="o">-</span><span class="mi">7</span>
<span class="p">},</span> <span class="nx">colViewNode</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">new ColumnView({
  rowHeaderGridSlotDuration: 15,
  rowHeaderLabelSlotDuration: 30,
  rowHeaderLabelOffset: -7
}, colViewNode);</textarea></div></div>
<div class="section" id="layout">
<h4>Layout<a class="headerlink" href="#layout" title="Permalink to this headline">¶</a></h4>
<p>In addition to the properties defined in the common section, the column view also exposes the horizontalGap property (default is 4).</p>
<p>This value is used to specify the gap in pixels between each overlapping renderer if percentOverlap is 0.</p>
</div>
<div class="section" id="id6">
<h4>Renderers<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The column view is using several renderers:</dt>
<dd><ul class="first last simple">
<li>vertical item renderers to show the data items in the main sheet.</li>
<li>horizontal item renderers and expand renderers for secondary sheet.</li>
</ul>
</dd>
</dl>
<p>The vertical item renderer class can be set on the verticalRenderer property.</p>
<p>The secondary sheet is a custom matrix view, see matrix view renderers for more information on the horizontal and expand renderers.</p>
</div>
<div class="section" id="styling">
<h4>Styling<a class="headerlink" href="#styling" title="Permalink to this headline">¶</a></h4>
<p>The styling of a column view  is defined in the themes/claro/ColumnView.css and themes/claro/ColumnView_rtl.css. The base CSS class name is dojoxCalendarColumnView.</p>
<p>The styling of a simple column view  is defined in the themes/claro/SimpleColumnView.css and themes/claro/SimpleColumnView_rtl.css. The base CSS class name is dojoxCalendarSimpleColumnView.</p>
<dl class="docutils">
<dt>Several functions are provided to style or set a style class on part of the view:</dt>
<dd><ul class="first last simple">
<li>styleColumnHeaderCell(node, date, renderData): allows to style a column header cell. By default, it installs dojoxCalendarToday and dojoxCalendarWeekend CSS classes.</li>
<li>styleRowHeaderCell(node, hour, renderData): allows to style a row header cell. By default, does nothing.</li>
<li>styleGridCell(node, date, hours, minutes, renderData): allows to style a grid cell. By default, it installs dojoxCalendarToday and dojoxCalendarWeekend CSS classes.</li>
</ul>
</dd>
</dl>
<p>The styleGridCellFunc property allows to customize a grid cell without subclassing a view.</p>
</div>
<div class="section" id="date-formatting">
<h4>Date formatting<a class="headerlink" href="#date-formatting" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>To change the default formatting of the a label, one can:</dt>
<dd><ul class="first last simple">
<li>set a custom date pattern in a dedicated property or</li>
<li>override the function that formats the date.</li>
</ul>
</dd>
</dl>
<p>The properties and function used by the column view are described in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="34%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Label</th>
<th class="head">Custom pattern property</th>
<th class="head">Formatting function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>row header cell</td>
<td>rowHeaderTimePattern</td>
<td>_formatRowHeaderLabel()</td>
</tr>
<tr class="row-odd"><td>column header cell</td>
<td>columnHeaderDatePattern</td>
<td>_formatColumnHeaderLabel()</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id47">Matrix View</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id8">
<h4>Properties<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>The displayed time range is defined by the startDate, columnCount and rowCount properties. The time range is columnCount x rowCount days from the startDate.</p>
<p>The refStartTime and refEndTime can be used to define a time range of interest. This time range must be included in the displayed time range. It allows to show days out of the time range of interest by greying their cells.</p>
</div>
<div class="section" id="expanded-row">
<h4>Expanded row<a class="headerlink" href="#expanded-row" title="Permalink to this headline">¶</a></h4>
<p>The matrix view can have one row expanded to show mode data items on this particular row (usually a week).</p>
<p>The following functions are available on the matrix view to manage this feature:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>expandRow()</td>
<td>Expands a row with an optional animation.</td>
</tr>
<tr class="row-odd"><td>collapseRow()</td>
<td>Collapses a row with an optional animation.</td>
</tr>
<tr class="row-even"><td>getExpandedRowIndex()</td>
<td>Returns the expanded row index if any, -1 otherwise.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id9">
<h4>Renderers<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>The matrix view is using several renderers:</p>
<blockquote>
<div><ul class="simple">
<li>horizontal item renderers (horizontalRenderer property) to display data items that last at least a day,</li>
<li>label item renderers (labelRenderer property) to display the other data items.</li>
<li>expand renderer (expandRenderer property), which indicates visually that some data items are visibles on a cell.</li>
</ul>
</div></blockquote>
<p>Horizontal item renderers are placed and sized according to the start and end time of the data item.</p>
<p>Label items renderers a placed in a cell and takes the cell width. They cannot overlap and cannot be resized.</p>
</div>
<div class="section" id="id10">
<h4>Layout<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<p>The matrix view has several layout properties.</p>
<p>The roundToDay property (default true), indicates that horizontal items renderers that represent events whose start or end time is not the start or end of a day should fill the cells that they are overlapping.</p>
<p>The two following images show the same data items that starts at 8 am and finishes at the end of the next day. This first one shows the result when the roundToDay property is true and the next one is this property is false.</p>
<img alt="../_images/roundToDayTrue.png" src="../_images/roundToDayTrue.png" />
<img alt="../_images/roundToDayFalse.png" src="../_images/roundToDayFalse.png" />
<p>This property can also be set to false, if all the data items are displayed using horizontal items renderers (see itemToRendererKindFunc property).</p>
<p>The size of the renderers are defined by the following properties:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="51%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Renderer</th>
<th class="head">Property</th>
<th class="head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>horizontal</td>
<td>horizontalRendererHeight</td>
<td>17</td>
</tr>
<tr class="row-odd"><td>label</td>
<td>labelRendererHeight</td>
<td>14</td>
</tr>
<tr class="row-even"><td>expand</td>
<td>expandRendererHeight</td>
<td>15</td>
</tr>
</tbody>
</table>
<p>In addition all the renderers shifted vertically of the value of the cellPaddingTop property (16 by default) to show the cell header.</p>
</div>
<div class="section" id="id11">
<h4>Styling<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>The styling of a matrix view is defined in the themes/claro/MatrixView.css and themes/claro/MatrixView_rtl.css.</p>
<p>The base CSS class name is dojoxCalendarMatrixView.</p>
<dl class="docutils">
<dt>Several functions are provided to style or set a style class on part of the view:</dt>
<dd><ul class="first last simple">
<li>styleColumnHeaderCell(node, date, renderData): allows to style a column header cell. By default, it installs dojoxCalendarWeekend CSS classes.</li>
<li>styleRowHeaderCell(node, hour, renderData): allows to style a row header cell. By default, does nothing.</li>
<li>styleGridCell(node, date, renderData): allows to style a grid column. By default, it installs dojoxCalendarToday, dojoxCalendarWeekend and dojoxCalendarDisabled CSS classes.</li>
</ul>
</dd>
</dl>
<p>The styleGridCellFunc property allows to customize a grid cell without subclassing a view.</p>
</div>
<div class="section" id="id12">
<h4>Date formatting<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>To change the default formatting of the a label, one can:</dt>
<dd><ul class="first last simple">
<li>set a custom date pattern or a custom format length in a dedicated property or</li>
<li>override the view function that formats the date.</li>
</ul>
</dd>
</dl>
<p>The properties and function used by the column view are described in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="18%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Label</th>
<th class="head">Formatting function</th>
<th class="head">Property</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>row header cell</td>
<td>_formatRowHeaderLabel()</td>
<td>none</td>
</tr>
<tr class="row-odd"><td>column header cell</td>
<td>_formatColumnHeaderLabel()</td>
<td>columnHeaderLabelLength</td>
</tr>
<tr class="row-even"><td>grid cell header</td>
<td>_formatGridCellLabel()</td>
<td>cellHeaderLongPattern (first visible day of month) and/or cellHeaderShortPattern (other days of month)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="month-column-view">
<h3><a class="toc-backref" href="#id48">Month Column View</a><a class="headerlink" href="#month-column-view" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id13">
<h4>Properties<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>The displayed time interval is defined by the startDate and columnCount properties. It is columnCount months from the first day of month defined by the startDate.</p>
<p>The desired size of a day is defined by the daySize property (30 by default).</p>
<p>The scroll position can be retrieved or set using the scrollPosition property. The value is an objet containing the following properties:</p>
<blockquote>
<div><ul class="simple">
<li><strong>date</strong> - The scroll position in day,</li>
<li><strong>duration</strong> (setter) - the scroll animation duration to scroll from the minHours to the maxHours. The actual duration is computed according to the distance to scroll in order to scroll always at the same speed.</li>
<li><strong>easer</strong> (setter) - if duration is greater than 0, the easing function to use to animate the scroll.</li>
</ul>
</div></blockquote>
<p>For example to programmatically scroll the view to the 10th using an animation, use the following code:</p>
<div class="highlight"><pre><span class="nx">monthColumnView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;scrollPosition&quot;</span><span class="p">,</span> <span class="p">{</span><span class="nx">position</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span> <span class="nx">duration</span><span class="o">:</span><span class="mi">1000</span><span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">monthColumnView.set(&quot;scrollPosition&quot;, {position:10, duration:1000});</textarea></div><p>The month columns view is using a scroll bar, in right-to-left display, you can define the position of the scroll bar with respect to the sheet by setting the scrollBarRTLPosition property. Values are “left” (default) and “right”.</p>
</div>
<div class="section" id="id14">
<h4>Layout<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>In addition to the properties defined in the common section, the month column view also exposes the horizontalGap property (default is 4).</p>
<p>This value is used to specify the gap in pixels between each overlapping renderer if percentOverlap is 0.</p>
<p>The hidden data items grid cell decoration can be not displayed by setting the showHiddenEvents property.</p>
</div>
<div class="section" id="id15">
<h4>Renderers<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p>The month columns view is only using item vertical renderers.</p>
<p>The vertical item renderer class can be set on the verticalRenderer property.</p>
</div>
<div class="section" id="id16">
<h4>Styling<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<p>The styling of a month columns view  is defined in the themes/claro/MonthColumnView.css and themes/claro/MonthColumnView_rtl.css. The base CSS class name is dojoxCalendarMonthColumnView.</p>
<dl class="docutils">
<dt>Several functions are provided to style or set a style class on part of the view:</dt>
<dd><ul class="first last simple">
<li>styleColumnHeaderCell(node, date, renderData): allows to style a column header cell.</li>
<li>styleGridCell(node, date, renderData): allows to style a grid cell. By default, it installs dojoxCalendarToday and dojoxCalendarWeekend CSS classes.</li>
</ul>
</dd>
</dl>
<p>In an additional layout pass, the dojoxCalendarHiddenEvents CSS class is installed on grid cells if they are hidden data items in the corresponding date.</p>
<p>The styleGridCellFunc property allows to customize a grid cell without subclassing a view.</p>
</div>
<div class="section" id="id17">
<h4>Date formatting<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>To change the default formatting of the a label, one can:</dt>
<dd><ul class="first last simple">
<li>set a custom date pattern in a dedicated property or</li>
<li>override the function that formats the date.</li>
</ul>
</dd>
</dl>
<p>The properties and function used by the column view are described in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="34%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Label</th>
<th class="head">Custom pattern property</th>
<th class="head">Formatting function</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>column header cell</td>
<td>columnHeaderDatePattern</td>
<td>_formatColumnHeaderLabel()</td>
</tr>
<tr class="row-odd"><td>grid cell</td>
<td>gridCellPattern</td>
<td>_formatGridCellLabel()</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="custom-renderers">
<h3><a class="toc-backref" href="#id49">Custom renderers</a><a class="headerlink" href="#custom-renderers" title="Permalink to this headline">¶</a></h3>
<p>Several default item renderers are provided but you can develop your own renderer.</p>
<p>The item renderer must extend the dojox.calendar._RendererMixin class.</p>
<p>The main property is of course the item property. The item is an object that contains:</p>
<blockquote>
<div><ul class="simple">
<li><strong>item</strong> - the store item.</li>
<li><strong>range</strong> - the part of the event displayed by this item renderer. Sometimes several item renderers are needed to display one data item,</li>
<li>other layout properties.</li>
</ul>
</div></blockquote>
<p>The owner property contains a reference to the view that is using this item renderer.</p>
<p>This class provides the state management of the displayed item renderer. The values are computed by the view and passed to the renderer.</p>
<p>The state properties are: edited, focused, hovered, selected. If a state is set, a custom CSS class is added (same name with upper case first letter for example “Selected”).</p>
<p>Additional CSS classed are used to describe the data item state with respect to the store:</p>
<blockquote>
<div><ul class="simple">
<li>&#8220;Storing&#8221;: The data item is being added/updated to the store.</li>
<li>&#8220;Unstored&#8221;: The data item is not in the store yet (interactive data item create use case)</li>
</ul>
</div></blockquote>
<p>Finally the moveEnabled and resizeEnabled properties, define if the data item can be respectively moved or resized.</p>
<p>If the item renderer needs a substantial refresh, the updateRendering() function is called. It is used mainly to compute the visibility of sub-components of this item renderer.</p>
<p>Other utility functions are provided to format time and set text using Bidi text direction etc.</p>
</div>
<div class="section" id="id18">
<h3><a class="toc-backref" href="#id50">Data item editing</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id19">
<h4>Introduction<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<p>The calendar allows to interactively move or resize a data item.</p>
</div>
<div class="section" id="steps">
<h4>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>The data item editing process is going through the following steps:</dt>
<dd><ul class="first last simple">
<li>The editing is initialized by a user interaction, the widget is entering in edit mode.</li>
<li>The user is doing some move gestures or/and some resize gestures.</li>
<li>The user validate or cancel the changes, the widget is leaving edit mode.</li>
</ul>
</dd>
<dt>There are some specifics depending on the device used:</dt>
<dd><ul class="first last simple">
<li>Using the mouse: only one gesture (move or resize) per editing.</li>
<li>Using touch events: cancellation is not possible (possible future improvement).</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="editing-flags">
<h4>Editing flags<a class="headerlink" href="#editing-flags" title="Permalink to this headline">¶</a></h4>
<p>The editable property allows to globally enable or disable the editing capability of the widget.</p>
<p>If the editable property is true, the moveEnabled and resizeEnabled properties allow to control respectively if a data item can be moved or resized.</p>
<p>To have a control of editing, move or resize at the data item level, override respectively the isItemEditable(), isItemMoveEnabled() or isItemResizeEnabled() functions of the Calendar class.</p>
<dl class="docutils">
<dt>The following example shows how to subclass the Calendar to override these functions to:</dt>
<dd><ul class="first last simple">
<li>allow resize of a data item if &#8220;editable&#8221; and &#8220;resizeEnabled&#8221; properties of the data item are resolved as <em>true</em>,</li>
<li>allow move of a data item if &#8220;editable&#8221; and &#8220;moveEnabled&#8221; properties of the data item are resolved as <em>true</em>.</li>
</ul>
</dd>
</dl>
<div class="highlight"><pre><span class="nf">#calendarNode</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span><span class="k">absolute</span><span class="p">;</span>
  <span class="k">left</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
  <span class="k">bottom</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="css"><textarea style="display:none">#calendarNode {
  position:absolute;
  left: 10px;
  right: 10px;
  top: 10px;
  bottom: 10px;
}</textarea></div><div class="highlight"><pre><span class="c1">// subclass Calendar class</span>
<span class="kd">var</span> <span class="nx">ECalendar</span> <span class="o">=</span> <span class="nx">declare</span><span class="p">(</span><span class="s2">&quot;extended.Calendar&quot;</span><span class="p">,</span> <span class="nx">Calendar</span><span class="p">,</span> <span class="p">{</span>

  <span class="nx">isItemEditable</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">rendererKind</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">item</span><span class="p">.</span><span class="nx">editable</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isItemResizeEnabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">rendererKind</span><span class="p">){</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isItemEditable</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">rendererKind</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">resizeEnabled</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isItemMoveEnabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">rendererKind</span><span class="p">){</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">isItemEditable</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span> <span class="nx">rendererKind</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">moveEnabled</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">calendar</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ECalendar</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;calendarNode&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// subclass Calendar class
var ECalendar = declare(&quot;extended.Calendar&quot;, Calendar, {

  isItemEditable: function(item, rendererKind){
    return item.editable;
  },

  isItemResizeEnabled: function(item, rendererKind){
    return this.isItemEditable(item, rendererKind) &amp;&amp; item.resizeEnabled;
  },

  isItemMoveEnabled: function(item, rendererKind){
    return this.isItemEditable(item, rendererKind) &amp;&amp; item.moveEnabled;
  }
});

var calendar = new ECalendar(null, &quot;calendarNode&quot;);</textarea></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;calendarNode&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div id=&quot;calendarNode&quot;&gt;&lt;/div&gt;</textarea></div></div>
<div class="section" id="editing-behavior-properties">
<h4>Editing behavior properties<a class="headerlink" href="#editing-behavior-properties" title="Permalink to this headline">¶</a></h4>
<p>To customize the event editing behavior, a set of properties are exposed by the views.</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="7%" />
<col width="7%" />
<col width="8%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Column view default value</th>
<th class="head">Matrix view default value</th>
<th class="head">Month Columns default value</th>
<th class="head">ViewDescription</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>allDayKeyboardLeftRightSteps</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>How many unit to add or removed when using the keyboard left or right keys when editing an all day data item.</td>
</tr>
<tr class="row-odd"><td>allDayKeyboardLeftRightUnit</td>
<td>“day”</td>
<td>“day”</td>
<td>&#8220;month&#8221;</td>
<td>Unit to add or remove when using the keyboard left or right keys when editing an all day data item.</td>
</tr>
<tr class="row-even"><td>allDayKeyboardUpDownSteps</td>
<td>0</td>
<td>7</td>
<td>1</td>
<td>How many unit to add or remove when using the keyboard up or bottom keys when editing an all day data item.</td>
</tr>
<tr class="row-odd"><td>allDayKeyboardUpDownUnit</td>
<td>“day”</td>
<td>“day”</td>
<td>&#8220;day&#8221;</td>
<td>Unit to add or remove when using the keyboard up or down keys when editing an all day data item.</td>
</tr>
<tr class="row-even"><td>allowResizeLessThan24H</td>
<td>true</td>
<td>false</td>
<td>false</td>
<td>Allow or not to resize a data item that is lasting more than 24 hours to a duration less than 24 hours. Matrix view is preventing this because by default two renderer kinds are used to display data items depending on their duration.</td>
</tr>
<tr class="row-odd"><td>allowStartEndSwap</td>
<td>true</td>
<td>true</td>
<td>true</td>
<td>Allows move the end of a data item before the start and vice  versa.</td>
</tr>
<tr class="row-even"><td>keyboardLeftRightSteps</td>
<td>1</td>
<td>15</td>
<td>1</td>
<td>How many unit to add or remove when using the keyboard left or right keys.</td>
</tr>
<tr class="row-odd"><td>keyboardLeftRightUnit</td>
<td>“day”</td>
<td>“minute”</td>
<td>&#8220;month&#8221;</td>
<td>Unit to add or remove when using the keyboard left or right keys..</td>
</tr>
<tr class="row-even"><td>keyboardUpDownSteps</td>
<td>15</td>
<td>7</td>
<td>1</td>
<td>How many unit to add or remove when using the keyboard up or down keys.</td>
</tr>
<tr class="row-odd"><td>keyboardUpDownUnit</td>
<td>“minutes”</td>
<td>“day”</td>
<td>&#8220;day&#8221;</td>
<td>Unit to add or remove when using the keyboard up or down keys..</td>
</tr>
<tr class="row-even"><td>liveLayout</td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>If false, only the edited renderer position/size is updated during the editing gestures. Otherwise all the renderers are updates during the editing gesture (more CPU intensive).</td>
</tr>
<tr class="row-odd"><td>minDurationSteps</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>The number of unit used to define the minimum duration of an event.</td>
</tr>
<tr class="row-even"><td>minDurationUnit</td>
<td>“minute”</td>
<td>“minute”</td>
<td>&#8220;day&#8221;</td>
<td>The unit used to define the minimum duration of an event.</td>
</tr>
<tr class="row-odd"><td>snapSteps</td>
<td>15</td>
<td>15</td>
<td>1</td>
<td>The number of unit used to compute the snapping of edited dates.</td>
</tr>
<tr class="row-even"><td>snapUnit</td>
<td>“minutes”</td>
<td>“minute”</td>
<td>&#8220;day&#8221;</td>
<td>The used to compute the snapping of edited dates.</td>
</tr>
<tr class="row-odd"><td>stayInView</td>
<td>true</td>
<td>true</td>
<td>true</td>
<td>Forces the event to stay in the view.</td>
</tr>
<tr class="row-even"><td>touchEndEditingTimer</td>
<td>5000</td>
<td>5000</td>
<td>5000</td>
<td>The time out after a implicit validation of changes in touch environment.</td>
</tr>
<tr class="row-odd"><td>touchStartEditingTimer</td>
<td>750</td>
<td>750</td>
<td>750</td>
<td>The amount of time needed a renderer needs to be pressed before entering in edit mode.</td>
</tr>
<tr class="row-even"><td>triggerExtent</td>
<td>3</td>
<td>3</td>
<td>3</td>
<td>The distance in pixels needed to trigger the editing using the mouse.</td>
</tr>
</tbody>
</table>
<p>For example to change the minimal duration of an event to 30 minutes.</p>
<div class="highlight"><pre><span class="nx">calendar</span><span class="p">.</span><span class="nx">columnView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;minDurationSteps&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">);</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">columnView</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">&quot;minDurationUnit&quot;</span><span class="p">,</span> <span class="s2">&quot;minute&quot;</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">calendar.columnView.set(&quot;minDurationSteps&quot;, 30);
calendar.columnView.set(&quot;minDurationUnit&quot;, &quot;minute&quot;);</textarea></div></div>
<div class="section" id="editing-event-handlers">
<h4>Editing event handlers<a class="headerlink" href="#editing-event-handlers" title="Permalink to this headline">¶</a></h4>
<p>In some advanced use cases, the editing properties are not sufficient, the editing events are used to have a specific behavior.</p>
<p>These events are listed in the following table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="27%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Event</th>
<th class="head">Description</th>
<th class="head">Usage</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>itemEditBegin</td>
<td>The widget has entered in edit mode</td>
<td>Store initial values.</td>
</tr>
<tr class="row-odd"><td>itemEditBeginGesture</td>
<td>A gesture is beginning</td>
<td>Store initial values before gesture.</td>
</tr>
<tr class="row-even"><td>itemEditMoveGesture</td>
<td>A move gesture occurred</td>
<td>Snapping, view limit management.</td>
</tr>
<tr class="row-odd"><td>itemEditResizeGesture</td>
<td>A resize gesture occurred</td>
<td>Snapping, view limit management, duration constraints enforcement.</td>
</tr>
<tr class="row-even"><td>itemEditEndGesture</td>
<td>A move or resize gesture has ended</td>
<td>Apply or cancel gesture.</td>
</tr>
<tr class="row-odd"><td>itemEditEnd</td>
<td>The widget is leaving edit mode</td>
<td>Apply changes to store item or cancel changes and revert start and end time.</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>All the editing events have the following properties:</dt>
<dd><ul class="first last simple">
<li><strong>item</strong>: an object that contains the start and end time during the event editing in the startTime and endTime properties. When the data item is moved or resized, new start and end time values are computed and put in these properties. The itemEditMoveGesture and itemEditResizeGesture default event handlers are then manipulating these properties to apply snapping, limits etc according to the editing properties values.</li>
<li><strong>storeItem</strong>: The data item that is being edited. This object must not be changed excepting in itemEditEnd event.</li>
</ul>
</dd>
</dl>
<p>To prevent the editing default behavior applied by the calendar, call in your handler of the item editing event preventDefault().</p>
<p>The following example is cancelling the editing gesture when the data item has a specific property and its start time is after 1pm (included)</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">ss</span><span class="p">,</span> <span class="nx">se</span><span class="p">;</span>
<span class="nx">calendar</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;itemEditBegin&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="c1">// save initial values</span>
  <span class="nx">ss</span> <span class="o">=</span> <span class="nx">calendar</span><span class="p">.</span><span class="nx">newDate</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">startTime</span><span class="p">);</span>
  <span class="nx">se</span> <span class="o">=</span> <span class="nx">calendar</span><span class="p">.</span><span class="nx">newDate</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">endTime</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">calendar</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;itemEditEnd&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="c1">// a condition using properties of the store item and the render item</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">storeItem</span><span class="p">.</span><span class="nx">calendar</span> <span class="o">==</span> <span class="s2">&quot;cal2&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">startTime</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">13</span><span class="p">){</span>
    <span class="c1">// cancel default behavior (i.e. applying changes to store)</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="c1">// set the previously values to revert changes on the render item</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">=</span> <span class="nx">ss</span><span class="p">;</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">item</span><span class="p">.</span><span class="nx">endTime</span> <span class="o">=</span> <span class="nx">se</span><span class="p">;</span>
  <span class="p">}</span> <span class="c1">// default behavior for other use cases</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var ss, se;
calendar.on(&quot;itemEditBegin&quot;, function(e){
  // save initial values
  ss = calendar.newDate(e.item.startTime);
  se = calendar.newDate(e.item.endTime);
});

calendar.on(&quot;itemEditEnd&quot;, function(e){
  // a condition using properties of the store item and the render item
  if(e.storeItem.calendar == &quot;cal2&quot; &amp;&amp; e.item.startTime.getHours() &gt;= 13){
    // cancel default behavior (i.e. applying changes to store)
    e.preventDefault();

    // set the previously values to revert changes on the render item
    e.item.startTime = ss;
    e.item.endTime = se;
  } // default behavior for other use cases
});</textarea></div></div>
</div>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id51">See also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>A demo is leveraging the Dojo calendar. Check it out <a class="reference external" href="http://demos.dojotoolkit.org/demos/calendar/">here</a>.</li>
</ul>
</div></blockquote>
</div>
</div>


                        </div>
                    </div>
                    <div class="sidebar unit size1of4 lastUnit">
                        <h4>Reference Guide</h4>
						<div id="dtkVersion">
							<label for="refver">Dojo Version</label>
							<select id="refver" name="refver">
								<option value="1.6">1.6</option>
								<option value="1.7">1.7</option>
								<option value="1.8" selected="selected">1.8</option>
                                <option value="1.9">1.9</option>
							</select>
						</div>
                        <ul>
                            <li><a href="../index.html">Startpage</a></li>
                            <li><a href="../dojo/index.html">Dojo</a></li>
                            <li><a href="../dijit/index.html">Dijit</a></li>
                            <li><a href="index.html">DojoX</a></li>
                        </ul>
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">dojox.calendar</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#creating-a-calendar">Creating a Calendar</a></li>
<li><a class="reference internal" href="#configuring-calendar-data">Configuring Calendar data</a><ul>
<li><a class="reference internal" href="#manage-store-errors">Manage store errors</a></li>
<li><a class="reference internal" href="#data-mapping">Data mapping</a></li>
</ul>
</li>
<li><a class="reference internal" href="#time-range-definition">Time range definition</a></li>
<li><a class="reference internal" href="#styling-renderers">Styling renderers</a></li>
<li><a class="reference internal" href="#views">Views</a><ul>
<li><a class="reference internal" href="#columns-view">Columns View</a></li>
<li><a class="reference internal" href="#matrix-view">Matrix View</a></li>
<li><a class="reference internal" href="#month-columns-view">Month Columns View</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interactions">Interactions</a><ul>
<li><a class="reference internal" href="#selection">Selection</a><ul>
<li><a class="reference internal" href="#properties">Properties</a></li>
<li><a class="reference internal" href="#using-the-mouse">Using the mouse</a></li>
<li><a class="reference internal" href="#using-the-keyboard">Using the keyboard</a></li>
<li><a class="reference internal" href="#using-a-touch-device">Using a touch device</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-item-editing">Data item editing</a><ul>
<li><a class="reference internal" href="#id2">Using the mouse</a></li>
<li><a class="reference internal" href="#id3">Using the keyboard</a></li>
<li><a class="reference internal" href="#id4">Using a touch device</a></li>
</ul>
</li>
<li><a class="reference internal" href="#navigation-buttons">Navigation buttons</a></li>
<li><a class="reference internal" href="#interactive-data-item-creation">Interactive data item creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#calendar-events">Calendar events</a></li>
<li><a class="reference internal" href="#advanced-configuration">Advanced configuration</a><ul>
<li><a class="reference internal" href="#class-diagram">Class diagram</a></li>
<li><a class="reference internal" href="#calendar">Calendar</a><ul>
<li><a class="reference internal" href="#calendar-views-animations">Calendar views animations</a></li>
<li><a class="reference internal" href="#view-management">View management</a></li>
</ul>
</li>
<li><a class="reference internal" href="#right-to-left">Right-to-left</a></li>
<li><a class="reference internal" href="#bidi">Bidi</a></li>
<li><a class="reference internal" href="#alternate-calendars">Alternate calendars</a></li>
<li><a class="reference internal" href="#date-time-formatting">Date/time formatting</a></li>
<li><a class="reference internal" href="#common-properties">Common properties</a><ul>
<li><a class="reference internal" href="#renderer-kind-mapping">Renderer kind mapping</a></li>
<li><a class="reference internal" href="#grid-cell-styling">Grid cell styling</a></li>
<li><a class="reference internal" href="#item-renderer-overlap">Item renderer overlap</a></li>
<li><a class="reference internal" href="#layout-priority">Layout priority</a></li>
<li><a class="reference internal" href="#renderers">Renderers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#column-view">Column View</a><ul>
<li><a class="reference internal" href="#id5">Properties</a></li>
<li><a class="reference internal" href="#row-header">Row Header</a></li>
<li><a class="reference internal" href="#layout">Layout</a></li>
<li><a class="reference internal" href="#id6">Renderers</a></li>
<li><a class="reference internal" href="#styling">Styling</a></li>
<li><a class="reference internal" href="#date-formatting">Date formatting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id7">Matrix View</a><ul>
<li><a class="reference internal" href="#id8">Properties</a></li>
<li><a class="reference internal" href="#expanded-row">Expanded row</a></li>
<li><a class="reference internal" href="#id9">Renderers</a></li>
<li><a class="reference internal" href="#id10">Layout</a></li>
<li><a class="reference internal" href="#id11">Styling</a></li>
<li><a class="reference internal" href="#id12">Date formatting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#month-column-view">Month Column View</a><ul>
<li><a class="reference internal" href="#id13">Properties</a></li>
<li><a class="reference internal" href="#id14">Layout</a></li>
<li><a class="reference internal" href="#id15">Renderers</a></li>
<li><a class="reference internal" href="#id16">Styling</a></li>
<li><a class="reference internal" href="#id17">Date formatting</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-renderers">Custom renderers</a></li>
<li><a class="reference internal" href="#id18">Data item editing</a><ul>
<li><a class="reference internal" href="#id19">Introduction</a></li>
<li><a class="reference internal" href="#steps">Steps</a></li>
<li><a class="reference internal" href="#editing-flags">Editing flags</a></li>
<li><a class="reference internal" href="#editing-behavior-properties">Editing behavior properties</a></li>
<li><a class="reference internal" href="#editing-event-handlers">Editing event handlers</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="av/widget.html"
                        title="previous chapter">dojox.av.widget</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="charting.html"
                        title="next chapter">dojox.charting</a></p>
    <div id="searchbox" style="display: none">
        <h3>Quick search</h3>
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
         </form>
         <p class="searchtip" style="font-size: 90%">
             Enter search terms or a module, class or function name.
         </p>
    </div>
        </div>
      </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hide" />
        <div id="foot">
            <div class="innerBox">
                <script type="text/javascript">document.write('<a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&amp;formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&amp;entry_0=' + encodeURIComponent(window.location.href) + '">Error in the documentation? Can’t find what you are looking for? Let us know!</a>');</script>
                <div class="footer">
                      &copy; Copyright 2005-2012, Dojo Foundation.
                      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
                </div>
            </div>  
        </div>
        <script src="http://www.google.com/jsapi?key=ABQIAAAAbTW5DVaTIHKHQe5Q75sB0BSaOaO_TgJ5c3mtQFnk5JO2zD5dZBSGHlRJ8HAPlCQCEO_FxSmyNAHSLw" type="text/javascript"></script>
    </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>